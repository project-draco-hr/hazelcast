{
  ByteBuffer[] buffers=new ByteBuffer[data == null ? 0 : data.length];
  int index=0;
  if (data != null) {
    for (    Data d : data) {
      if (d != null && d.buffer != null)       buffers[index++]=ByteBuffer.wrap(d.buffer);
    }
  }
  if (args == null)   args=new String[]{};
  long id=newCallId();
  Protocol protocol=new Protocol(null,command,String.valueOf(id),getCurrentThreadId(),false,args,buffers);
  return protocol;
}
