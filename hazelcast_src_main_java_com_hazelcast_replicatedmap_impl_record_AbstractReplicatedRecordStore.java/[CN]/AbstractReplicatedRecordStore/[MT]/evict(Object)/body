{
  isNotNull(key,"key");
  long time=Clock.currentTimeMillis();
  storage.checkState();
  V oldValue;
  K marshalledKey=(K)marshallKey(key);
synchronized (getMutex(marshalledKey)) {
    final ReplicatedRecord current=storage.get(marshalledKey);
    if (current == null) {
      oldValue=null;
    }
 else {
      oldValue=(V)current.getValueInternal();
      if (oldValue != null) {
        current.setValueInternal(null,localMemberHash,TOMBSTONE_REMOVAL_PERIOD_MS);
        scheduleTtlEntry(TOMBSTONE_REMOVAL_PERIOD_MS,marshalledKey,null);
        current.incrementVectorClock(localMember);
      }
    }
  }
  Object unmarshalledOldValue=unmarshallValue(oldValue);
  fireEntryListenerEvent(key,unmarshalledOldValue,null,EntryEventType.EVICTED);
  if (replicatedMapConfig.isStatisticsEnabled()) {
    mapStats.incrementRemoves(Clock.currentTimeMillis() - time);
  }
}
