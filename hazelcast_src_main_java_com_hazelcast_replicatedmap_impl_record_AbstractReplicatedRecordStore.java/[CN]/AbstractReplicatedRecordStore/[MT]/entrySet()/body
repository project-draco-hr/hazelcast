{
  storage.checkState();
  Set entrySet=new HashSet(storage.size());
  for (  Map.Entry<K,ReplicatedRecord<K,V>> entry : storage.entrySet()) {
    K keyOfEntry=entry.getKey();
    if (!containsKeyInternal(keyOfEntry)) {
      continue;
    }
    Object key=unmarshallKey(keyOfEntry);
    Object value=unmarshallValue(entry.getValue().getValue());
    entrySet.add(new AbstractMap.SimpleEntry(key,value));
  }
  mapStats.incrementOtherOperations();
  return entrySet;
}
