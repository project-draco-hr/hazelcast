{
  FieldDefinition fd=cd.get(fieldName);
  if (fd == null) {
    throw throwUnknownFieldException(fieldName);
  }
  final int currentPos=in.position();
  try {
    int pos=getPosition(fd);
    in.position(pos);
    final int len=in.readInt();
    final Portable[] portables=new Portable[len];
    if (len > 0) {
      final int offset=in.position();
      final PortableContextAwareDataInput ctxIn=(PortableContextAwareDataInput)in;
      try {
        ctxIn.setFactoryId(fd.getFactoryId());
        ctxIn.setDataClassId(fd.getClassId());
        for (int i=0; i < len; i++) {
          final int start=in.readInt(offset + i * 4);
          in.position(start);
          portables[i]=serializer.read(in);
        }
      }
  finally {
        ctxIn.setFactoryId(cd.getFactoryId());
        ctxIn.setDataClassId(cd.getClassId());
      }
    }
    return portables;
  }
  finally {
    in.position(currentPos);
  }
}
