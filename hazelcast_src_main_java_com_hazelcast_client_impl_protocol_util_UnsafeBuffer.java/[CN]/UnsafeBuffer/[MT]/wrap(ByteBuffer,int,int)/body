{
  if (SHOULD_BOUNDS_CHECK) {
    final int bufferCapacity=buffer.capacity();
    if (offset != 0 && (offset < 0 || offset > bufferCapacity - 1)) {
      throw new IllegalArgumentException("offset=" + offset + " not valid for buffer.capacity()="+ bufferCapacity);
    }
    if (length < 0 || length > bufferCapacity - offset) {
      throw new IllegalArgumentException("offset=" + offset + " length="+ length+ " not valid for buffer.capacity()="+ bufferCapacity);
    }
  }
  byteBuffer=buffer;
  if (buffer.hasArray()) {
    byteArray=buffer.array();
    addressOffset=ARRAY_BASE_OFFSET + buffer.arrayOffset() + offset;
  }
 else {
    throw new UnsupportedOperationException("Cannot use DirectByteBuffer yet.");
  }
  capacity=length;
}
