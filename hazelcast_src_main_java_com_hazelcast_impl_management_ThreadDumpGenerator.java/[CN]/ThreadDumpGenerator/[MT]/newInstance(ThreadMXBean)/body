{
  String p=System.getProperty("java.specification.version");
  int v=Integer.parseInt(p.split("\\.")[1]);
  String cname=null;
  if (v >= 6) {
    cname=THREAD_DUMP_16_CNAME;
  }
 else   if (v == 5) {
    cname=THREAD_DUMP_15_CNAME;
  }
 else {
    throw new UnsupportedOperationException("ThreadDumpGenerator can not run on JVM version: " + p);
  }
  String pkg=ThreadDumpGenerator.class.getPackage().getName();
  String className=pkg + "." + cname;
  Class clazz=ThreadDumpGenerator.class.getClassLoader().loadClass(className);
  Constructor<ThreadDumpGenerator> cons=clazz.getConstructor(TYPE);
  return cons.newInstance(bean);
}
