{
  final Collection allServices=nodeService.getServices();
  final LinkedList<MembershipAwareService> services=new LinkedList<MembershipAwareService>();
  for (  Object service : allServices) {
    if (service instanceof MembershipAwareService) {
      if (service instanceof CoreService) {
        services.addFirst((MembershipAwareService)service);
      }
 else {
        services.addLast((MembershipAwareService)service);
      }
    }
  }
  return services;
}
