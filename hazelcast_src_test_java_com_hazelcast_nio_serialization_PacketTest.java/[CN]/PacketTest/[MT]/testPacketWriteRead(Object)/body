{
  SerializationService ss=createSerializationServiceBuilder().build();
  Data data1=ss.toData(object);
  ByteBuffer buffer=ByteBuffer.allocate(Packet.getDataSize(data1,ss.getPortableContext()) * 2);
  Packet packet1=new Packet(data1,ss.getPortableContext());
  assertTrue(packet1.writeTo(buffer));
  buffer.flip();
  SerializationService ss2=createSerializationServiceBuilder().build();
  Packet packet2=new Packet(ss2.getPortableContext());
  assertTrue(packet2.readFrom(buffer));
  Data data2=packet2.getData();
  Object object2=ss2.toObject(data2);
  assertEquals(data1,data2);
  assertEquals(object,object2);
}
