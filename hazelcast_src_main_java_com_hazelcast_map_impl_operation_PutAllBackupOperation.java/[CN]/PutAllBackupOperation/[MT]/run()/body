{
  int partitionId=getPartitionId();
  MapServiceContext mapServiceContext=mapService.getMapServiceContext();
  MapEventPublisher eventPublisher=mapServiceContext.getMapEventPublisher();
  recordStore=mapServiceContext.getRecordStore(partitionId,name);
  boolean wanEnabled=mapContainer.isWanReplicationEnabled();
  for (int i=0; i < entries.size(); i++) {
    final RecordInfo recordInfo=recordInfos.get(i);
    final Map.Entry<Data,Data> entry=entries.get(i);
    final Record record=recordStore.putBackup(entry.getKey(),entry.getValue());
    Records.applyRecordInfo(record,recordInfo);
    if (wanEnabled) {
      final Data dataValueAsData=mapServiceContext.toData(entry.getValue());
      final EntryView entryView=EntryViews.createSimpleEntryView(entry.getKey(),dataValueAsData,record);
      eventPublisher.publishWanReplicationUpdateBackup(name,entryView);
    }
    recordStore.evictEntries();
  }
}
