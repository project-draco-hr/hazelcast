{
  long address=0;
  try {
    address=allocateMemory(16);
    long accessAddress=aligned ? address : address + 1;
    memoryAccessor.putInt(accessAddress,1);
    assertEquals(1,memoryAccessor.getInt(accessAddress));
    memoryAccessor.putIntVolatile(null,accessAddress,2);
    assertEquals(2,memoryAccessor.getIntVolatile(null,accessAddress));
    SampleObject obj=new SampleObject();
    memoryAccessor.putInt(obj,SampleObject.INT_VALUE_OFFSET,3);
    assertEquals(3,memoryAccessor.getInt(obj,SampleObject.INT_VALUE_OFFSET));
    memoryAccessor.putIntVolatile(obj,SampleObject.INT_VALUE_OFFSET,4);
    assertEquals(4,memoryAccessor.getIntVolatile(obj,SampleObject.INT_VALUE_OFFSET));
  }
  finally {
    if (address != 0) {
      freeMemory(address);
    }
  }
}
