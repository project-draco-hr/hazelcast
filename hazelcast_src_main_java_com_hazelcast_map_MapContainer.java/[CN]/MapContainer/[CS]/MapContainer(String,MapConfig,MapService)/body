{
  super(mapConfig);
  this.name=name;
  this.mapService=mapService;
  this.partitioningStrategy=createPartitioningStrategy();
  final NodeEngine nodeEngine=mapService.getNodeEngine();
  recordFactory=createRecordFactory(nodeEngine);
  initMapStoreOperations(nodeEngine);
  initWanReplication(nodeEngine);
  interceptors=new CopyOnWriteArrayList<MapInterceptor>();
  interceptorMap=new ConcurrentHashMap<String,MapInterceptor>();
  nearCacheEnabled=mapConfig.getNearCacheConfig() != null;
  nearCacheSizeEstimator=SizeEstimators.createNearCacheSizeEstimator();
  mapStoreManager=createMapStoreManager(this);
  mapStoreManager.start();
}
