{
  OutOfMemoryError oome=new OutOfMemoryError();
  HazelcastInstance hz=mock(HazelcastInstance.class);
  OutOfMemoryErrorDispatcher.registerServer(hz);
  OutOfMemoryHandler handler=spy(new DefaultOutOfMemoryHandler());
  when(handler.shouldHandle(oome)).thenCallRealMethod();
  OutOfMemoryErrorDispatcher.setServerHandler(handler);
  OutOfMemoryErrorDispatcher.onOutOfMemory(oome);
  verify(handler,never()).onOutOfMemory(oome,new HazelcastInstance[]{hz});
}
