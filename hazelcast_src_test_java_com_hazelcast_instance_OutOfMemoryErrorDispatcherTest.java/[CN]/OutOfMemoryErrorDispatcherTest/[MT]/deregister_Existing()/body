{
  HazelcastInstance hz1=mock(HazelcastInstance.class);
  HazelcastInstance hz2=mock(HazelcastInstance.class);
  HazelcastInstance hz3=mock(HazelcastInstance.class);
  OutOfMemoryErrorDispatcher.register(hz1);
  OutOfMemoryErrorDispatcher.register(hz2);
  OutOfMemoryErrorDispatcher.register(hz3);
  OutOfMemoryErrorDispatcher.deregister(hz2);
  assertArrayEquals(new HazelcastInstance[]{hz1,hz3},OutOfMemoryErrorDispatcher.current());
  OutOfMemoryErrorDispatcher.deregister(hz1);
  assertArrayEquals(new HazelcastInstance[]{hz3},OutOfMemoryErrorDispatcher.current());
  OutOfMemoryErrorDispatcher.deregister(hz3);
  assertArrayEquals(new HazelcastInstance[]{},OutOfMemoryErrorDispatcher.current());
}
