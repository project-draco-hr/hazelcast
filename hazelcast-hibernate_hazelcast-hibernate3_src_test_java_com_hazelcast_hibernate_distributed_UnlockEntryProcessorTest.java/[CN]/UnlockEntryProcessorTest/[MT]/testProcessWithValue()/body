{
  Map.Entry<Object,Expirable> entry=mockEntry(new Value(null,100L,"some-value"));
  UnlockEntryProcessor processor=new UnlockEntryProcessor(new ExpiryMarker(null,100L,"other-marker-id"),"next-marker-id",150L);
  ArgumentCaptor<Expirable> captor=ArgumentCaptor.forClass(Expirable.class);
  processor.process(entry);
  verify(entry).setValue(captor.capture());
  Expirable result=captor.getValue();
  assertThat(result,instanceOf(ExpiryMarker.class));
  ExpiryMarker marker=(ExpiryMarker)result;
  assertFalse("market must be expirable after timestamp",marker.isReplaceableBy(150L,null,null));
  assertTrue("market must be expirable after timestamp",marker.isReplaceableBy(151L,null,null));
}
