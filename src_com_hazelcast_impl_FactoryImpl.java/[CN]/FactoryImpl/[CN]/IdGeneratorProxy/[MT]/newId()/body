{
  long billionNow=billion.get();
  long idAddition=currentId.incrementAndGet();
  if (idAddition >= BILLION) {
synchronized (this) {
      try {
        billionNow=billion.get();
        idAddition=currentId.incrementAndGet();
        if (idAddition >= BILLION) {
          Long idBillion=getNewBillion();
          long newBillion=idBillion.longValue() * BILLION;
          billion.set(newBillion);
          currentId.set(0);
        }
        billionNow=billion.get();
        idAddition=currentId.incrementAndGet();
      }
 catch (      Throwable t) {
        t.printStackTrace();
      }
    }
  }
  long result=billionNow + idAddition;
  return result;
}
