{
  TestHazelcastInstanceFactory factory=createHazelcastInstanceFactory(1);
  HazelcastInstance hz=factory.newHazelcastInstance(new Config());
  final ILock lock=hz.getLock("lock");
  lock.lock();
  assertTrue(lock.isLockedByCurrentThread());
  final CountDownLatch latch=new CountDownLatch(1);
  Thread thread=new OpThread(latch){
    protected void doOp() throws InterruptedException {
      assertTrue(lock.tryLock(1,TimeUnit.MINUTES));
    }
  }
;
  thread.start();
  Thread.sleep(5000);
  thread.interrupt();
  lock.unlock();
  assertTrue(latch.await(1,TimeUnit.MINUTES));
}
