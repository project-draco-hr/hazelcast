{
  TestHazelcastInstanceFactory factory=createHazelcastInstanceFactory(1);
  HazelcastInstance hz=factory.newHazelcastInstance(new Config());
  final IQueue<Object> q=hz.getQueue("queue");
  final AtomicBoolean interruptedFlag=new AtomicBoolean(false);
  final CountDownLatch latch=new CountDownLatch(1);
  Thread thread=new OpThread(interruptedFlag,latch){
    protected void doOp(){
      try {
        Object item=q.poll(1,TimeUnit.MINUTES);
        assertNotNull(item);
      }
 catch (      InterruptedException e) {
        fail();
      }
    }
  }
;
  thread.start();
  Thread.sleep(5000);
  thread.interrupt();
  q.offer("new item!");
  assertTrue(latch.await(30,TimeUnit.SECONDS));
  assertTrue(interruptedFlag.get());
}
