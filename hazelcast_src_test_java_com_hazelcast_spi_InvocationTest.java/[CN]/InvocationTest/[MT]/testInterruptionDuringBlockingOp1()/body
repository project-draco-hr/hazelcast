{
  TestHazelcastInstanceFactory factory=createHazelcastInstanceFactory(1);
  HazelcastInstance hz=factory.newHazelcastInstance(new Config());
  final IQueue<Object> q=hz.getQueue("queue");
  final CountDownLatch latch=new CountDownLatch(1);
  Thread thread=new OpThread(latch){
    protected void doOp() throws InterruptedException {
      q.poll(1,TimeUnit.MINUTES);
    }
  }
;
  thread.start();
  Thread.sleep(5000);
  thread.interrupt();
  q.offer("new item!");
  assertTrue(latch.await(1,TimeUnit.MINUTES));
}
