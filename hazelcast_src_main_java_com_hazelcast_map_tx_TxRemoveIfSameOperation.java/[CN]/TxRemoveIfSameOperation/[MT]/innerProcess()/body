{
  TransactionItem transactionItem=partitionContainer.getTransactionItem(new TransactionKey(getTransactionId(),name,dataKey));
  if (transactionItem != null && !transactionItem.isRemoved()) {
    successful=mapService.compare(name,transactionItem.getValue(),testValue);
  }
 else {
    Object value=recordStore.get(dataKey);
    successful=mapService.compare(name,testValue,value);
  }
  if (successful) {
    partitionContainer.addTransactionItem(new TransactionItem(getTransactionId(),name,getKey(),getValue(),true));
  }
}
