{
  doInRestoredThreadContext(xid,new Action(){
    public void run(    Transaction tx){
      if (tx != null) {
        managedConnection.log(Level.FINEST,"XA commit: " + xid);
        tx.commit();
      }
 else {
        managedConnection.log(Level.WARNING,"XA commit: No active transaction anymore" + xid);
      }
    }
  }
);
}
