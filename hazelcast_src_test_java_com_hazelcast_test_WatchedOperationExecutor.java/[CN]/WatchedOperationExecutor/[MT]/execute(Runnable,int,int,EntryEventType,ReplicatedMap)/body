{
  final String[] registrationIds=new String[latches];
  final CountDownLatch latch=new CountDownLatch(latches);
  final WatcherListener listener=new WatcherListener(latch,eventType);
  for (int i=0; i < replicatedMaps.length; i++) {
    ReplicatedMap replicatedMap=replicatedMaps[i];
    registrationIds[i]=replicatedMap.addEntryListener(listener);
  }
  try {
    runnable.run();
    latch.await(seconds,TimeUnit.SECONDS);
  }
 catch (  InterruptedException e) {
    throw new RuntimeException(e);
  }
 finally {
    for (int i=0; i < replicatedMaps.length; i++) {
      ReplicatedMap replicatedMap=replicatedMaps[i];
      replicatedMap.removeEntryListener(registrationIds[i]);
    }
  }
}
