{
  HazelcastConnection c=getConnection();
  LocalTransaction lt=c.getLocalTransaction();
  lt.begin();
  try {
    TransactionalMap<String,String> m=c.getTransactionalMap("testTransactionCommit");
    m.put("key","value");
    doSql();
    assertEquals("value",m.get("key"));
  }
  finally {
    c.close();
  }
  lt.commit();
  HazelcastConnection con2=getConnection();
  try {
    assertEquals("value",con2.getMap("testTransactionCommit").get("key"));
  }
  finally {
    con2.close();
  }
}
