{
  final ClientAwsConfig awsConfig=client.getClientConfig().getNetworkConfig().getAwsConfig();
  final Collection<AddressProvider> addressProvider=new LinkedList<AddressProvider>();
  addressProvider.add(new DefaultAddressProvider(getClientConfig().getNetworkConfig()));
  if (awsConfig != null && awsConfig.isEnabled()) {
    try {
      addressProvider.add(new AwsAddressProvider(awsConfig));
    }
 catch (    NoClassDefFoundError e) {
      LOGGER.log(Level.WARNING,"hazelcast-cloud.jar might be missing!");
      throw e;
    }
  }
  return new ClusterListenerThread(client.getThreadGroup(),client.getName() + ".cluster-listener",addressProvider);
}
