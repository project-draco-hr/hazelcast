{
  ConcurrentMap<Integer,ClientCallFuture> eventHandlerMap=connectionEventHandlerMap.get(connection);
  if (eventHandlerMap == null) {
    eventHandlerMap=new ConcurrentHashMap<Integer,ClientCallFuture>();
    final ConcurrentMap<Integer,ClientCallFuture> current=connectionEventHandlerMap.putIfAbsent(connection,eventHandlerMap);
    if (current != null) {
      eventHandlerMap=current;
    }
  }
  eventHandlerMap.put(future.getRequest().getCallId(),future);
}
