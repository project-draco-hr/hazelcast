{
  final SerializationService serializationService=getSerializationService();
  while (!Thread.currentThread().isInterrupted()) {
    final Data eventData=conn.read();
    final ClientMembershipEvent event=(ClientMembershipEvent)serializationService.toObject(eventData);
    final MemberImpl member=(MemberImpl)event.getMember();
    if (event.getEventType() == MembershipEvent.MEMBER_ADDED) {
      members.add(member);
    }
 else {
      members.remove(member);
      getConnectionManager().removeConnectionPool(member.getAddress());
    }
    updateMembersRef();
    logger.info(membersString());
    fireMembershipEvent(new MembershipEvent(client.getCluster(),member,event.getEventType(),Collections.unmodifiableSet(new LinkedHashSet<Member>(members))));
  }
}
