{
  if (isStackTraceLoggingEnabled) {
    if (totalInvocations == 1) {
      logger.warning(format("Slow operation detected: %s%n%s",log.operation,log.stackTrace));
      return;
    }
    logger.warning(format("Slow operation detected: %s (%d invocations)%n%s",log.operation,totalInvocations,(totalInvocations % FULL_LOG_FREQUENCY == 0) ? log.stackTrace : log.shortStackTrace));
    return;
  }
  if (totalInvocations == 1) {
    logger.warning(format("Slow operation detected: %s",log.operation));
    return;
  }
  logger.warning(format("Slow operation detected: %s (%d invocations)",log.operation,totalInvocations));
}
