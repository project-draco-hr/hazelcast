{
  checkTransactionState();
  SizeOperation operation=new SizeOperation(name);
  try {
    Invocation invocation=getNodeEngine().getOperationService().createInvocationBuilder(QueueService.SERVICE_NAME,operation,partitionId).build();
    Future<Integer> f=invocation.invoke();
    Integer size=f.get();
    return size + offeredQueue.size();
  }
 catch (  Throwable t) {
    throw ExceptionUtil.rethrow(t);
  }
}
