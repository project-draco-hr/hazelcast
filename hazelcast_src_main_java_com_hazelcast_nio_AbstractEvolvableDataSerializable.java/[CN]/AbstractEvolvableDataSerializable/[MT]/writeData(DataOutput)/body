{
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  DataOutputStream dos=new DataOutputStream(baos);
  writeKnownData(dos);
  dos.close();
  baos.close();
  byte[] knownData=baos.toByteArray();
  int futureSize=futureData == null ? 0 : futureData.length;
  out.writeInt(knownData.length + futureSize);
  out.write(knownData);
  if (futureData != null)   out.write(futureData);
}
