{
  List<String> unmatchAddresses=new LinkedList<String>();
  for (  InternalPartition partition : partitions) {
    ShortPartitionInfo partitionInfo=new ShortPartitionInfo(partition.getPartitionId());
    for (int index=0; index < InternalPartition.MAX_REPLICA_COUNT; index++) {
      Address address=partition.getReplicaAddress(index);
      if (address == null) {
        partitionInfo.addressIndexes[index]=-1;
      }
 else {
        Integer knownIndex=addressIndexes.get(address);
        if (knownIndex == null && index == 0) {
          unmatchAddresses.add(address + " -> " + partition);
        }
        if (knownIndex == null) {
          partitionInfo.addressIndexes[index]=-1;
        }
 else {
          partitionInfo.addressIndexes[index]=knownIndex;
        }
      }
    }
    partitionInfos.add(partitionInfo);
  }
  if (logger.isFineEnabled() && !unmatchAddresses.isEmpty()) {
    logger.fine("Unknown owner addresses in partition state! " + "(Probably they have recently joined to or left the cluster.) " + unmatchAddresses);
  }
}
