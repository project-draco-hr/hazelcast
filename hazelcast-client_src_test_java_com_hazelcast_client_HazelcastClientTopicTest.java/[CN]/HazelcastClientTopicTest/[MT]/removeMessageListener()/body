{
  HazelcastClient hClient=getHazelcastClient();
  ITopic<String> topic=hClient.getTopic("removeMessageListener");
  final CountDownLatch latch=new CountDownLatch(2);
  final CountDownLatch cp=new CountDownLatch(1);
  final String message="Hazelcast Rocks!";
  MessageListener<String> messageListener=new MessageListener<String>(){
    public void onMessage(    String msg){
      if (msg.startsWith(message)) {
        latch.countDown();
        cp.countDown();
      }
    }
  }
;
  topic.addMessageListener(messageListener);
  topic.publish(message + "1");
  cp.await();
  Thread.sleep(50);
  topic.removeMessageListener(messageListener);
  topic.publish(message + "2");
  assertEquals(1,latch.getCount());
}
