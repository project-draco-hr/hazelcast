{
  V marshalledValue=(V)replicatedRecordStore.marshallValue(update.getValue());
  VectorClockTimestamp timestamp=update.getVectorClockTimestamp();
  int updateHash=update.getUpdateHash();
  long ttlMillis=update.getTtlMillis();
  storage.put(marshalledKey,new ReplicatedRecord<K,V>(marshalledKey,marshalledValue,timestamp,updateHash,ttlMillis));
  if (ttlMillis > 0) {
    replicatedRecordStore.scheduleTtlEntry(ttlMillis,marshalledKey,marshalledValue);
  }
 else {
    replicatedRecordStore.cancelTtlEntry(marshalledKey);
  }
  replicatedRecordStore.fireEntryListenerEvent(update.getKey(),null,update.getValue());
}
