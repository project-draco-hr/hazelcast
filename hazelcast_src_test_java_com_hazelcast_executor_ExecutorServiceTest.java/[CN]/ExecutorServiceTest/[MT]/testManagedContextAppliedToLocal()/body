{
  final Config config=new Config();
  config.addExecutorConfig(new ExecutorConfig("test",1));
  config.setManagedContext(new ManagedContext(){
    @Override public Object initialize(    Object obj){
      if (obj instanceof RunnableWithManagedContext) {
        RunnableWithManagedContext task=(RunnableWithManagedContext)obj;
        task.initializeCalled=true;
      }
      return obj;
    }
  }
);
  final HazelcastInstance instance=createHazelcastInstanceFactory(1).newHazelcastInstance(config);
  IExecutorService executor=instance.getExecutorService("test");
  RunnableWithManagedContext task=new RunnableWithManagedContext();
  executor.submit(task).get();
  assertTrue(task.initializeCalled);
}
