{
  long maxCallTimeout=invocationFuture.getMaxCallTimeout();
  long expirationTime=op.getInvocationTime() + maxCallTimeout;
  boolean hasResponse=pendingResponse != null;
  boolean hasWaitingThreads=invocationFuture.getWaitingThreadsCount() > 0;
  boolean notExpired=maxCallTimeout == Long.MAX_VALUE || expirationTime < 0 || expirationTime >= Clock.currentTimeMillis();
  if (hasResponse || hasWaitingThreads || notExpired) {
    return false;
  }
  invocationFuture.set(newOperationTimeoutException(maxCallTimeout));
  return true;
}
