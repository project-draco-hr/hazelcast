{
  final CountDownLatch latch=new CountDownLatch(3);
  final ItemListener listener=new ItemListener(){
    public void itemAdded(    ItemEvent item){
      latch.countDown();
      System.out.println(item);
    }
    public void itemRemoved(    ItemEvent item){
    }
  }
;
class TestTask {
    public void test(    HazelcastInstance hz,    Object value){
      ISet set=hz.getSet("test");
      set.addItemListener(listener,true);
      Transaction tx=hz.getTransaction();
      tx.begin();
      set.add(value);
      tx.commit();
    }
  }
  HazelcastInstance hz1=Hazelcast.newHazelcastInstance(null);
  new TestTask().test(hz1,"test1");
  HazelcastInstance hz2=Hazelcast.newHazelcastInstance(null);
  new TestTask().test(hz2,"test2");
  assertTrue(latch.await(2,TimeUnit.SECONDS));
}
