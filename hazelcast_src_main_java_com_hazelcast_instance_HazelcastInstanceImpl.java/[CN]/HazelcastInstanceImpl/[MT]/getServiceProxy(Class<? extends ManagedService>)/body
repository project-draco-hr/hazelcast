{
  Collection services=node.nodeService.getServices(serviceClass,false);
  for (  Object service : services) {
    if (serviceClass.isAssignableFrom(service.getClass())) {
      return (S)((ManagedService)service).createProxy();
    }
  }
  throw new IllegalArgumentException();
}
