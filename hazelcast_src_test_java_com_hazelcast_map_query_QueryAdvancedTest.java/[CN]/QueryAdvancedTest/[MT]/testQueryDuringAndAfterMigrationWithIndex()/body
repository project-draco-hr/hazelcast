{
  Config cfg=new Config();
  TestHazelcastInstanceFactory nodeFactory=createHazelcastInstanceFactory(4);
  HazelcastInstance h1=nodeFactory.newHazelcastInstance(cfg);
  IMap imap=h1.getMap("employees");
  imap.addIndex("name",false);
  imap.addIndex("age",true);
  imap.addIndex("active",false);
  int size=50000;
  for (int i=0; i < size; i++) {
    imap.put(String.valueOf(i),new Employee("joe" + i,i % 60,((i & 1) == 1),(double)i));
  }
  assertEquals(size,imap.size());
  HazelcastInstance h2=nodeFactory.newHazelcastInstance(cfg);
  HazelcastInstance h3=nodeFactory.newHazelcastInstance(cfg);
  HazelcastInstance h4=nodeFactory.newHazelcastInstance(cfg);
  long startNow=Clock.currentTimeMillis();
  while ((Clock.currentTimeMillis() - startNow) < 10000) {
    Collection<Employee> values=imap.values(new SqlPredicate("active and name LIKE 'joe15%'"));
    for (    Employee employee : values) {
      assertTrue(employee.isActive());
    }
    assertEquals(556,values.size());
  }
}
