{
  final Set<? extends Element> elementsAnnotatedWith=env.getElementsAnnotatedWith(GenerateMessageTaskFactory.class);
  if (elementsAnnotatedWith == null || elementsAnnotatedWith.size() == 0) {
    return false;
  }
  boolean isEnterprise=false;
  boolean isJet=false;
  for (  Element element : elementsAnnotatedWith) {
    isEnterprise=element.toString().contains("enterprise");
    if (element.toString().contains("jet")) {
      isJet=true;
    }
    map.put(element.toString(),addAllFromPackage((PackageElement)element));
  }
  String className;
  if (isEnterprise) {
    className="EnterpriseMessageTaskFactoryImpl";
  }
 else   if (isJet) {
    className="JetMessageTaskFactoryImpl";
  }
 else {
    className="MessageTaskFactoryImpl";
  }
  MessageFactoryModel model=new MessageFactoryModel(className,map);
  final String content=generateFromTemplate(messageFactoryTemplate,model);
  saveClass("com.hazelcast.client.impl.protocol",className,content);
  return true;
}
