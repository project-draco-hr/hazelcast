{
  if (!connection.isHeartBeating()) {
    if (request instanceof ClientPingRequest || request instanceof RemoveAllListeners) {
      return true;
    }
    if (logger.isFinestEnabled()) {
      logger.warning("Connection is not heart-beating, won't write request -> " + request);
    }
    return false;
  }
  return true;
}
