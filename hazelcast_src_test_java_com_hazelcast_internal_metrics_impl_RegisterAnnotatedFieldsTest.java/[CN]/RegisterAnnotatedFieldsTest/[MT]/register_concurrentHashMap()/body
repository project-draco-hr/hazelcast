{
  ConcurrentMapField object=new ConcurrentMapField();
  object.field.put("foo","foo");
  object.field.put("bar","bar");
  metricsRegistry.scanAndRegister(object,"foo");
  Gauge gauge=metricsRegistry.getGauge("foo.field");
  assertEquals(object.field.size(),gauge.readLong());
  object.field=null;
  assertEquals(0,gauge.readLong());
}
