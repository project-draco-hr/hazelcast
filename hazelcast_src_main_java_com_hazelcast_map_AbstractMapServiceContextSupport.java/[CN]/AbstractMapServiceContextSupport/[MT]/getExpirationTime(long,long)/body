{
  if (ttl < 0 || now < 0) {
    throw new IllegalArgumentException("ttl and now parameters can not have negative values");
  }
  if (ttl == 0) {
    return Long.MAX_VALUE;
  }
  final long expirationTime=now + ttl;
  if (!((now ^ expirationTime) >= 0)) {
    return Long.MAX_VALUE;
  }
  return expirationTime;
}
