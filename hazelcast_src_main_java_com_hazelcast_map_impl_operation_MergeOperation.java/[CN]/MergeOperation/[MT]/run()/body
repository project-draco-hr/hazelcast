{
  Record oldRecord=recordStore.getRecord(dataKey);
  if (oldRecord != null) {
    dataOldValue=mapService.getMapServiceContext().toData(oldRecord.getValue());
  }
  merged=recordStore.merge(dataKey,mergingEntry,mergePolicy);
  if (merged) {
    Record record=recordStore.getRecord(dataKey);
    if (record != null) {
      MapServiceContext mapServiceContext=mapService.getMapServiceContext();
      dataValue=mapServiceContext.toData(record.getValue());
      mergingValue=mapService.getMapServiceContext().toData(mergingEntry.getValue());
    }
  }
}
