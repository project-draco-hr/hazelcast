{
  final PartitionContainer container=partitionContainers[event.getPartitionId()];
  for (  PartitionRecordStore recordStore : container.getMaps().values()) {
    final MapContainer mapContainer=getMapContainer(recordStore.name);
    final IndexService indexService=mapContainer.getIndexService();
    if (indexService.hasIndex()) {
      for (      Record record : recordStore.getRecords().values()) {
        if (event.getMigrationEndpoint() == MigrationEndpoint.SOURCE) {
          indexService.removeEntryIndex(record.getKey());
        }
 else {
          Object value=record.getValue();
          if (value != null) {
            indexService.saveEntryIndex(new QueryEntry(getSerializationService(),record.getKey(),record.getKey(),value));
          }
        }
      }
    }
  }
}
