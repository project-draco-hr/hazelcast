{
  final long nowInNanos=System.nanoTime();
  MapContainer mapContainer=getMapContainer(name);
  Record record=mapContainer.getRecordFactory().newRecord(dataKey,value);
  record.setCreationTime(nowInNanos);
  record.setLastAccessTime(nowInNanos);
  record.setLastUpdatedTime(nowInNanos);
  final int timeToLiveSeconds=mapContainer.getMapConfig().getTimeToLiveSeconds();
  if (ttl < 0L && timeToLiveSeconds > 0) {
    record.setTtl(TimeUnit.SECONDS.toNanos(timeToLiveSeconds));
  }
 else   if (ttl > 0L) {
    record.setTtl(TimeUnit.MILLISECONDS.toNanos(ttl));
  }
  return record;
}
