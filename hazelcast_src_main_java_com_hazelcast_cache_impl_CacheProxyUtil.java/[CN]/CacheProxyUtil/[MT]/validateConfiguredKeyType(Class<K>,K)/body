{
  if (Object.class != keyType) {
    if (!keyType.isAssignableFrom(key.getClass())) {
      throw new ClassCastException("Key " + key + "is not assignable to "+ keyType);
    }
  }
}
