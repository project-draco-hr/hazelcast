{
  Block[] blocks=new Block[blockCount];
  int remainingBlocksToDistribute=271;
  int memberIndex=0;
  while (remainingBlocksToDistribute != 0) {
    int blocksDistributedSoFar=blockCount - remainingBlocksToDistribute;
    int blocksToDistribute=Math.min((int)(Math.random() * blockCount / members.size() * 2),remainingBlocksToDistribute);
    for (int i=blocksDistributedSoFar; i < blocksDistributedSoFar + blocksToDistribute; i++) {
      Block block=new Block(i,members.get(memberIndex).getAddress());
      blocks[i]=block;
    }
    memberIndex++;
    if (memberIndex == members.size()) {
      memberIndex=0;
    }
    remainingBlocksToDistribute=remainingBlocksToDistribute - blocksToDistribute;
  }
  return blocks;
}
