{
  CookieStore cookieStore=new BasicCookieStore();
  executeRequest("setAttribute?key=value&key2=value2&key2=value22",serverPort1,cookieStore);
  IMap<Object,Object> map=hz.getMap(DEFAULT_MAP_NAME);
  assertEquals(1,map.size());
  SessionState sessionState=(SessionState)map.get(getHazelcastSessionId(cookieStore));
  assertEquals(2,sessionState.getAttributes().size());
  assertEquals("value",executeRequest("read",serverPort1,cookieStore));
  assertEquals("value",executeRequest("read",serverPort2,cookieStore));
  assertEquals(1,map.size());
  assertEquals("value",executeRequest("read",serverPort2,cookieStore));
  assertEquals("true",executeRequest("update",serverPort2,cookieStore));
  assertEquals("value-updated",executeRequest("read",serverPort2,cookieStore));
  assertEquals("value-updated",executeRequest("read",serverPort1,cookieStore));
}
