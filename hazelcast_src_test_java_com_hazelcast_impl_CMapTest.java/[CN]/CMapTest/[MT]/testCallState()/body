{
  Config config=new Config();
  final HazelcastInstance h1=Hazelcast.newHazelcastInstance(config);
  final HazelcastInstance h2=Hazelcast.newHazelcastInstance(config);
  final Node node1=getNode(h1);
  final Node node2=getNode(h2);
  Thread.sleep(100);
  final CountDownLatch latch=new CountDownLatch(1);
  final IMap imap1=h1.getMap("default");
  new Thread(new Runnable(){
    public void run(){
      imap1.lock("1");
      latch.countDown();
    }
  }
).start();
  latch.await();
  final AtomicInteger threadId=new AtomicInteger();
  new Thread(new Runnable(){
    public void run(){
      ThreadContext.get().setCurrentFactory(node1.factory);
      threadId.set(ThreadContext.get().getThreadId());
      imap1.put("1","value1");
    }
  }
).start();
  Thread.sleep(1000);
  System.out.println(node1.getThisAddress() + " thread " + threadId.get());
  CallState callState1=node1.getSystemLogService().getCallState(node1.getThisAddress(),threadId.get());
  if (callState1 != null) {
    for (    Object callStateLog : callState1.getLogs()) {
      System.out.println(callStateLog);
    }
  }
  CallState callState2=node2.getSystemLogService().getCallState(node1.getThisAddress(),threadId.get());
  System.out.println("========================");
  if (callState2 != null) {
    for (    Object callStateLog : callState2.getLogs()) {
      System.out.println(callStateLog);
    }
  }
}
