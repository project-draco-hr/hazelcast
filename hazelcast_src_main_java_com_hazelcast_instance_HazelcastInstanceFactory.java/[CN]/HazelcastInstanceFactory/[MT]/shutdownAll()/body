{
  final List<HazelcastInstanceProxy> instances=new ArrayList<HazelcastInstanceProxy>(INSTANCE_MAP.values());
  INSTANCE_MAP.clear();
  OutOfMemoryErrorDispatcher.clear();
  ManagementService.shutdownAll();
  Collections.sort(instances,new Comparator<HazelcastInstanceProxy>(){
    public int compare(    HazelcastInstanceProxy o1,    HazelcastInstanceProxy o2){
      return o1.getName().compareTo(o2.getName());
    }
  }
);
  for (  HazelcastInstanceProxy proxy : instances) {
    proxy.getLifecycleService().shutdown();
    proxy.original=null;
  }
}
