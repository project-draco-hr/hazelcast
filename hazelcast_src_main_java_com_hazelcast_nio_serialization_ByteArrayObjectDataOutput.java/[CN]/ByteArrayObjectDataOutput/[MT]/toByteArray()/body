{
  if (buffer == null || pos == 0) {
    return new byte[0];
  }
  final byte[] newBuffer=new byte[pos];
  System.arraycopy(buffer,0,newBuffer,0,pos);
  return newBuffer;
}
