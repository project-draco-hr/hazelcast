{
  if (length < 0) {
    throw new NegativeArraySizeException("Source length is negative: " + length);
  }
  int remaining=indexScale * length;
  long offset=srcOffset;
  ensureAvailable(remaining);
  while (remaining > 0) {
    int chunk=(remaining > UnsafeHelper.MEM_COPY_THRESHOLD) ? UnsafeHelper.MEM_COPY_THRESHOLD : remaining;
    UnsafeHelper.UNSAFE.copyMemory(src,offset,buffer,UnsafeHelper.BYTE_ARRAY_BASE_OFFSET + pos,chunk);
    remaining-=chunk;
    offset+=chunk;
    pos+=chunk;
  }
}
