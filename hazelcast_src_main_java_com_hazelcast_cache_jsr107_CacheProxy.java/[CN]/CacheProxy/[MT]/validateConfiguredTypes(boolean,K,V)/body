{
  final Class keyType=cacheConfig.getKeyType();
  final Class valueType=cacheConfig.getValueType();
  if (Object.class != keyType) {
    if (!keyType.isAssignableFrom(key.getClass())) {
      throw new ClassCastException("Key " + key + "is not assignable to "+ keyType);
    }
  }
  if (validateValues) {
    for (    V value : values) {
      if (Object.class != valueType) {
        if (!valueType.isAssignableFrom(value.getClass())) {
          throw new ClassCastException("Value " + value + "is not assignable to "+ valueType);
        }
      }
    }
  }
}
