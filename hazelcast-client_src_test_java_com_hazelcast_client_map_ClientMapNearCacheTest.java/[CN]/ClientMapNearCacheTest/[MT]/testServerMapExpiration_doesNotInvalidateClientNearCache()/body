{
  String mapName=randomMapName(NEAR_CACHE_WITH_LONG_MAX_IDLE_TIME);
  IMap<Integer,Integer> serverMap=server.getMap(mapName);
  final CountDownLatch expiredEventLatch=new CountDownLatch(1);
  EntryExpiredListener listener=new EntryExpiredListener(){
    @Override public void entryExpired(    EntryEvent event){
      expiredEventLatch.countDown();
    }
  }
;
  serverMap.addEntryListener(listener,false);
  serverMap.put(1,23,6,TimeUnit.SECONDS);
  assertNotNull(serverMap.get(1));
  HazelcastInstance newClient=hazelcastFactory.newHazelcastClient(clientConfig);
  IMap<Integer,Integer> clientMap=newClient.getMap(mapName);
  assertNotNull(clientMap.get(1));
  assertThatOwnedEntryCountEquals(clientMap,1);
  assertOpenEventually(expiredEventLatch);
  assertNull(serverMap.get(1));
  assertNotNull(clientMap.get(1));
  assertThatOwnedEntryCountEquals(clientMap,1);
}
