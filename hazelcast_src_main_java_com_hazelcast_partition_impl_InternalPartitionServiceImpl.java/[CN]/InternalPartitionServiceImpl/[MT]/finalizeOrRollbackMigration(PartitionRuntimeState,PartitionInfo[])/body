{
  Collection<MigrationInfo> completedMigrations=partitionState.getCompletedMigrations();
  for (  MigrationInfo completedMigration : completedMigrations) {
    addCompletedMigration(completedMigration);
    finalizeActiveMigration(completedMigration);
  }
  if (!activeMigrations.isEmpty()) {
    final MemberImpl masterMember=getMasterMember();
    rollbackActiveMigrationsFromPreviousMaster(masterMember.getUuid());
  }
  allocateReplicas(state);
}
