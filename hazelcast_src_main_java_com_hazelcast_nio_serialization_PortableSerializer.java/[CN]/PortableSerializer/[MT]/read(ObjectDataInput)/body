{
  final ContextAwareDataInput ctxIn=(ContextAwareDataInput)in;
  final int dataClassId=ctxIn.getDataClassId();
  final int dataVersion=ctxIn.getDataVersion();
  final Portable p=context.createPortable(dataClassId);
  final PortableReader reader;
  final ClassDefinitionImpl cd;
  if (context.getVersion() == dataVersion) {
    cd=context.lookup(dataClassId);
    reader=new DefaultPortableReader(this,(BufferObjectDataInput)in,cd);
  }
 else {
    cd=context.lookup(dataClassId,dataVersion);
    reader=new MorphingPortableReader(this,(BufferObjectDataInput)in,cd);
  }
  p.readPortable(reader);
  return p;
}
