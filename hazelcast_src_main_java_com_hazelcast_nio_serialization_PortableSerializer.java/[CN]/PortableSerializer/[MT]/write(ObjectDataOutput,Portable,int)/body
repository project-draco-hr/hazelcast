{
  if (!(out instanceof BufferObjectDataOutput)) {
    throw new IllegalArgumentException("ObjectDataOutput must be instance of BufferObjectDataOutput!");
  }
  if (classId == 0) {
    throw new IllegalArgumentException("Portable class id cannot be zero!");
  }
  ClassDefinition cd=getClassDefinition(p,classId);
  PortableWriter writer=new DefaultPortableWriter(this,(BufferObjectDataOutput)out,cd);
  p.writePortable(writer);
}
