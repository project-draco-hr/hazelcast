{
  if (!(in instanceof BufferObjectDataInput)) {
    throw new IllegalArgumentException("ObjectDataInput must be instance of BufferObjectDataInput!");
  }
  Portable portable=createNewPortableInstance(factoryId,classId);
  int portableVersion=findPortableVersion(factoryId,classId,portable);
  DefaultPortableReader reader=createReader((BufferObjectDataInput)in,factoryId,classId,version,portableVersion);
  portable.readPortable(reader);
  reader.end();
  return portable;
}
