{
  TransactionItem transactionItem=partitionContainer.getTransactionItem(new TransactionKey(getTransactionId(),name,dataKey));
  absent=!recordStore.containsKey(dataKey) && (transactionItem == null || transactionItem.isRemoved());
  if (absent) {
    partitionContainer.addTransactionItem(new TransactionItem(getTransactionId(),name,getKey(),getValue(),false));
  }
 else   if (transactionItem != null && !transactionItem.isRemoved()) {
    dataOldValue=transactionItem.getValue();
  }
 else {
    dataOldValue=(Data)recordStore.get(dataKey);
  }
}
