{
  Config config=setupMap(getInstanceConfigurator());
  setupIndexes(config,query);
  setupInstance(config);
  if (expected.throwable != null) {
    this.expected.expect(expected.throwable);
  }
  putTestDataToMap(input.objects);
  Collection<?> values=map.values(query.predicate);
  if (expected.throwable == null) {
    assertThat(values,hasSize(expected.objects.length));
    if (expected.objects.length > 0) {
      assertThat(values,containsInAnyOrder(expected.objects));
    }
  }
}
