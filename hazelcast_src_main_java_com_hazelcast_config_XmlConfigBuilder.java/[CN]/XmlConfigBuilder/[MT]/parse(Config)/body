{
  this.config=config;
  final DocumentBuilder builder=DocumentBuilderFactory.newInstance().newDocumentBuilder();
  Document doc;
  try {
    doc=builder.parse(in);
  }
 catch (  final Exception e) {
    String msgPart="config file '" + config.getConfigurationFile() + "' set as a system property.";
    if (!usingSystemConfig) {
      msgPart="hazelcast-default.xml config file in the classpath.";
    }
    String msg="Having problem parsing the " + msgPart;
    msg+="\nException: " + e.getMessage();
    msg+="\nHazelcast will start with default configuration.";
    logger.log(Level.WARNING,msg);
    return;
  }
 finally {
    IOUtil.closeResource(in);
  }
  Element element=doc.getDocumentElement();
  try {
    element.getTextContent();
  }
 catch (  final Throwable e) {
    domLevel3=false;
  }
  handleConfig(element);
}
