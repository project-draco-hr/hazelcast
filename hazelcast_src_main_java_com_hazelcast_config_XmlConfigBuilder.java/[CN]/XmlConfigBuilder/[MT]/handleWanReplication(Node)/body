{
  final Node attName=node.getAttributes().getNamedItem("name");
  final String name=getTextContent(attName);
  final Node attSnapshotEnabled=node.getAttributes().getNamedItem("snapshot-enabled");
  final boolean snapshotEnabled=getBooleanValue(getTextContent(attSnapshotEnabled));
  final WanReplicationConfig wanReplicationConfig=new WanReplicationConfig();
  wanReplicationConfig.setName(name);
  wanReplicationConfig.setSnapshotEnabled(snapshotEnabled);
  for (  Node nodeTarget : childElements(node)) {
    final String nodeName=cleanNodeName(nodeTarget);
    if ("target-cluster".equals(nodeName)) {
      WanTargetClusterConfig wanTarget=new WanTargetClusterConfig();
      String groupName=getAttribute(nodeTarget,"group-name");
      String groupPassword=getAttribute(nodeTarget,"group-password");
      if (groupName != null) {
        wanTarget.setGroupName(groupName);
      }
      if (groupPassword != null) {
        wanTarget.setGroupPassword(groupPassword);
      }
      for (      Node targetChild : childElements(nodeTarget)) {
        handleWanTargetConfig(wanReplicationConfig,wanTarget,targetChild);
      }
      wanReplicationConfig.addTargetClusterConfig(wanTarget);
    }
  }
  config.addWanReplicationConfig(wanReplicationConfig);
}
