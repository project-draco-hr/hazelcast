{
  final Node attName=node.getAttributes().getNamedItem("name");
  final String name=getTextContent(attName);
  final WanReplicationConfig wanReplicationConfig=new WanReplicationConfig();
  wanReplicationConfig.setName(name);
  for (  org.w3c.dom.Node nodeTarget : new IterableNodeList(node.getChildNodes())) {
    final String nodeName=cleanNodeName(nodeTarget.getNodeName());
    if ("target-cluster".equals(nodeName)) {
      WanTargetClusterConfig wanTarget=new WanTargetClusterConfig();
      String groupName=getAttribute(nodeTarget,"group-name");
      String groupPassword=getAttribute(nodeTarget,"group-password");
      if (groupName != null) {
        wanTarget.setGroupName(groupName);
      }
      if (groupPassword != null) {
        wanTarget.setGroupPassword(groupPassword);
      }
      for (      org.w3c.dom.Node targetChild : new IterableNodeList(nodeTarget.getChildNodes())) {
        final String targetChildName=cleanNodeName(targetChild.getNodeName());
        if ("replication-impl".equals(targetChildName)) {
          wanTarget.setReplicationImpl(getTextContent(targetChild));
        }
 else         if ("end-points".equals(targetChildName)) {
          for (          org.w3c.dom.Node address : new IterableNodeList(targetChild.getChildNodes())) {
            final String addressNodeName=cleanNodeName(address.getNodeName());
            if ("address".equals(addressNodeName)) {
              String addressStr=getTextContent(address);
              wanTarget.addEndpoint(addressStr);
            }
          }
        }
      }
      wanReplicationConfig.addTargetClusterConfig(wanTarget);
    }
  }
  config.addWanReplicationConfig(wanReplicationConfig);
}
