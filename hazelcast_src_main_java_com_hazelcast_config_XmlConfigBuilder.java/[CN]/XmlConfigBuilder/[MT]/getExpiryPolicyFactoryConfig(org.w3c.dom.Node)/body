{
  final String className=getAttribute(node,"class-name");
  if (!StringUtil.isNullOrEmpty(className)) {
    return new ExpiryPolicyFactoryConfig(className);
  }
 else {
    TimedExpiryPolicyFactoryConfig timedExpiryPolicyFactoryConfig=null;
    for (    org.w3c.dom.Node n : new IterableNodeList(node.getChildNodes())) {
      final String nodeName=cleanNodeName(n.getNodeName());
      if ("timed-expiry-policy-factory".equals(nodeName)) {
        timedExpiryPolicyFactoryConfig=getTimedExpiryPolicyFactoryConfig(n);
      }
    }
    if (timedExpiryPolicyFactoryConfig == null) {
      throw new InvalidConfigurationException("One of the \"class-name\" or \"timed-expire-policy-factory\" configuration " + "is needed for expiry policy factory configuration");
    }
 else {
      return new ExpiryPolicyFactoryConfig(timedExpiryPolicyFactoryConfig);
    }
  }
}
