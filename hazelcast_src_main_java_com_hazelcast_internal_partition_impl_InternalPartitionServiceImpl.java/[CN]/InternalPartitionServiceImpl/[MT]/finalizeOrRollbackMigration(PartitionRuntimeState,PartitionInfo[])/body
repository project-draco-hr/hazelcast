{
  Collection<MigrationInfo> completedMigrations=partitionState.getCompletedMigrations();
  for (  MigrationInfo completedMigration : completedMigrations) {
    addCompletedMigration(completedMigration);
    int partitionId=completedMigration.getPartitionId();
    PartitionInfo partitionInfo=state[partitionId];
    updatePartition(partitionInfo);
    finalizeActiveMigration(completedMigration);
  }
  if (!activeMigrations.isEmpty()) {
    final MemberImpl masterMember=getMasterMember();
    rollbackActiveMigrationsFromPreviousMaster(masterMember.getUuid());
  }
  updateAllPartitions(state);
}
