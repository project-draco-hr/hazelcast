{
  migrationQueue.clear();
  for (int k=0; k < replicaSyncRequests.length(); k++) {
    replicaSyncRequests.set(k,null);
  }
  replicaSyncScheduler.cancelAll();
  replicaSyncProcessLock.drainPermits();
  replicaSyncProcessLock.release(maxParallelReplications);
  lock.lock();
  try {
    initialized=false;
    for (    InternalPartitionImpl partition : partitions) {
      partition.reset();
    }
    activeMigrationInfo=null;
    completedMigrations.clear();
    stateVersion.set(0);
  }
  finally {
    lock.unlock();
  }
}
