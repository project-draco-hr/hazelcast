{
  final Integer completionId=registerCompletionLatch(1);
  final Future<V> f=getAndPutAsync(key,value,null);
  try {
    return f.get();
  }
 catch (  Throwable e) {
    throw ExceptionUtil.rethrowAllowedTypeFirst(e,CacheException.class);
  }
 finally {
    deregisterCompletionListener();
  }
}
