{
  IQueue queue=getQueue();
  final AtomicInteger addCounter=new AtomicInteger(0);
  TestListener listener=new TestListener(addCounter);
  String registrationId=queue.addItemListener(listener,false);
  queue.add("item1");
  queue.add("item2");
  assertTrueEventually(new AssertTask(){
    @Override public void run() throws Exception {
      assertEquals(2,addCounter.get());
    }
  }
);
  final SimpleClient client=getClient();
  client.send(new RemoveListenerRequest(queueName));
  boolean result=(Boolean)client.receive();
  assertTrue(result);
  queue.offer("item3");
  assertSizeEventually(3,queue);
  assertNotEquals(3,addCounter.get());
}
