{
  if (stagingArea.isEmpty() || !inEvictableTimeWindow(now)) {
    return;
  }
  final long nextItemsStoreTimeInWriteBehindQueue=getNextItemsStoreTimeInWriteBehindQueue();
  final int size=stagingArea.size();
  final int evictionPercentage=20;
  int maxAllowedIterationCount=getMaxIterationCount(size,evictionPercentage);
  initStagingAreaIterator();
  while (stagingAreaIterator.hasNext()) {
    if (maxAllowedIterationCount <= 0) {
      break;
    }
    --maxAllowedIterationCount;
    final DelayedEntry entry=stagingAreaIterator.next();
    if (entry.getStoreTime() < nextItemsStoreTimeInWriteBehindQueue) {
      stagingAreaIterator.remove();
    }
    initStagingAreaIterator();
    if (!stagingAreaIterator.hasNext()) {
      break;
    }
    lastCleanupTime=now;
  }
}
