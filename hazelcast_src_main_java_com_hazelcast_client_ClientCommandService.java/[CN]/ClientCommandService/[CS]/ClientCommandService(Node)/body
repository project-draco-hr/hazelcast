{
  this.node=node;
  logger=node.getLogger(ClientCommandService.class.getName());
  final String poolNamePrefix=node.getThreadPoolNamePrefix("client");
  executor=new FastExecutor(3,100,1 << 16,250L,poolNamePrefix,new PoolExecutorThreadFactory(node.threadGroup,poolNamePrefix,node.getConfig().getClassLoader()),TimeUnit.SECONDS.toMillis(30),true,false);
  node.getConnectionManager().addConnectionListener(this);
  services=new ConcurrentHashMap<Command,ClientCommandHandler>();
  unknownCommandHandler=new ClientCommandHandler(){
    @Override public Protocol processCall(    Node node,    Protocol protocol){
      return protocol.error(null,"unknown_command");
    }
  }
;
}
