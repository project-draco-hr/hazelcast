{
  ClusterState clusterState=cluster.getClusterState();
  JsonObject jsonObject=new JsonObject();
  shutdownClusterRequest.writeResponse(managementCenterService,jsonObject);
  JsonObject result=(JsonObject)jsonObject.get("result");
  assertEquals(SUCCESS,shutdownClusterRequest.readResponse(result));
  assertTrueEventually(new AssertTask(){
    @Override public void run() throws Exception {
      assertFalse(lifecycleService.isRunning());
    }
  }
);
}
