{
  Config config=new Config();
  final String name="defList";
  final int insCount=2;
  TestHazelcastInstanceFactory factory=createHazelcastInstanceFactory(insCount);
  final HazelcastInstance[] instances=factory.newInstances(config);
  TransactionContext context=instances[0].newTransactionContext();
  assertTrue(instances[1].getList(name).add("value1"));
  try {
    context.beginTransaction();
    TransactionalList l=context.getList(name);
    assertEquals(1,l.size());
    assertTrue(l.add("value1"));
    assertEquals(2,l.size());
    assertFalse(l.remove("value2"));
    assertEquals(2,l.size());
    assertTrue(l.remove("value1"));
    assertEquals(1,l.size());
    context.commitTransaction();
  }
 catch (  Exception e) {
    fail(e.getMessage());
    context.rollbackTransaction();
  }
  assertEquals(1,instances[1].getList(name).size());
}
