{
  try {
    ClassLoader classLoader=node.getConfigClassLoader();
    Iterator<Class<NodeExtension>> iter=ServiceLoader.classIterator(FACTORY_ID,classLoader);
    while (iter.hasNext()) {
      Class<NodeExtension> clazz=iter.next();
      if (!(clazz.equals(DefaultNodeExtension.class))) {
        Constructor<NodeExtension> constructor=clazz.getDeclaredConstructor(new Class[]{Node.class});
        return constructor.newInstance(node);
      }
    }
  }
 catch (  Exception e) {
    throw ExceptionUtil.rethrow(e);
  }
  return new DefaultNodeExtension(node);
}
