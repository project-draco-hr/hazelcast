{
  if (record == null) {
    return null;
  }
  Data key=record.getKey();
  records.remove(key);
  updateSizeEstimator(-calculateHeapCost(record));
  updateSizeEstimator(-calculateHeapCost(key));
  Object oldValue=record.getValue();
  record.invalidate();
  return oldValue;
}
