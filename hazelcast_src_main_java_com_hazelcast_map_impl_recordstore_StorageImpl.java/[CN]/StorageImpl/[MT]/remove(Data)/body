{
  R record=records.remove(key);
  updateSizeEstimator(-calculateHeapCost(record));
  updateSizeEstimator(-calculateHeapCost(key));
  Object oldValue=record.getValue();
  if (record != null) {
    record.invalidate();
  }
  return oldValue;
}
