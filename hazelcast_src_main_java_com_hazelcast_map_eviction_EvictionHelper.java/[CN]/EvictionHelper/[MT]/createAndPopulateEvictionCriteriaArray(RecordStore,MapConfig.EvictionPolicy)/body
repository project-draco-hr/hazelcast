{
  final int size=recordStore.size();
  long[] criterias=null;
  int index=0;
  final Iterator<Record> iterator=recordStore.iterator();
  while (iterator.hasNext()) {
    final Record record=iterator.next();
    if (criterias == null) {
      criterias=new long[size];
    }
    criterias[index]=getEvictionCriteriaValue(record,evictionPolicy);
    index++;
    if (index == size) {
      break;
    }
  }
  if (criterias == null) {
    return null;
  }
  if (index < criterias.length) {
    for (int i=index; i < criterias.length; i++) {
      criterias[i]=Long.MAX_VALUE;
    }
  }
  return criterias;
}
