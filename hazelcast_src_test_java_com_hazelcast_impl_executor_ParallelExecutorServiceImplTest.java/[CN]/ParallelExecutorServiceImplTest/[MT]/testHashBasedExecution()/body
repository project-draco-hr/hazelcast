{
  ParallelExecutor executor=parallelExecutorService.newParallelExecutor(100);
class Counter {
    int count=0;
  }
  final Counter counter=new Counter();
  final int total=100000;
  final CountDownLatch latch=new CountDownLatch(total);
  final AtomicBoolean b=new AtomicBoolean(false);
  for (int i=0; i < total; i++) {
    executor.execute(new Runnable(){
      public void run(){
        counter.count++;
        latch.countDown();
      }
    }
,0);
  }
  latch.await();
  assertEquals(total,counter.count);
}
