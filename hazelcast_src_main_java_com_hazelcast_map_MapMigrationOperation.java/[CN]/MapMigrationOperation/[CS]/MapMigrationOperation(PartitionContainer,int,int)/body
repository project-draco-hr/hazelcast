{
  this.setPartitionId(partitionId).setReplicaIndex(replicaIndex);
  data=new HashMap<String,Map<Data,Record>>(container.maps.size());
  for (  Entry<String,PartitionRecordStore> entry : container.maps.entrySet()) {
    String name=entry.getKey();
    final MapConfig mapConfig=entry.getValue().getMapContainer().getMapConfig();
    if (mapConfig.getTotalBackupCount() < replicaIndex) {
      continue;
    }
    RecordStore recordStore=entry.getValue();
    Map<Data,Record> map=new HashMap<Data,Record>(recordStore.getRecords().size());
    for (    Entry<Data,Record> recordEntry : recordStore.getRecords().entrySet()) {
      map.put(recordEntry.getKey(),recordEntry.getValue());
    }
    data.put(name,map);
  }
  transactionItems=container.transactionItems.values();
}
