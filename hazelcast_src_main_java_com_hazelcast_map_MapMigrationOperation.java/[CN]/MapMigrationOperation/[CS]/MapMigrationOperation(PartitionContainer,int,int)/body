{
  this.setPartitionId(partitionId).setReplicaIndex(replicaIndex);
  data=new HashMap<String,Set<Record>>(container.maps.size());
  for (  Entry<String,PartitionRecordStore> entry : container.maps.entrySet()) {
    String name=entry.getKey();
    final MapConfig mapConfig=entry.getValue().getMapContainer().getMapConfig();
    if (mapConfig.getTotalBackupCount() < replicaIndex) {
      continue;
    }
    RecordStore recordStore=entry.getValue();
    Set<Record> recordSet=new HashSet<Record>(recordStore.getRecords().size());
    for (    Entry<Data,Record> recordEntry : recordStore.getRecords().entrySet()) {
      recordSet.add(recordEntry.getValue());
    }
    data.put(name,recordSet);
  }
  transactionItems=container.transactionItems.values();
}
