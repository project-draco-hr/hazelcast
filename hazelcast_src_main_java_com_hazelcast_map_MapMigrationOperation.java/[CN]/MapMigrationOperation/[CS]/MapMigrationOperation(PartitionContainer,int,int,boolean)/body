{
  this.setPartitionId(partitionId).setReplicaIndex(replicaIndex);
  this.diff=diff;
  data=new HashMap<String,Map<Data,Record>>(container.maps.size());
  for (  Entry<String,DefaultRecordStore> entry : container.maps.entrySet()) {
    String name=entry.getKey();
    final MapConfig mapConfig=entry.getValue().getMapInfo().getMapConfig();
    if (mapConfig.getTotalBackupCount() < replicaIndex) {
      continue;
    }
    DefaultRecordStore recordStore=entry.getValue();
    Map<Data,Record> map=new HashMap<Data,Record>(recordStore.records.size());
    for (    Entry<Data,Record> recordEntry : recordStore.records.entrySet()) {
      map.put(recordEntry.getKey(),recordEntry.getValue());
    }
    data.put(name,map);
  }
}
