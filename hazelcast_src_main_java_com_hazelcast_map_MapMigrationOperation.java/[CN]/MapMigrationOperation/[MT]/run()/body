{
  MapService mapService=(MapService)getService();
  if (data != null) {
    for (    Entry<String,Map<Data,Record>> dataEntry : data.entrySet()) {
      Map<Data,Record> dataMap=dataEntry.getValue();
      final String mapName=dataEntry.getKey();
      RecordStore recordStore=mapService.getRecordStore(getPartitionId(),mapName);
      for (      Entry<Data,Record> entry : dataMap.entrySet()) {
        final Record recordEntry=entry.getValue();
        Record record=mapService.createRecord(mapName,recordEntry.getKey(),recordEntry.getValue(),-1);
        record.setState(recordEntry.getState());
        record.setStats(recordEntry.getStats());
        recordStore.getRecords().put(entry.getKey(),record);
      }
    }
  }
  if (locks != null) {
    for (    Entry<String,Map<Data,LockInfo>> entry : locks.entrySet()) {
      String mapName=entry.getKey();
      RecordStore recordStore=mapService.getRecordStore(getPartitionId(),mapName);
      for (      Entry<Data,LockInfo> lockEntry : entry.getValue().entrySet()) {
        recordStore.putLock(lockEntry.getKey(),lockEntry.getValue());
      }
    }
  }
}
