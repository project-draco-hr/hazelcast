{
  logPromotingPartition();
  try {
    setMissingReplicaVersions();
    PartitionMigrationEvent event=createPartitionMigrationEvent();
    sendToAllMigrationAwareServices(event);
  }
  finally {
    clearPartitionMigratingFlag();
  }
}
