{
  l.lock();
  assertTrue(l.isLocked());
  assertTrue(l.isLockedByCurrentThread());
  assertEquals(1,l.getLockCount());
  l.unlock();
  assertFalse(l.isLocked());
  assertEquals(0,l.getLockCount());
  assertEquals(-1L,l.getRemainingLeaseTime());
  l.lock(1,TimeUnit.MINUTES);
  assertTrue(l.isLocked());
  assertTrue(l.isLockedByCurrentThread());
  assertEquals(1,l.getLockCount());
  assertTrue(l.getRemainingLeaseTime() > 1000 * 30);
  final CountDownLatch latch=new CountDownLatch(1);
  new Thread(){
    public void run(){
      assertTrue(l.isLocked());
      assertFalse(l.isLockedByCurrentThread());
      assertEquals(1,l.getLockCount());
      assertTrue(l.getRemainingLeaseTime() > 1000 * 30);
      latch.countDown();
    }
  }
.start();
  assertTrue(latch.await(1,TimeUnit.MINUTES));
}
