{
  if (!SPAWN_MULTIPLE_THREADS) {
    return 1;
  }
  TestProperties properties=klass.getAnnotation(TestProperties.class);
  if (properties != null) {
    Class<? extends MaxThreadsAware> clazz=properties.maxThreadsCalculatorClass();
    try {
      Constructor c=clazz.getConstructor();
      MaxThreadsAware maxThreadsAware=(MaxThreadsAware)c.newInstance();
      return maxThreadsAware.maxThreads();
    }
 catch (    Throwable e) {
      return MAX_THREADS;
    }
  }
 else {
    return MAX_THREADS;
  }
}
