{
  HazelcastInstance h=Hazelcast.newHazelcastInstance(null);
  com.hazelcast.core.IMap<Object,Object> realMap=h.getMap("default");
  hClient=getHazelcastClient(h);
  final IMap<String,String> map=hClient.getMap("default");
  realMap.clear();
  assertEquals(0,realMap.size());
  final CountDownLatch entryAddLatch=new CountDownLatch(1);
  final CountDownLatch entryUpdatedLatch=new CountDownLatch(1);
  final CountDownLatch entryRemovedLatch=new CountDownLatch(1);
  map.addEntryListener(new EntryListener<String,String>(){
    public void entryAdded(    EntryEvent<String,String> event){
      entryAddLatch.countDown();
      assertEquals("hello",event.getKey());
    }
    public void entryRemoved(    EntryEvent<String,String> event){
      entryRemovedLatch.countDown();
      assertEquals("hello",event.getKey());
      assertEquals("new world",event.getValue());
    }
    public void entryUpdated(    EntryEvent<String,String> event){
      entryUpdatedLatch.countDown();
      assertEquals("new world",event.getValue());
      assertEquals("hello",event.getKey());
    }
    public void entryEvicted(    EntryEvent<String,String> event){
      entryRemoved(event);
    }
  }
,true);
  assertNull(realMap.get("hello"));
  map.put("hello","world");
  map.put("hello","new world");
  assertEquals("new world",map.get("hello"));
  realMap.remove("hello");
  assertTrue(entryAddLatch.await(10,TimeUnit.MILLISECONDS));
  assertTrue(entryUpdatedLatch.await(10,TimeUnit.MILLISECONDS));
  assertTrue(entryRemovedLatch.await(10,TimeUnit.MILLISECONDS));
}
