{
  if (awsConfig == null) {
    throw new IllegalArgumentException("AwsConfig is required!");
  }
  if (awsConfig.getAccessKey() == null && awsConfig.getIamRole() == null) {
    throw new IllegalArgumentException("AWS access key or IAM Role is required!");
  }
  this.awsConfig=awsConfig;
  this.endpoint=endpoint;
  if (awsConfig.getIamRole() != null) {
    getKeysFromIamRole();
  }
  rs=new EC2RequestSigner(awsConfig,timeStamp,endpoint);
  attributes.put("Action",getClass().getSimpleName());
  attributes.put("Version",DOC_VERSION);
  attributes.put("X-Amz-Algorithm",SIGNATURE_METHOD_V4);
  attributes.put("X-Amz-Credential",rs.createFormattedCredential());
  attributes.put("X-Amz-Date",timeStamp);
  attributes.put("X-Amz-SignedHeaders","host");
  attributes.put("X-Amz-Expires","30");
}
