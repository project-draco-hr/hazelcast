{
  if (!awsConfig.getIamRole().equals("DEFAULT")) {
    return;
  }
  try {
    String query="latest/meta-data/iam/security-credentials/";
    URL url;
    url=new URL("http",IAM_ROLE_ENDPOINT,query);
    InputStreamReader is=new InputStreamReader(url.openStream(),"UTF-8");
    BufferedReader reader=new BufferedReader(is);
    awsConfig.setIamRole(reader.readLine());
  }
 catch (  Exception e) {
    throw new InvalidConfigurationException("Invalid Aws Configuration");
  }
}
