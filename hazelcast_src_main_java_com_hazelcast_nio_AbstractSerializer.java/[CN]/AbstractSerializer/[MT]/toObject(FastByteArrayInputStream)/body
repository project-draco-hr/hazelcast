{
  byte typeId=-1;
  try {
    typeId=bis.readByte();
    TypeSerializer ts=(typeId == ds.getTypeId()) ? ds : cs;
    return ts.read(bis);
  }
 catch (  Throwable e) {
    if (e instanceof OutOfMemoryError) {
      final OutOfMemoryError oom=(OutOfMemoryError)e;
      OutOfMemoryErrorDispatcher.onOutOfMemory(oom);
      throw oom;
    }
 else {
      throw new HazelcastSerializationException("Problem when serializing type " + typeId,e);
    }
  }
}
