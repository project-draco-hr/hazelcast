{
  if (className == null) {
    throw new IllegalArgumentException("ClassName cannot be null!");
  }
  if (className.startsWith("com.hazelcast")) {
    return AbstractSerializer.class.getClassLoader().loadClass(className);
  }
  ClassLoader theClassLoader=classLoader;
  if (theClassLoader == null) {
    theClassLoader=Thread.currentThread().getContextClassLoader();
  }
  if (className.startsWith("[L")) {
    return Class.forName(className,true,theClassLoader);
  }
  if (theClassLoader != null) {
    return theClassLoader.loadClass(className);
  }
  return ClassLoader.getSystemClassLoader().loadClass(className);
}
