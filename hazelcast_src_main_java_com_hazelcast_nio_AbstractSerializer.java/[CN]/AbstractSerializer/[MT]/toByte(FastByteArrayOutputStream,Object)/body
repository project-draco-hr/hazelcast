{
  if (object == null) {
    return;
  }
  try {
    TypeSerializer ts=(ds.isSuitable(object)) ? ds : cs;
    bos.writeByte(ts.getTypeId());
    ts.write(bos,object);
    bos.flush();
  }
 catch (  Throwable e) {
    if (e instanceof OutOfMemoryError) {
      final OutOfMemoryError oom=(OutOfMemoryError)e;
      OutOfMemoryErrorDispatcher.onOutOfMemory(oom);
      throw oom;
    }
 else {
      throw new HazelcastSerializationException(e);
    }
  }
}
