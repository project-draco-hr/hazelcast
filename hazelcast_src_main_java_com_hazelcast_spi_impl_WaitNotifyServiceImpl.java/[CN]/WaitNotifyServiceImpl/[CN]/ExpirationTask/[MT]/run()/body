{
  while (true) {
    if (Thread.interrupted()) {
      return;
    }
    try {
      long waitTime=FIRST_WAIT_TIME;
      while (waitTime > 0) {
        long begin=System.currentTimeMillis();
        WaitingOp waitingOp=(WaitingOp)delayQueue.poll(waitTime,TimeUnit.MILLISECONDS);
        if (waitingOp != null) {
          if (waitingOp.isValid()) {
            invalidate(waitingOp);
          }
        }
        long end=System.currentTimeMillis();
        waitTime-=(end - begin);
        if (waitTime > FIRST_WAIT_TIME) {
          waitTime=FIRST_WAIT_TIME;
        }
      }
      for (      Queue<WaitingOp> q : mapWaitingOps.values()) {
        for (        WaitingOp waitingOp : q) {
          if (Thread.interrupted()) {
            return;
          }
          if (waitingOp.isValid()) {
            if (waitingOp.needsInvalidation()) {
              invalidate(waitingOp);
            }
          }
        }
      }
    }
 catch (    InterruptedException e) {
      return;
    }
catch (    Throwable t) {
      logger.warning(t);
    }
  }
}
