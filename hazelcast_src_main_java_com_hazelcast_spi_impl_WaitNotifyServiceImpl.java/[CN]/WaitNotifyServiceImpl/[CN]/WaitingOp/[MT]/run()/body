{
  if (valid) {
    boolean expired=isExpired();
    boolean cancelled=isCancelled();
    if (expired || cancelled) {
      if (queue.remove(this)) {
        valid=false;
        if (expired) {
          waitSupport.onWaitExpire();
        }
 else {
          op.getResponseHandler().sendResponse(error);
        }
      }
    }
  }
}
