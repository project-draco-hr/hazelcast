{
  if (invocations.isEmpty()) {
    return;
  }
  long now=Clock.currentTimeMillis();
  int backupTimeouts=0;
  int invocationTimeouts=0;
  for (  Invocation invocation : invocations.values()) {
    if (shutdown) {
      return;
    }
    detectSlowInvocation(now,invocation);
    if (checkInvocationTimeout(invocation)) {
      invocationTimeouts++;
    }
    if (checkBackupTimeout(invocation)) {
      backupTimeouts++;
    }
  }
  backupTimeoutsCount.inc(backupTimeouts);
  normalTimeoutsCount.inc(invocationTimeouts);
  log(backupTimeouts,invocationTimeouts);
}
