{
  check();
  if (def.getClassId() == Data.NO_CLASS_ID) {
    throw new IllegalArgumentException("Portable class id cannot be zero!");
  }
  fieldDefinitions.add(new FieldDefinitionImpl(index++,fieldName,FieldType.PORTABLE,def.getFactoryId(),def.getClassId()));
  nestedClassDefinitions.add(def);
  return this;
}
