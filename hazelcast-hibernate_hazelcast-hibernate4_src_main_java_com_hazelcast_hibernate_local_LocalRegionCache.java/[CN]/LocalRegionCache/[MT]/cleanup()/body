{
  final int maxSize;
  final long timeToLive;
  if (config != null) {
    maxSize=config.getMaxSizeConfig().getSize();
    timeToLive=config.getTimeToLiveSeconds() * SEC_TO_MS;
  }
 else {
    maxSize=MAX_SIZE;
    timeToLive=CacheEnvironment.getDefaultCacheTimeoutInMillis();
  }
  if ((maxSize > 0 && maxSize != Integer.MAX_VALUE) || timeToLive > 0) {
    SortedSet<EvictionEntry> entries=searchEvictableEntries(maxSize,timeToLive);
    final int diff=cache.size() - maxSize;
    final int k=calculateEvictionRate(diff,maxSize);
    if (k > 0 && entries != null) {
      evictEntries(entries,k);
    }
  }
}
