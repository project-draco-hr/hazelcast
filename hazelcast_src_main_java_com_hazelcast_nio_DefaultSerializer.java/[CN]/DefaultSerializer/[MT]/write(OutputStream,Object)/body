{
  FastByteArrayOutputStream bos=(FastByteArrayOutputStream)os;
  byte typeId=-1;
  for (  TypeSerializer ts : serializers) {
    if (ts.isSuitable(obj)) {
      this.typeSerializer[ts.getTypeId()]=ts;
      typeId=ts.getTypeId();
      break;
    }
  }
  if (typeId == -1) {
    throw new NotSerializableException("There is no suitable serializer for " + obj.getClass().getName());
  }
  bos.writeByte(typeId);
  this.typeSerializer[typeId].write(bos,obj);
}
