{
  Object value=record.getCachedValue();
  if (value == NOT_CACHED) {
    value=record.getValue();
  }
 else   if (value == null) {
    value=record.getValue();
    if (record instanceof CachedDataRecord && value instanceof Data && !((Data)value).isPortable()) {
      value=serializationService.toObject(value);
      record.setCachedValue(value);
    }
  }
  return value;
}
