{
  Object value=record.getCachedValue();
  if (value == NOT_CACHED) {
    value=record.getValue();
  }
 else   if (value == null) {
    value=record.getValue();
    if (shouldCache(record,value)) {
      value=serializationService.toObject(value);
      record.setCachedValue(value);
    }
  }
  return value;
}
