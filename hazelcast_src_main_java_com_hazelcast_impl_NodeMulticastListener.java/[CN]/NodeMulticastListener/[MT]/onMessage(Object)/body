{
  if (msg != null && msg instanceof JoinInfo) {
    JoinInfo joinInfo=(JoinInfo)msg;
    if (node.address != null && !node.address.equals(joinInfo.address)) {
      boolean validJoinRequest;
      try {
        validJoinRequest=node.validateJoinRequest(joinInfo);
      }
 catch (      Exception e) {
        validJoinRequest=false;
      }
      if (validJoinRequest) {
        if (node.isMaster() && node.isActive() && node.joined()) {
          if (joinInfo.isRequest()) {
            node.multicastService.send(joinInfo.copy(false,node.address,node.getClusterImpl().getMembers().size()));
          }
        }
 else {
          if (!node.joined() && !joinInfo.isRequest()) {
            if (node.masterAddress == null) {
              final String masterHost=joinInfo.address.getHost();
              if (trustedInterfaces.isEmpty() || AddressUtil.matchAnyInterface(masterHost,trustedInterfaces)) {
                node.masterAddress=new Address(joinInfo.address);
              }
            }
          }
 else           if (joinInfo.isRequest()) {
            Joiner joiner=node.getJoiner();
            if (joiner instanceof MulticastJoiner) {
              MulticastJoiner mjoiner=(MulticastJoiner)joiner;
              mjoiner.onReceivedJoinInfo(joinInfo);
            }
          }
        }
      }
    }
  }
}
