{
  Q q=getQ(inv.name);
  if (q.blCurrentTake == null) {
    q.setCurrentTake();
  }
  boolean invalid=false;
  if (inv.blockId != q.blCurrentTake.blockId) {
    if (inv.blockId > q.blCurrentTake.blockId) {
      int size=q.lsBlocks.size();
      for (int i=0; i < size; i++) {
        Block block=q.lsBlocks.get(i);
        if (block.blockId == inv.blockId) {
          if (thisAddress.equals(block.address)) {
            q.blCurrentTake=block;
          }
        }
      }
    }
 else {
      invalid=true;
    }
  }
  if ((q.blCurrentTake.size() == 0 && q.blCurrentTake.isFull()) || !thisAddress.equals(q.blCurrentTake.address)) {
    invalid=true;
  }
  if (invalid) {
    sendRedoResponse(inv);
  }
  return (!invalid);
}
