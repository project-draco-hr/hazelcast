{
  if (data == null) {
    getResponseHandler().sendResponse(Boolean.FALSE);
    return;
  }
  NodeService nodeService=getNodeService();
  MapService mapService=(MapService)getService();
  buffer=new HashMap<String,Map<Data,Record>>(data.size());
  for (  Entry<String,Map<Data,DataRecordEntry>> dataEntry : data.entrySet()) {
    Map<Data,DataRecordEntry> dataMap=dataEntry.getValue();
    Map<Data,Record> map=new HashMap<Data,Record>(dataMap.size());
    for (    Entry<Data,DataRecordEntry> entry : dataMap.entrySet()) {
      final DataRecordEntry recordEntry=entry.getValue();
      Record record=new DefaultRecord(null,nodeService.getPartitionId(recordEntry.getKeyData()),recordEntry.getKeyData(),recordEntry.getValueData(),-1,-1,mapService.nextId());
      map.put(entry.getKey(),record);
    }
    buffer.put(dataEntry.getKey(),map);
  }
  getResponseHandler().sendResponse(Boolean.TRUE);
}
