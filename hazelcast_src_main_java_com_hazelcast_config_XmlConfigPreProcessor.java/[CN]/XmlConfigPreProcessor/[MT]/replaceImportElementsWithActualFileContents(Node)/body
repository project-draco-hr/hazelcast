{
  Document document=root.getOwnerDocument();
  NodeList misplacedImports=(NodeList)xpath.evaluate("//" + IMPORT.name + "/parent::*[not(name()=\""+ this.getXmlType().name+ "\")]",document,XPathConstants.NODESET);
  if (misplacedImports.getLength() > 0) {
    throw new IllegalStateException("<import> element can appear only in the top level of the XML");
  }
  NodeList importTags=(NodeList)xpath.evaluate("/" + this.getXmlType().name + "/"+ IMPORT.name,document,XPathConstants.NODESET);
  for (  Node node : new AbstractXmlConfigHelper.IterableNodeList(importTags)) {
    loadAndReplaceImportElement(root,node);
  }
}
