{
  final String mapName=name;
  final MapServiceContext mapServiceContext=getMapServiceContext();
  if (!mapServiceContext.hasRegisteredListener(mapName) || eventType == NO_NEED_TO_FIRE_EVENT) {
    return;
  }
  final Data oldValue=mapServiceContext.toData(valueBeforeProcess);
  final Data value=mapServiceContext.toData(valueAfterProcess);
  final MapEventPublisher mapEventPublisher=mapServiceContext.getMapEventPublisher();
  mapEventPublisher.publishEvent(getCallerAddress(),mapName,eventType,key,oldValue,value);
}
