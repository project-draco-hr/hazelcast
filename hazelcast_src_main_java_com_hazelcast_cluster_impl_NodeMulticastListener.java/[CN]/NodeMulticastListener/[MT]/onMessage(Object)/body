{
  if (!isValidJoinMessage(msg)) {
    logDroppedMessage(msg);
    return;
  }
  JoinMessage joinMessage=(JoinMessage)msg;
  if (node.getState() == NodeState.ACTIVE && node.joined()) {
    handleActiveAndJoined(joinMessage);
  }
 else {
    handleNotActiveOrNotJoined(joinMessage);
  }
}
