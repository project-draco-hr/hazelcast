{
  if (!heartBeating) {
    return;
  }
  final RemoveAllListeners request=new RemoveAllListeners();
  invocationService.invokeOnConnection(request,ClientConnection.this);
  heartBeating=false;
  close();
  final Iterator<ClientCallFuture> iterator=eventHandlerMap.values().iterator();
  final TargetDisconnectedException response=new TargetDisconnectedException(remoteEndpoint);
  while (iterator.hasNext()) {
    final ClientCallFuture future=iterator.next();
    iterator.remove();
    future.notify(response);
  }
}
