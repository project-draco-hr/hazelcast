{
  final Packet packet=new Packet(data,serializationService.getPortableContext());
  final int totalSize=packet.size();
  final int bufferSize=SocketOptions.DEFAULT_BUFFER_SIZE_BYTE;
  final ByteBuffer buffer=ByteBuffer.allocate(totalSize > bufferSize ? bufferSize : totalSize);
  boolean complete=false;
  while (!complete) {
    complete=packet.writeTo(buffer);
    buffer.flip();
    try {
      socketChannelWrapper.write(buffer);
    }
 catch (    Exception e) {
      throw ExceptionUtil.rethrow(e);
    }
    buffer.clear();
  }
}
