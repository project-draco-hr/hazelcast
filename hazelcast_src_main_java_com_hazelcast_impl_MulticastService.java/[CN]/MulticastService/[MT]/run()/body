{
  while (running) {
    try {
      final JoinInfo joinInfo=receive();
      if (joinInfo != null) {
        if (node.address != null && !node.address.equals(joinInfo.address)) {
          if (Config.get().getGroupName().equals(joinInfo.groupName)) {
            if (Config.get().getGroupPassword().equals(joinInfo.groupPassword)) {
              if (node.master()) {
                if (joinInfo.request) {
                  send(joinInfo.copy(false,node.address));
                }
              }
 else {
                if (!node.joined() && !joinInfo.request) {
                  if (node.masterAddress == null) {
                    node.masterAddress=new Address(joinInfo.address);
                  }
                }
              }
            }
          }
        }
      }
    }
 catch (    Exception e) {
      e.printStackTrace();
    }
  }
}
