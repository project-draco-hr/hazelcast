{
  try {
    for (    HazelcastOSGiInstance instance : instanceServiceRegistrationMap.keySet()) {
      try {
        deregisterInstance(instance);
      }
 catch (      Throwable t) {
        LOGGER.finest("Error occurred while deregistering " + instance,t);
      }
      try {
        instance.shutdown();
      }
 catch (      Throwable t) {
        LOGGER.finest("Error occurred while shutting down " + instance,t);
      }
    }
  }
  finally {
    if (hazelcastInstance != null) {
      try {
        hazelcastInstance.shutdown();
      }
 catch (      Throwable t) {
        LOGGER.finest("Error occurred while shutting down the default Hazelcast instance !",t);
      }
 finally {
        hazelcastInstance=null;
      }
    }
  }
}
