{
  initExecutor();
  final Operation operation=new DummyOperation(1);
  FutureTask<Boolean> futureTask=new FutureTask<Boolean>(new Callable<Boolean>(){
    @Override public Boolean call() throws Exception {
      return executor.isInvocationAllowedFromCurrentThread(operation,true);
    }
  }
);
  DummyNioThread nioThread=new DummyNioThread(futureTask);
  nioThread.start();
  assertEqualsEventually(futureTask,Boolean.FALSE);
}
