{
  checkTTL();
  if (lockCount == 0) {
    lockAddress=address;
    lockThreadId=threadId;
    lockCount++;
    lockAcquireTime=Clock.currentTimeMillis();
    expirationTime=System.currentTimeMillis() + ttl;
    return true;
  }
 else   if (isLockedBy(address,threadId)) {
    lockCount++;
    expirationTime=System.currentTimeMillis() + ttl;
    return true;
  }
  return false;
}
