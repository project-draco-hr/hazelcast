{
  try {
    long requestId=lastRequestId.addAndGet(1);
    requestLocal.set(requestId);
    getNext().invoke(request,response);
    HazelSessionFacade ses=(HazelSessionFacade)request.getSession();
    List<HazelAttribute> touchedList=ses.getTouchedAttributes(requestId);
    for (    HazelAttribute hattribute : touchedList) {
      hazelAttributes.put(hattribute.getKey(),hattribute);
    }
  }
  finally {
    requestLocal.remove();
  }
}
