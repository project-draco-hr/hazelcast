{
  int portTryCount=1;
  if (port == -1) {
    portTryCount=MAX_PORT_TRIES;
    port=5701;
  }
  final Collection<InetSocketAddress> socketAddresses=new LinkedList<InetSocketAddress>();
  if (inetAddress == null) {
    for (int i=0; i < portTryCount; i++) {
      socketAddresses.add(new InetSocketAddress(scopedAddress,port + i));
    }
  }
 else   if (inetAddress instanceof Inet4Address) {
    for (int i=0; i < portTryCount; i++) {
      socketAddresses.add(new InetSocketAddress(inetAddress,port + i));
    }
  }
 else {
    final Collection<Inet6Address> addresses=AddressUtil.getPossibleInetAddressesFor((Inet6Address)inetAddress);
    for (    Inet6Address inet6Address : addresses) {
      for (int i=0; i < portTryCount; i++) {
        socketAddresses.add(new InetSocketAddress(inet6Address,port + i));
      }
    }
  }
  return socketAddresses;
}
