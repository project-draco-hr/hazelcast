{
  if (buffer.remaining() < i) {
    int newCap=Math.max(buffer.limit() << 1,buffer.limit() + i);
    ByteBuffer newBuffer=ByteBuffer.allocate(newCap);
    buffer.flip();
    newBuffer.put(buffer);
    buffer=newBuffer;
  }
}
