{
  if (connection != null) {
    final DataOutputStream dos=connection.getOutputStream();
    if (connection.headersWritten.compareAndSet(false,true)) {
      dos.write(HEADER);
      dos.flush();
    }
    request.writeTo(dos);
  }
}
