{
  if (isDone() || cancelled) {
    return false;
  }
  Future f=invokeCancelOperation(mayInterruptIfRunning);
  try {
    Boolean b=(Boolean)f.get();
    if (b != null && b) {
      setError(new CancellationException());
      cancelled=true;
      return true;
    }
    return false;
  }
 catch (  Exception e) {
    throw rethrow(e);
  }
 finally {
    setDone();
  }
}
