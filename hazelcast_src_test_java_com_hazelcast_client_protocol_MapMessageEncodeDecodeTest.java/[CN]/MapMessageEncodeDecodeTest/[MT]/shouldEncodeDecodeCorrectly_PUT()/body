{
  final int calculatedSize=MapPutParameters.calculateDataSize(NAME,DATA,DATA,THE_LONG,THE_LONG);
  ClientMessage cmEncode=MapPutParameters.encode(NAME,DATA,DATA,THE_LONG,THE_LONG);
  cmEncode.setVersion((short)3).setFlags(ClientMessage.BEGIN_AND_END_FLAGS).setCorrelationId(66).setPartitionId(77);
  byteBuffer=cmEncode.buffer().byteBuffer();
  ClientMessage cmDecode=ClientMessage.createForDecode(this.byteBuffer,0);
  final MapPutParameters decodeParams=MapPutParameters.decode(cmDecode);
  assertEquals(calculatedSize,cmEncode.getFrameLength());
  assertEquals(MapMessageType.MAP_PUT.id(),cmDecode.getMessageType());
  assertEquals(3,cmDecode.getVersion());
  assertEquals(ClientMessage.BEGIN_AND_END_FLAGS,cmDecode.getFlags());
  assertEquals(66,cmDecode.getCorrelationId());
  assertEquals(77,cmDecode.getPartitionId());
  assertEquals(NAME,decodeParams.name);
  assertEquals(DATA,decodeParams.key);
  assertEquals(DATA,decodeParams.value);
  assertEquals(THE_LONG,decodeParams.threadId);
  assertEquals(THE_LONG,decodeParams.ttl);
}
