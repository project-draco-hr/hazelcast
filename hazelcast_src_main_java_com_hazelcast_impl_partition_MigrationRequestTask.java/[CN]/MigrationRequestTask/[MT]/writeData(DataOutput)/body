{
  out.writeInt(partitionId);
  out.writeInt(replicaIndex);
  out.writeBoolean(migration);
  out.writeBoolean(diffOnly);
  out.writeInt(selfCopyReplicaIndex);
  boolean hasFrom=from != null;
  out.writeBoolean(hasFrom);
  if (hasFrom) {
    from.writeData(out);
  }
  to.writeData(out);
}
