{
  if (next != null) {
    if (next.copyCount-- <= 0) {
      next=null;
    }
  }
  if (lsEntries != null) {
    if (lsEntries.size() > 0) {
      next=lsEntries.remove(0);
    }
 else {
      next=null;
      lsEntries=null;
    }
  }
  while (next == null) {
    boolean canRead=setNextBlock();
    if (!canRead)     return false;
    next=read.read(name,currentBlockId,currentIndex);
    if (next == null) {
      currentIndex=-1;
    }
 else {
      currentIndex=read.lastReadRecordId;
      currentIndex++;
      TransactionImpl txn=ThreadContext.get().txn;
      if (txn != null) {
        Object key=next.getKey();
        if (txn.has(name,key)) {
          next=null;
        }
      }
    }
  }
  hasNextCalled=true;
  return true;
}
