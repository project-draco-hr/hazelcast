{
  fireTtlCleanup();
  if (evictionPolicy == EvictionPolicy.NONE && cache.size() >= maxSize) {
    return;
  }
  if (evictionPolicy != EvictionPolicy.NONE && cache.size() >= maxSize) {
    fireEvictCache();
  }
  Object value=null;
  if (object != null) {
    SerializationService serializationService=context.getSerializationService();
    if (inMemoryFormat == InMemoryFormat.BINARY) {
      value=serializationService.toData(object);
    }
 else     if (inMemoryFormat == InMemoryFormat.OBJECT) {
      value=serializationService.toObject(object);
    }
 else {
      throw new IllegalArgumentException();
    }
  }
  value=value == null ? NULL_OBJECT : value;
  cache.put(key,new NearCacheRecord(key,value));
}
