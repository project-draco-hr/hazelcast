{
  checkNotNull(sb,"sb can't be null");
  sb.append(name).append('=');
  Object input=this.input;
  S source=this.source;
  if (input == null || source == null) {
    sb.append("NA");
    return;
  }
  try {
    if (input instanceof LongProbe) {
      LongProbe<S> function=(LongProbe)input;
      sb.append(function.get(source));
    }
 else {
      DoubleProbe<S> function=(DoubleProbe)input;
      sb.append(function.get(source));
    }
  }
 catch (  Exception e) {
    logger.warning("Failed to update metric:" + name,e);
    sb.append("NA");
  }
}
