{
  if (!started.get())   return;
  boolean preparedStateData=false;
  int compressedCount=0;
  for (  Address address : socketAddresses.keySet()) {
    if (!thisAddress.equals(address)) {
      final SocketAddress socketAddress=socketAddresses.get(address);
      if (socketAddress != null) {
        try {
          if (!preparedStateData) {
            compressedCount=prepareStateData();
            preparedStateData=true;
          }
          packet.setData(buffer.getOutputBuffer().array(),0,compressedCount);
          packet.setSocketAddress(socketAddress);
          socket.send(packet);
        }
 catch (        IOException e) {
          if (running && factory.node.isActive()) {
            logger.log(Level.WARNING,e.getMessage(),e);
          }
        }
      }
    }
  }
}
