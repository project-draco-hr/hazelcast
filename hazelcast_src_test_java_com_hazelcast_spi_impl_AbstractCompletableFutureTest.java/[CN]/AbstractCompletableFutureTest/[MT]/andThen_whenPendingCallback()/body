{
  FutureImpl future=new FutureImpl(nodeEngine,logger);
  ExecutionCallback callback1=mock(ExecutionCallback.class);
  future.andThen(callback1,executor);
  ExecutionCallback callback2=mock(ExecutionCallback.class);
  future.andThen(callback2,executor);
  ExecutionCallbackNode secondNode=assertInstanceOf(ExecutionCallbackNode.class,future.state);
  assertSame(secondNode.callback,callback2);
  assertSame(secondNode.executor,executor);
  ExecutionCallbackNode firstNode=secondNode.next;
  assertSame(firstNode.callback,callback1);
  assertSame(firstNode.executor,executor);
  assertSame(firstNode.next,AbstractCompletableFuture.INITIAL_STATE);
  verifyZeroInteractions(callback1);
  verifyZeroInteractions(callback2);
}
