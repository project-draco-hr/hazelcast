{
  node.executorManager.executeLocally(new FallThroughRunnable(){
    public void doRun(){
      if (node.joined() && node.isActive()) {
        ClusterImpl clusterImpl=node.getClusterImpl();
        if (node.isMaster()) {
          ClusterStateViewImpl clusterStateView=new ClusterStateViewImpl(node.factory.getLongInstanceNames());
          PartitionService partitionService=node.factory.getPartitionService();
          Set<Member> members=clusterImpl.getMembers();
          for (          Member member : members) {
            clusterStateView.setPartition(member,getPartitions(partitionService,member));
          }
          multimap.put(key,clusterStateView);
        }
        MemberStateImpl memberState=node.factory.createMemberState();
        multimap.put(key,memberState);
      }
    }
  }
);
}
