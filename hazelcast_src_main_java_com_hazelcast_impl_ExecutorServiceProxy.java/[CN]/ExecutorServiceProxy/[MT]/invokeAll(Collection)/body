{
  node.factory.initialChecks();
  if (tasks == null)   throw new NullPointerException();
  List<Future> futures=new ArrayList<Future>(tasks.size());
  boolean done=false;
  try {
    for (    Object command : tasks) {
      futures.add(submit((Callable)command));
    }
    for (    Future f : futures) {
      if (!f.isDone()) {
        try {
          f.get();
        }
 catch (        CancellationException ignore) {
        }
catch (        ExecutionException ignore) {
        }
      }
    }
    done=true;
    return futures;
  }
  finally {
    if (!done)     for (    Future f : futures)     f.cancel(true);
  }
}
