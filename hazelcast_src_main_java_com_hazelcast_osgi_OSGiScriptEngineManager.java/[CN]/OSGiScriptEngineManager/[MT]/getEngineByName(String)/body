{
  for (  ScriptEngineManager manager : classLoaders.keySet()) {
    Thread currentThread=Thread.currentThread();
    ClassLoader old=currentThread.getContextClassLoader();
    ClassLoader contextClassLoader=classLoaders.get(manager);
    currentThread.setContextClassLoader(contextClassLoader);
    ScriptEngine engine=manager.getEngineByName(shortName);
    currentThread.setContextClassLoader(old);
    if (engine != null) {
      OSGiScriptEngineFactory factory=new OSGiScriptEngineFactory(engine.getFactory(),contextClassLoader);
      return new OSGiScriptEngine(engine,factory);
    }
  }
  return null;
}
