{
  Permit permit=permitMap.get(name);
  if (permit == null) {
    SemaphoreConfig config=nodeEngine.getConfig().getSemaphoreConfig(name);
    int partitionId=nodeEngine.getPartitionService().getPartitionId(nodeEngine.toData(name));
    permit=new Permit(partitionId,new SemaphoreConfig(config));
    Permit current=permitMap.putIfAbsent(name,permit);
    permit=current == null ? permit : current;
  }
  return permit;
}
