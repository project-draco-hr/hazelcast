{
  CacheService service=getService();
  final InternalPartitionService partitionService=getNodeEngine().getPartitionService();
  cache=service.getCache(name,getPartitionId());
  if (cache != null) {
    Set<Data> filteredKeys=new HashSet<Data>();
    if (keys != null) {
      for (      Data k : keys) {
        if (partitionService.getPartitionId(k) == getPartitionId()) {
          filteredKeys.add(k);
        }
      }
    }
    try {
      if (keys == null || !filteredKeys.isEmpty()) {
        cache.clear(filteredKeys,isRemoveAll);
      }
    }
 catch (    CacheException e) {
      response=new CacheClearResponse(e);
    }
    if (shouldBackup=!filteredKeys.isEmpty()) {
      backupRecord=new HashMap<Data,CacheRecord>();
      for (      Data key : filteredKeys) {
        backupRecord.put(key,cache.getRecord(key));
      }
    }
  }
}
