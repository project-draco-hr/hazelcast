{
  try {
    Object obj=queue.poll(100,TimeUnit.MILLISECONDS);
    if (obj == null) {
      return;
    }
    if (obj instanceof Packet) {
      Packet packet=(Packet)obj;
      if (packet.getName() == null) {
        Object eventType=toObject(packet.getValue());
        if (new Integer(0).equals(eventType) || new Integer(2).equals(eventType)) {
          instanceListenerManager.notifyListeners(packet);
        }
 else {
          membershipListenerManager.notifyListeners(packet);
        }
      }
 else       if (getInstanceType(packet.getName()).equals(Instance.InstanceType.TOPIC)) {
        messageListenerManager.notifyMessageListeners(packet);
      }
 else       if (getInstanceType(packet.getName()).equals(Instance.InstanceType.QUEUE)) {
        queueItemListenerManager.notifyListeners(packet);
      }
 else {
        entryListenerManager.notifyListeners(packet);
      }
    }
    if (obj instanceof Protocol) {
      Protocol protocol=(Protocol)obj;
      if (Command.EVENT.equals(protocol.command)) {
        entryListenerManager.notifyListeners(protocol);
      }
 else       if (Command.QEVENT.equals(protocol.command)) {
        queueItemListenerManager.notifyListeners(protocol);
      }
 else       if (Command.MESSAGE.equals(protocol.command)) {
        messageListenerManager.notifyMessageListeners(protocol);
      }
    }
 else     if (obj instanceof Runnable) {
      ((Runnable)obj).run();
    }
  }
 catch (  InterruptedException ine) {
    throw ine;
  }
catch (  Throwable ignored) {
    ignored.printStackTrace();
  }
}
