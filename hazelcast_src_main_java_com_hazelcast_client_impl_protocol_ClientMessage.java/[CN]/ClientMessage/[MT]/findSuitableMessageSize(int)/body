{
  if (desiredMessageSize < 0) {
    throw new MaxMessageSizeExceeded();
  }
  desiredMessageSize=QuickMath.nextPowerOfTwo(desiredMessageSize);
  if (desiredMessageSize < 0) {
    desiredMessageSize=Integer.MAX_VALUE;
  }
  return desiredMessageSize;
}
