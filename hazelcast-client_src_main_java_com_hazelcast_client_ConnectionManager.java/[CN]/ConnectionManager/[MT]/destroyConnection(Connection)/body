{
  boolean lost=false;
synchronized (this) {
    if (currentConnection != null && connection != null && currentConnection.getVersion() == connection.getVersion()) {
      logger.log(Level.WARNING,"Connection to " + currentConnection + " is lost");
      while (clusterMembers.remove(currentConnection.getAddress().getInetSocketAddress()))       ;
      currentConnection=null;
      lost=true;
      try {
        connection.close();
      }
 catch (      IOException e) {
        logger.log(Level.FINEST,e.getMessage(),e);
      }
    }
  }
  if (lost) {
    lifecycleService.fireLifecycleEvent(CLIENT_CONNECTION_LOST);
  }
}
