{
  if (currentConnection == null) {
synchronized (this) {
      int attempt=0;
      while (currentConnection == null) {
        Connection connection=searchForAvailableConnection();
        if (connection != null) {
          logger.log(Level.FINE,"Client is connecting to " + connection);
          currentConnection=connection;
        }
 else {
          if (attempt >= RECONNECTION_ATTEMPTS_LIMIT) {
            break;
          }
          attempt++;
          logger.log(Level.INFO,format("Unable to get alive cluster connection," + " try in {0} ms later, attempt {1} of {2}.",RECONNECTION_TIMEOUT,attempt,RECONNECTION_ATTEMPTS_LIMIT));
          try {
            Thread.sleep(RECONNECTION_TIMEOUT);
          }
 catch (          InterruptedException e) {
            break;
          }
        }
      }
    }
  }
  return currentConnection;
}
