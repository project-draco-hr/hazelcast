{
  final ArgumentCaptor<Runnable> runnableCaptor=ArgumentCaptor.forClass(Runnable.class);
  when(executorService.schedule(runnableCaptor.capture(),anyLong(),any(TimeUnit.class))).thenReturn(mock(ScheduledFuture.class));
  final SecondsBasedEntryTaskScheduler<Integer,Integer> scheduler=new SecondsBasedEntryTaskScheduler<Integer,Integer>(executorService,entryProcessor,FOR_EACH);
  scheduler.schedule(100,1,1);
  assertEquals(1,scheduler.size());
  final Runnable runnable=runnableCaptor.getValue();
  assertNotNull(runnable);
  runnable.run();
  assertEquals(0,scheduler.size());
}
