{
  final boolean identified=obj instanceof IdentifiedDataSerializable;
  out.writeBoolean(identified);
  if (identified) {
    out.writeInt(((IdentifiedDataSerializable)obj).getId());
  }
 else {
    out.writeUTF(obj.getClass().getName());
  }
  obj.writeData(out);
}
