{
  assertTrueEventually(new AssertTask(){
    @Override public void run() throws Exception {
      Collection<HazelcastInstance> instances=factory.getAllHazelcastInstances();
      int expectedSize=PARTITION_COUNT * Math.min(backupCount + 1,instances.size());
      int total=0;
      for (      HazelcastInstance hz : instances) {
        SampleMigrationAwareService service=getService(hz);
        total+=service.size();
      }
      assertEquals(expectedSize,total);
    }
  }
);
}
