{
  final SerializationService serializationService=client.getSerializationService();
  final Xid[] empty=new Xid[0];
  try {
    final ClientConnection connection;
    try {
      connection=connect();
    }
 catch (    Exception ignored) {
      EmptyStatement.ignore(ignored);
      return empty;
    }
    final RecoverAllTransactionsRequest request=new RecoverAllTransactionsRequest();
    final ClientInvocation clientInvocation=new ClientInvocation(client,request,connection);
    final Future<SerializableCollection> future=clientInvocation.invoke();
    final SerializableCollection collectionWrapper=serializationService.toObject(future.get());
    for (    Data data : collectionWrapper) {
      final SerializableXID xid=serializationService.toObject(data);
      recoveredTransactions.put(xid,connection);
    }
    final Set<SerializableXID> xidSet=recoveredTransactions.keySet();
    return xidSet.toArray(new Xid[xidSet.size()]);
  }
 catch (  Exception e) {
    ExceptionUtil.rethrow(e);
  }
  return empty;
}
