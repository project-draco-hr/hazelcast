{
  final int entityCount=10;
  final int queryCount=3;
  insertDummyEntities(entityCount);
  List<DummyEntity> list=null;
  for (int i=0; i < queryCount; i++) {
    list=executeQuery(sf);
    assertEquals(entityCount,list.size());
    sleepAtLeastSeconds(1);
  }
  assertNotNull(list);
  Session session=sf.openSession();
  Transaction tx=session.beginTransaction();
  try {
    for (    DummyEntity dummy : list) {
      session.delete(dummy);
    }
    tx.commit();
  }
 catch (  Exception e) {
    tx.rollback();
    e.printStackTrace();
  }
 finally {
    session.close();
  }
  Statistics stats=sf.getStatistics();
  assertEquals(1,stats.getQueryCachePutCount());
  assertEquals(1,stats.getQueryCacheMissCount());
  assertEquals(queryCount - 1,stats.getQueryCacheHitCount());
  assertEquals(1,stats.getQueryExecutionCount());
  assertEquals(entityCount,stats.getEntityInsertCount());
  assertEquals(entityCount,stats.getEntityLoadCount());
  assertEquals(entityCount,stats.getEntityDeleteCount());
  assertEquals(entityCount * (queryCount - 1) * 2,stats.getSecondLevelCacheHitCount());
  assertEquals(entityCount,stats.getSecondLevelCacheMissCount());
  stats.logSummary();
}
