{
  HazelcastInstance instance=factory.newHazelcastInstance();
  HazelcastInstance client=factory.newHazelcastClient();
  String mapName=randomMapName();
  ReplicatedMap<Object,Object> replicatedMap=client.getReplicatedMap(mapName);
  final EventCountingListener listener=new EventCountingListener();
  replicatedMap.addEntryListener(listener);
  replicatedMap.put(1,1);
  replicatedMap.clear();
  assertTrueEventually(new AssertTask(){
    @Override public void run() throws Exception {
      Assert.assertEquals(1,listener.mapClearCount.get());
    }
  }
);
}
