{
  TransactionContext transactionContext=instance.newTransactionContext();
  try {
    transactionContext.beginTransaction();
    TransactionalMap<Object,Integer> txnMap=transactionContext.getMap(mapName);
    try {
      assertEquals("TransactionalMap.values()",upperLimit,txnMap.values().size());
    }
 catch (    QueryResultSizeExceededException e) {
      failUnwantedException("TransactionalMap.values()");
    }
    try {
      assertEquals("TransactionalMap.keySet()",upperLimit,txnMap.keySet().size());
    }
 catch (    QueryResultSizeExceededException e) {
      failUnwantedException("TransactionalMap.keySet()");
    }
  }
  finally {
    transactionContext.rollbackTransaction();
  }
}
