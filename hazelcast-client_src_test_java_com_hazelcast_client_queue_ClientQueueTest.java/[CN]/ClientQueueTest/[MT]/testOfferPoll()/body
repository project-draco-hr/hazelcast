{
  final IQueue q=client.getQueue(queueWithMaxSize + randomString());
  for (int i=0; i < 10; i++) {
    boolean result=q.offer("item");
    if (i < maxSizeForQueue) {
      assertTrue(result);
    }
 else {
      assertFalse(result);
    }
  }
  assertEquals(maxSizeForQueue,q.size());
  final Thread t1=new Thread(){
    public void run(){
      try {
        Thread.sleep(2 * 1000);
      }
 catch (      InterruptedException e) {
        e.printStackTrace();
      }
      q.poll();
    }
  }
;
  t1.start();
  boolean result=q.offer("item",5,TimeUnit.SECONDS);
  assertTrue(result);
  for (int i=0; i < 10; i++) {
    Object o=q.poll();
    if (i < maxSizeForQueue) {
      assertNotNull(o);
    }
 else {
      assertNull(o);
    }
  }
  assertEquals(0,q.size());
  final Thread t2=new Thread(){
    public void run(){
      try {
        Thread.sleep(2 * 1000);
      }
 catch (      InterruptedException e) {
        e.printStackTrace();
      }
      q.offer("item1");
    }
  }
;
  t2.start();
  Object o=q.poll(5,TimeUnit.SECONDS);
  assertEquals("item1",o);
  t1.join(10000);
  t2.join(10000);
}
