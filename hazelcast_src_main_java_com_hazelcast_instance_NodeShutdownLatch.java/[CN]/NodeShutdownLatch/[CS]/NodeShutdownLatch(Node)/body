{
  localMember=node.localMember;
  Collection<Member> memberList=node.clusterService.getMembers();
  registrations=new HashMap<String,HazelcastInstanceImpl>(3);
  Set<Member> members=new HashSet<Member>(memberList);
  members.remove(localMember);
  if (!members.isEmpty()) {
    for (    HazelcastInstanceImpl instance : HazelcastInstanceManager.getInstanceImpls(members)) {
      if (instance.node.isRunning()) {
        try {
          ClusterServiceImpl clusterService=instance.node.clusterService;
          final String id=clusterService.addMembershipListener(new ShutdownMembershipListener());
          registrations.put(id,instance);
        }
 catch (        Throwable ignored) {
          EmptyStatement.ignore(ignored);
        }
      }
    }
  }
  latch=new Semaphore(0);
}
