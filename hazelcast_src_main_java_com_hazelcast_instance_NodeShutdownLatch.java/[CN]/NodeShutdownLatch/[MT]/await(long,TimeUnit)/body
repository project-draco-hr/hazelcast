{
  if (registrations.isEmpty()) {
    return;
  }
  int permits=registrations.size();
  for (  HazelcastInstanceImpl instance : registrations.values()) {
    if (instance.node.getState() == NodeState.ACTIVE) {
      permits--;
    }
  }
  try {
    latch.tryAcquire(permits,time,unit);
  }
 catch (  InterruptedException ignored) {
  }
  for (  Map.Entry<String,HazelcastInstanceImpl> entry : registrations.entrySet()) {
    final HazelcastInstanceImpl instance=entry.getValue();
    try {
      instance.node.clusterService.removeMembershipListener(entry.getKey());
    }
 catch (    Throwable ignored) {
    }
  }
  registrations.clear();
}
