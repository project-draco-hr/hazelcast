{
  Config config;
  if (configUrl == null) {
    config=new XmlConfigBuilder().build();
  }
 else {
    try {
      config=new UrlXmlConfig(configUrl);
    }
 catch (    IOException e) {
      throw new ServletException(e);
    }
  }
  if (sessionTTLConfig == null) {
    sessionTTLConfig=SESSION_TTL_DEFAULT_SECONDS;
  }
  MapConfig mapConfig=config.getMapConfig(mapName);
  try {
    mapConfig.setMaxIdleSeconds(Integer.parseInt(sessionTTLConfig));
  }
 catch (  NumberFormatException e) {
    ExceptionUtil.rethrow(new InvalidConfigurationException("session-ttl-seconds must be a numeric value"));
  }
  return config;
}
