{
  long begin=System.currentTimeMillis();
  if (ttl < 0) {
    throw new IllegalArgumentException("ttl value cannot be negative. " + ttl);
  }
  if (ttl == 0) {
    ttl=-1;
  }
 else {
    ttl=toMillis(ttl,timeunit);
  }
  check(key);
  check(value);
  MPut mput=ThreadContext.get().getCallCache(factory).getMPut();
  mput.set(name,key,value,ttl);
  mput.clearRequest();
  mapOperationCounter.incrementPuts(System.currentTimeMillis() - begin);
}
