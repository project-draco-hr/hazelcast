{
  if (available() < len) {
    if (offset > 0) {
      throw new BufferOverflowException();
    }
    if (buffer != null) {
      int newCap=Math.max(buffer.length << 1,buffer.length + len);
      byte newBuffer[]=new byte[newCap];
      System.arraycopy(buffer,0,newBuffer,0,pos);
      buffer=newBuffer;
    }
 else {
      buffer=new byte[len > DEFAULT_SIZE / 2 ? len * 2 : DEFAULT_SIZE];
    }
  }
}
