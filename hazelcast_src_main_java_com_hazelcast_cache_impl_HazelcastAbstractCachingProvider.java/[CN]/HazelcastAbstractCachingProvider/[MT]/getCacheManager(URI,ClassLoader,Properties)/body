{
  URI managerURI=uri == null ? getDefaultURI() : uri;
  ClassLoader managerClassLoader=classLoader == null ? getDefaultClassLoader() : classLoader;
  Properties managerProperties=properties == null ? new Properties() : properties;
  HashMap<URI,CacheManager> cacheManagersByURI=cacheManagers.get(managerClassLoader);
  if (cacheManagersByURI == null) {
    cacheManagersByURI=new HashMap<URI,CacheManager>();
  }
  CacheManager cacheManager=cacheManagersByURI.get(managerURI);
  if (cacheManager == null) {
    try {
      cacheManager=getHazelcastCacheManager(uri,classLoader,managerProperties);
      cacheManagersByURI.put(managerURI,cacheManager);
    }
 catch (    Throwable t) {
      LOGGER.warning("Error opening URI" + managerURI.toString() + ". Caused by :"+ t.getMessage());
    }
  }
  if (!cacheManagers.containsKey(managerClassLoader)) {
    cacheManagers.put(managerClassLoader,cacheManagersByURI);
  }
  return cacheManager;
}
