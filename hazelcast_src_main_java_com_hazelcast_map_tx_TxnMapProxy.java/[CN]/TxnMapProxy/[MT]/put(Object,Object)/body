{
  final Object valueBeforeTxn=getService().toObject(putInternal(getService().toData(key),getService().toData(value)));
  Object currentValue=txMap.get(key);
  if (value != null)   txMap.put(key,value);
  return currentValue == null ? valueBeforeTxn : checkIfNull(currentValue);
}
