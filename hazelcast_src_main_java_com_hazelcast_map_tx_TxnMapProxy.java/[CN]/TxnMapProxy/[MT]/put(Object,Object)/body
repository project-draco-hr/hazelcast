{
  final Object valueBeforeTxn=(Object)getService().toObject(putInternal(getService().toData(key),getService().toData(value)));
  Object currentValue=tempMap.get(key);
  if (value != null)   tempMap.put(key,value);
  return currentValue == null ? valueBeforeTxn : checkIfNull(currentValue);
}
