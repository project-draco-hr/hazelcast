{
  ObjectDataInputStream inputStream=null;
  try {
    inputStream=openTaskInputStream();
    int taskId=inputStream.readInt();
    if (taskId <= 0) {
      return;
    }
    ConsoleRequest task=newTask(inputStream);
    processTaskAndPostResponse(taskId,task);
    if (manCenterConnectionLost) {
      logger.info("Connection to management center restored.");
    }
    manCenterConnectionLost=false;
  }
 catch (  ConnectException e) {
    if (!manCenterConnectionLost) {
      manCenterConnectionLost=true;
      log("Failed to connect to management center",e);
    }
  }
catch (  Exception e) {
    logger.finest(e);
  }
 finally {
    IOUtil.closeResource(inputStream);
  }
}
