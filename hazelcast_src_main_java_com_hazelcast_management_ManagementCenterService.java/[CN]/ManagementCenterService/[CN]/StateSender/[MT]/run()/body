{
  if (webServerUrl == null) {
    logger.log(Level.WARNING,"Web server url is null!");
    return;
  }
  try {
    while (running.get()) {
      if (versionMismatch) {
        Thread.sleep(1000 * 60);
        versionMismatch=false;
      }
      try {
        URL url=new URL(webServerUrl + "collector.do");
        HttpURLConnection connection=(HttpURLConnection)url.openConnection();
        connection.setDoOutput(true);
        connection.setRequestMethod("POST");
        connection.setConnectTimeout(1000);
        connection.setReadTimeout(1000);
        final ObjectDataOutputStream out=serializationService.createObjectDataOutputStream(connection.getOutputStream());
        TimedMemberState ts=getTimedMemberState();
        out.writeUTF(instance.node.initializer.getVersion());
        instance.node.address.writeData(out);
        out.writeUTF(instance.getConfig().getGroupConfig().getName());
        ts.writeData(out);
        out.flush();
        connection.getInputStream();
      }
 catch (      Exception e) {
        logger.log(Level.FINEST,e.getMessage(),e);
      }
      Thread.sleep(updateIntervalMs);
    }
  }
 catch (  Throwable throwable) {
    if (throwable instanceof OutOfMemoryError) {
      OutOfMemoryErrorDispatcher.onOutOfMemory((OutOfMemoryError)throwable);
    }
    logger.log(Level.WARNING,"Web Management Center will be closed due to exception.",throwable);
    shutdown();
  }
}
