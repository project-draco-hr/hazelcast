{
  initialChecks();
  ThreadContext threadContext=ThreadContext.get();
  TransactionImpl txn=threadContext.txn;
  if (txn == null) {
    txn=transactionFactory.newTransaction();
    threadContext.setTransaction(txn);
  }
  return txn;
}
