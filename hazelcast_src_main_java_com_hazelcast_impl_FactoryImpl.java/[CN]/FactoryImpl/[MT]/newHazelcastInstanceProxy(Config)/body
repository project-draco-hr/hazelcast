{
  if (config == null) {
    config=new XmlConfigBuilder().build();
  }
  String name=config.getInstanceName();
  if (name == null || name.trim().length() == 0) {
    name="_hzInstance_" + factoryIdGen.incrementAndGet() + "_"+ config.getGroupConfig().getName();
    return newHazelcastInstanceProxy(config,name);
  }
 else {
synchronized (INIT_LOCK) {
      if (factories.containsKey(name)) {
        throw new DuplicateInstanceNameException("HazelcastInstance with name '" + name + "' already exists!");
      }
      return newHazelcastInstanceProxy(config,name);
    }
  }
}
