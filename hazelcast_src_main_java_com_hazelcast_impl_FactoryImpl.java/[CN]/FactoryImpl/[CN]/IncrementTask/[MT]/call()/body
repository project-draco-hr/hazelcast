{
  MProxy map=FactoryImpl.idGeneratorMapProxy;
  map.lock(name);
  try {
    Long max=(Long)map.get(name);
    if (max == null) {
      max=0l;
      map.put(name,0);
      return max;
    }
 else {
      Long newMax=max + 1;
      map.put(name,newMax);
      return newMax;
    }
  }
  finally {
    map.unlock(name);
  }
}
