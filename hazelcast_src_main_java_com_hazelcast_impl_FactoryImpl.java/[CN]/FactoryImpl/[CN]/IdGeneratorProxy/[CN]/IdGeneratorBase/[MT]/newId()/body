{
  long idAddition=currentId.incrementAndGet();
  if (idAddition >= MILLION) {
synchronized (IdGeneratorBase.this) {
      try {
        idAddition=currentId.get();
        if (idAddition >= MILLION) {
          Long idMillion=getNewMillion();
          long newMillion=idMillion * MILLION;
          million.set(newMillion);
          currentId.set(0L);
        }
        return newId();
      }
 catch (      Throwable t) {
        logger.log(Level.WARNING,t.getMessage(),t);
      }
    }
  }
  long millionNow=million.get();
  return millionNow + idAddition;
}
