{
  Set<Entry> entries=map.entrySet();
  final ExecutorService es=Executors.newFixedThreadPool(10);
  final CountDownLatch latch=new CountDownLatch(entries.size());
  for (  final Entry entry : entries) {
    es.execute(new Runnable(){
      public void run(){
        put(entry.getKey(),entry.getValue());
        latch.countDown();
      }
    }
);
  }
  try {
    latch.await();
    es.shutdown();
  }
 catch (  InterruptedException ignored) {
  }
}
