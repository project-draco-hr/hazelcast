{
  Collection<Instance> instances=node.factory.getInstances();
  Object[] instanceIds=new Object[instances.size()];
  int counter=0;
  for (Iterator<Instance> instanceIterator=instances.iterator(); instanceIterator.hasNext(); ) {
    Instance instance=instanceIterator.next();
    Object id=instance.getId();
    if (id instanceof FactoryImpl.ProxyKey) {
      Object key=((FactoryImpl.ProxyKey)id).getKey();
      if (key instanceof Instance)       id=key.toString();
    }
    instanceIds[counter]=id;
    counter++;
  }
  packet.value=toData(instanceIds);
}
