{
  Instance.InstanceType type=getInstanceType(packet.name);
  long timeout=packet.timeout;
  Data value=null;
  IMap<Object,Object> map=null;
  if (type == Instance.InstanceType.MAP) {
    map=(IMap)node.factory.getOrCreateProxyByName(packet.name);
  }
 else {
    MultiMapProxy multiMapProxy=(MultiMapProxy)node.factory.getOrCreateProxyByName(packet.name);
    map=multiMapProxy.getMProxy();
  }
  if (timeout == -1) {
    map.lock(packet.getKeyData());
    value=null;
  }
 else   if (timeout == 0) {
    value=toData(map.tryLock(packet.getKeyData()));
  }
 else {
    value=toData(map.tryLock(packet.getKeyData(),timeout,(TimeUnit)toObject(packet.getValueData())));
  }
  packet.setValue(value);
}
