{
  IMap<Object,Object> map=node.factory.getMap(packet.name);
  long timeout=packet.timeout;
  Data value=null;
  if (timeout == -1) {
    map.lock(packet.key);
    value=null;
  }
 else   if (timeout == 0) {
    value=toData(map.tryLock(packet.key));
  }
 else {
    value=toData(map.tryLock(packet.key,timeout,(TimeUnit)toObject(packet.value)));
  }
  packet.value=value;
}
