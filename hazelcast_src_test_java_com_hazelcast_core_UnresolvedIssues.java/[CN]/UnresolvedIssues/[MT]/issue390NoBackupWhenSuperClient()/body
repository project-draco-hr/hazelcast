{
  HazelcastInstance h1=Hazelcast.newHazelcastInstance(null);
  IMap map1=h1.getMap("def");
  for (int i=0; i < 200; i++) {
    map1.put(i,new byte[1000]);
  }
  Config scconfig=new Config();
  scconfig.setSuperClient(true);
  HazelcastInstance sc=Hazelcast.newHazelcastInstance(scconfig);
  HazelcastInstance h2=Hazelcast.newHazelcastInstance(null);
  IMap map2=h2.getMap("def");
  final CountDownLatch latch=new CountDownLatch(2);
  h2.getPartitionService().addMigrationListener(new MigrationListener(){
    public void migrationStarted(    MigrationEvent migrationEvent){
    }
    public void migrationCompleted(    MigrationEvent migrationEvent){
      latch.countDown();
    }
  }
);
  latch.await();
  assertEquals(map2.getLocalMapStats().getOwnedEntryCount(),map1.getLocalMapStats().getBackupEntryCount());
  assertEquals(map1.getLocalMapStats().getOwnedEntryCount(),map2.getLocalMapStats().getBackupEntryCount());
  System.out.println("MAP1: " + map1.getLocalMapStats());
  System.out.println("MAP2: " + map2.getLocalMapStats());
  h1.getLifecycleService().shutdown();
  h2.getLifecycleService().shutdown();
  sc.getLifecycleService().shutdown();
}
