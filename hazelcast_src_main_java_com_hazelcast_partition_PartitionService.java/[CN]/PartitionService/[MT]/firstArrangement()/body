{
  if (!node.isMaster() || !node.isActive() || !hasStorageMember()) {
    return;
  }
  if (!initialized) {
    lock.lock();
    try {
      if (initialized) {
        return;
      }
      PartitionStateGenerator psg=getPartitionStateGenerator();
      logger.log(Level.INFO,"Initializing cluster partition table first arrangement...");
      PartitionInfo[] newState=psg.initialize(node.getClusterService().getMembers(),partitionCount);
      if (newState != null) {
        for (        PartitionInfo partitionInfo : newState) {
          partitions[partitionInfo.getPartitionId()].setPartitionInfo(partitionInfo);
        }
        initialized=true;
        sendPartitionRuntimeState();
      }
    }
  finally {
      lock.unlock();
    }
  }
}
