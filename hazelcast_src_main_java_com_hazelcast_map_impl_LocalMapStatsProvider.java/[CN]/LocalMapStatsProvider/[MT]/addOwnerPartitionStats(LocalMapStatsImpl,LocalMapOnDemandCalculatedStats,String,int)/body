{
  final RecordStore recordStore=getRecordStoreOrNull(mapName,partitionId);
  if (!hasRecords(recordStore)) {
    return;
  }
  int lockedEntryCount=0;
  long lastAccessTime=0;
  long lastUpdateTime=0;
  long ownedEntryMemoryCost=0;
  long hits=0;
  final Iterator<Record> iterator=recordStore.iterator();
  while (iterator.hasNext()) {
    final Record record=iterator.next();
    hits+=getHits(record);
    ownedEntryMemoryCost+=record.getCost();
    lockedEntryCount+=isLocked(record,recordStore);
    lastAccessTime=Math.max(lastAccessTime,record.getLastAccessTime());
    lastUpdateTime=Math.max(lastUpdateTime,record.getLastUpdateTime());
  }
  localMapOnDemandCalculatedStats.incrementOwnedEntryMemoryCost(ownedEntryMemoryCost);
  localMapOnDemandCalculatedStats.incrementLockedEntryCount(lockedEntryCount);
  localMapOnDemandCalculatedStats.incrementHits(hits);
  localMapOnDemandCalculatedStats.incrementDirtyEntryCount(recordStore.getMapDataStore().notFinishedOperationsCount());
  localMapStats.setLastAccessTime(lastAccessTime);
  localMapStats.setLastUpdateTime(lastUpdateTime);
  localMapOnDemandCalculatedStats.incrementHeapCost(recordStore.getHeapCost());
  localMapOnDemandCalculatedStats.incrementOwnedEntryCount(recordStore.size());
}
