{
  for (int i=0; i < COUNT; i++) {
    map.putAsync(i,i);
  }
  assertTrueEventually(new AssertTask(){
    public void run(){
      assertEquals(1000,map.size());
    }
  }
);
  for (int i=0; i < COUNT; i++) {
    Future f=map.getAsync(i);
    assertEquals(i,f.get());
  }
  for (int i=0; i < COUNT; i++) {
    map.removeAsync(i);
  }
  assertTrueEventually(new AssertTask(){
    public void run(){
      assertEquals(0,map.size());
    }
  }
);
}
