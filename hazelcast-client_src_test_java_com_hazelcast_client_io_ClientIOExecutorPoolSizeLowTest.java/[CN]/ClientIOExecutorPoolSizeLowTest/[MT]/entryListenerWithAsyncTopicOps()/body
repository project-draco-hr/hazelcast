{
  final ITopic<Object> topic=client.getTopic(randomString());
  final MsgCounter counter=new MsgCounter();
  topic.addMessageListener(counter);
  for (int i=0; i < COUNT; i++) {
    topic.publish(i);
  }
  assertTrueEventually(new AssertTask(){
    public void run(){
      assertEquals(COUNT,counter.count.get());
    }
  }
);
}
