{
  if (recordCachePos == chunkSize) {
    sendChunk(finalRecord);
  }
  int hash=replicatedRecord.getLatestUpdateHash();
  Object key=unmarshallKey(replicatedRecord.getKey());
  Object value=unmarshallValue(replicatedRecord.getValue());
  VectorClock vectorClock=VectorClock.copyVector(replicatedRecord.getVectorClock());
  long ttlMillis=replicatedRecord.getTtlMillis();
  recordCache[recordCachePos++]=new ReplicatedRecord(key,value,vectorClock,hash,ttlMillis);
  if (finalRecord) {
    sendChunk(finalRecord);
  }
}
