{
  if (name == null) {
    throw new NullPointerException("name must not be null");
  }
  if (value == null) {
    removeAttribute(name);
    return;
  }
  boolean transientEntry=false;
  if (transientAttributes.contains(name)) {
    transientEntry=true;
  }
  LocalCacheEntry entry=localCache.get(name);
  if (entry == null || entry == WebFilter.NULL_ENTRY) {
    entry=new LocalCacheEntry(transientEntry);
    localCache.put(name,entry);
  }
  entry.setValue(value);
  entry.setDirty(true);
  entry.setRemoved(false);
  if (!deferredWrite && !transientEntry) {
    try {
      webFilter.getClusteredSessionService().setAttribute(id,name,value);
      entry.setDirty(false);
    }
 catch (    Exception ignored) {
      EmptyStatement.ignore(ignored);
    }
  }
}
