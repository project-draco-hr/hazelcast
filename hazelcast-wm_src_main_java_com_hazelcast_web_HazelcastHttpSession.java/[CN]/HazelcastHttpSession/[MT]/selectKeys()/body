{
  Set<String> keys=new HashSet<String>();
  if (!deferredWrite) {
    Set<String> attributeNames=null;
    try {
      attributeNames=webFilter.getClusteredSessionService().getAttributeNames(id);
    }
 catch (    Exception ignored) {
      for (      Map.Entry<String,LocalCacheEntry> entry : localCache.entrySet()) {
        if (!entry.getValue().isRemoved() && entry.getValue() != WebFilter.NULL_ENTRY) {
          keys.add(entry.getKey());
        }
      }
    }
    if (attributeNames != null) {
      keys.addAll(attributeNames);
    }
  }
 else {
    for (    Map.Entry<String,LocalCacheEntry> entry : localCache.entrySet()) {
      if (!entry.getValue().isRemoved() && entry.getValue() != WebFilter.NULL_ENTRY) {
        keys.add(entry.getKey());
      }
    }
  }
  return keys;
}
