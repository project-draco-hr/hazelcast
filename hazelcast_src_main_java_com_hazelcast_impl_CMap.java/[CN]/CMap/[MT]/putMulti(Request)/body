{
  Record record=getRecord(req.key);
  boolean added=true;
  if (record == null) {
    record=toRecord(req);
  }
 else {
    if (!record.isActive()) {
      markAsActive(record);
    }
    if (record.containsValue(req.value)) {
      added=false;
    }
  }
  if (added) {
    Data value=req.value;
    updateIndexes(record);
    record.addValue(value);
    record.incrementVersion();
    concurrentMapManager.fireMapEvent(mapListeners,getName(),EntryEvent.TYPE_ADDED,record.getKey(),value,record.getMapListeners());
  }
  if (req.txnId != -1) {
    unlock(record);
  }
  logger.log(Level.FINEST,record.getValue() + " PutMulti " + record.getMultiValues());
  req.clearForResponse();
  req.version=record.getVersion();
  return added;
}
