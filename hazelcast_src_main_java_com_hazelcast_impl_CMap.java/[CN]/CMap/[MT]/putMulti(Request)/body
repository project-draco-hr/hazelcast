{
  Record record=getRecord(req);
  boolean added=true;
  if (record == null) {
    record=toRecord(req);
  }
 else {
    if (!record.isActive()) {
      markAsActive(record);
    }
  }
  Data value=req.value;
  updateIndexes(record);
  record.addValue(value);
  record.incrementVersion();
  concurrentMapManager.fireMapEvent(mapListeners,getName(),EntryEvent.TYPE_ADDED,record.getKeyData(),null,value,record.getListeners(),req.caller);
  if (req.txnId != -1) {
    unlock(record,req);
  }
  req.clearForResponse();
  req.version=record.getVersion();
  return added;
}
