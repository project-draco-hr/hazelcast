{
  if (key == null || key.size() == 0) {
    throw new RuntimeException("Cannot create record from a 0 size key: " + key);
  }
  int blockId=concurrentMapManager.getBlockId(key);
  Record rec=new Record(node.factory,name,blockId,key,value,ttl,maxIdle,concurrentMapManager.newRecordId());
  Block ownerBlock=concurrentMapManager.getOrCreateBlock(blockId);
  if (thisAddress.equals(ownerBlock.getRealOwner())) {
    ownedRecords.add(rec);
  }
  mapRecords.put(key,rec);
  if (evictionPolicy != SortedHashMap.OrderingType.NONE) {
    if (maxSize != Integer.MAX_VALUE) {
      int limitSize=(maxSize / concurrentMapManager.lsMembers.size());
      if (ownedRecords.size() > limitSize) {
        startEviction();
      }
    }
  }
  return rec;
}
