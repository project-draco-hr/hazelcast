{
  long now=System.currentTimeMillis();
  if (((now - lastRemoveTime) > removeDelayMillis) && setRemovedRecords.size() > 0) {
    lastRemoveTime=now;
    Iterator<Record> itRemovedRecords=setRemovedRecords.iterator();
    while (itRemovedRecords.hasNext()) {
      Record record=itRemovedRecords.next();
      if (record.isActive()) {
        itRemovedRecords.remove();
      }
 else       if (shouldRemove(record,now) && !setDirtyRecords.contains(record)) {
        itRemovedRecords.remove();
        removeAndPurgeRecord(record);
      }
    }
  }
}
