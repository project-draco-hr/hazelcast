{
  if (maxSize == Integer.MAX_VALUE || maxSize == 0)   return Integer.MAX_VALUE;
  if (node.getClusterImpl().getMembers().size() < 2) {
    return maxSize;
  }
 else {
    PartitionServiceImpl partitionService=concurrentMapManager.partitionManager.partitionServiceImpl;
    int partitionCount=partitionService.getPartitions().size();
    int ownedPartitionCount=partitionService.getOwnedPartitionCount();
    if (partitionCount < 1 || ownedPartitionCount < 1)     return maxSize;
    return (maxSize * ownedPartitionCount) / partitionCount;
  }
}
