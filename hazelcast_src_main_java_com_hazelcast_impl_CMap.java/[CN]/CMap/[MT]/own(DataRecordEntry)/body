{
  Record record;
  if (isMultiMap()) {
    record=getRecord(dataRecordEntry.getKeyData());
    if (record == null) {
      record=createNewRecord(dataRecordEntry.getKeyData(),null);
      mapRecords.put(dataRecordEntry.getKeyData(),record);
    }
    if (record.getMultiValues() == null) {
      record.setMultiValues(createMultiValuesCollection());
    }
    record.getMultiValues().add(new ValueHolder(dataRecordEntry.getValueData()));
  }
 else {
    record=createNewRecord(dataRecordEntry.getKeyData(),dataRecordEntry.getValueData());
    mapRecords.put(dataRecordEntry.getKeyData(),record);
  }
  record.setIndexes(dataRecordEntry.getIndexes(),dataRecordEntry.getIndexTypes());
  record.setVersion(dataRecordEntry.getVersion());
  markAsActive(record);
  if (record.getValueData() != null) {
    updateIndexes(record);
  }
}
