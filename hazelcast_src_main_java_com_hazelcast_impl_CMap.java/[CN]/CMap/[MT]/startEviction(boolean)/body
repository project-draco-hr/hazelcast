{
  long now=System.currentTimeMillis();
  if (!force && ((now - lastEvictionTime) < evictionDelayMillis)) {
    return;
  }
  lastEvictionTime=now;
  List<Record> lsRecordsToEvict=null;
  if (evictionPolicy == SortedHashMap.OrderingType.NONE) {
    if (ttl != 0 || maxIdle != 0 || ttlPerRecord) {
      Collection<Record> values=mapRecords.values();
      for (      Record record : values) {
        if (ownedRecords.contains(record) && record.isActive() && !record.isValid(now)) {
          if (record.isEvictable()) {
            if (lsRecordsToEvict == null) {
              lsRecordsToEvict=new ArrayList<Record>(100);
            }
            lsRecordsToEvict.add(record);
          }
        }
      }
    }
  }
 else {
    Collection<Record> records=mapRecords.values();
    int numberOfRecordsToEvict=(int)(ownedRecords.size() * evictionRate);
    int evictedCount=0;
    loopRecords:     for (    Record record : records) {
      if (ownedRecords.contains(record) && record.isActive() && record.isEvictable()) {
        if (lsRecordsToEvict == null) {
          lsRecordsToEvict=new ArrayList<Record>(numberOfRecordsToEvict);
        }
        lsRecordsToEvict.add(record);
        if (++evictedCount >= numberOfRecordsToEvict) {
          break loopRecords;
        }
      }
    }
  }
  if (lsRecordsToEvict != null && lsRecordsToEvict.size() > 0) {
    for (    final Record recordToEvict : lsRecordsToEvict) {
      markAsRemoved(recordToEvict);
      concurrentMapManager.evictAsync(recordToEvict.getName(),recordToEvict.getKey());
    }
  }
}
