{
  if (ttl > 0 || ttlPerRecord || isList() || isMultiMap()) {
    long now=System.currentTimeMillis();
    int size=0;
    Collection<Record> records=mapOwnedRecords.values();
    for (    Record record : records) {
      if (record.isActive() && record.isValid(now)) {
        size+=record.valueCount();
      }
    }
    return size;
  }
 else {
    return mapIndexService.size();
  }
}
