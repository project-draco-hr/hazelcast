{
  Record rec=concurrentMapManager.ensureRecord(request);
  if (request.operation == CONCURRENT_MAP_LOCK_RETURN_OLD) {
    request.value=rec.getValue();
  }
  rec.lock(request.lockThreadId,request.lockAddress);
  rec.setVersion(rec.getVersion() + 1);
  request.version=rec.getVersion();
  request.lockCount=rec.getLockCount();
  markAsActive(rec);
  request.response=Boolean.TRUE;
}
