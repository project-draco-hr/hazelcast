{
  if (key instanceof String) {
    String partitionKey=StringPartitioningStrategy.getPartitionKey((String)key);
    return partitionKey != key ? partitionKey : null;
  }
 else   if (key instanceof PartitionAware) {
    return ((PartitionAware)key).getPartitionKey();
  }
  return null;
}
