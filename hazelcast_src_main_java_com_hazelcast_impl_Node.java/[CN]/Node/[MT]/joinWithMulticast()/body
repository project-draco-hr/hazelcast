{
  masterAddress=findMaster();
  logger.log(Level.FINEST,address + " master: " + masterAddress);
  if (masterAddress == null || masterAddress.equals(address)) {
    ClusterManager.get().addMember(address,getLocalNodeType());
    masterAddress=address;
    clusterImpl.setMembers(BaseManager.lsMembers);
    unlock();
  }
 else {
    while (!joined) {
      try {
        logger.log(Level.FINEST,"joining... " + masterAddress);
        if (masterAddress == null) {
          joinWithMulticast();
        }
 else         if (masterAddress.equals(address)) {
          setAsMaster();
        }
        joinExisting(masterAddress);
        Thread.sleep(500);
      }
 catch (      final Exception e) {
        logger.log(Level.FINEST,"multicast join",e);
      }
    }
  }
}
