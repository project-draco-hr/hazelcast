{
  try {
    if (active) {
      joined=false;
      active=false;
      inSelector.shutdown();
      outSelector.shutdown();
      clusterService.stop();
      queryService.stop();
      multicastService.stop();
      connectionManager.shutdown();
      concurrentMapManager.reset();
      clientService.reset();
      executorManager.stop();
      address=null;
      masterAddress=null;
      clusterManager.stop();
      int numThreads=threadGroup.activeCount();
      Thread[] threads=new Thread[numThreads * 2];
      numThreads=threadGroup.enumerate(threads,false);
      for (int i=0; i < numThreads; i++) {
        Thread thread=threads[i];
        thread.interrupt();
      }
    }
  }
 catch (  Throwable e) {
    e.printStackTrace();
  }
}
