{
  if (key != null) {
    Address owner=node.concurrentMapManager.getKeyOwner(key);
    if (owner.equals(thisAddress)) {
      handleListenerRegistrations(add,name,key,thisAddress,includeValue);
    }
 else {
      Packet packet=obtainPacket();
      packet.set(name,ADD_LISTENER_NO_RESPONSE,key,null);
      packet.longValue=(includeValue) ? 1 : 0;
      boolean sent=send(packet,owner);
      if (!sent) {
        packet.returnToContainer();
      }
    }
  }
 else {
    for (    MemberImpl member : lsMembers) {
      if (member.localMember()) {
        handleListenerRegistrations(add,name,key,thisAddress,includeValue);
      }
 else {
        sendAddRemoveListener(member.getAddress(),add,name,key,includeValue);
      }
    }
  }
}
