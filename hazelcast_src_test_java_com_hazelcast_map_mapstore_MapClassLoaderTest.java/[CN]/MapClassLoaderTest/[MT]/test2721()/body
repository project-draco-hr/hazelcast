{
  Config config=new Config();
  MapConfig mapConfig=config.getMapConfig(MAP_NAME);
  final InMemoryMapStore store=new InMemoryMapStore(true,50,false);
  store.preload(PRE_LOAD_SIZE);
  MapStoreConfig mapStoreConfig=new MapStoreConfig();
  mapStoreConfig.setEnabled(true);
  mapStoreConfig.setInitialLoadMode(MapStoreConfig.InitialLoadMode.EAGER);
  mapStoreConfig.setWriteDelaySeconds(WRITE_DELAY_SECONDS);
  mapStoreConfig.setClassName(null);
  mapStoreConfig.setImplementation(store);
  mapConfig.setMapStoreConfig(mapStoreConfig);
  HazelcastInstance instance=Hazelcast.newHazelcastInstance(config);
  IMap<String,String> map=instance.getMap(MAP_NAME);
  int size=map.size();
  TreeMap<String,Boolean> contextClassLoaders=store.getContextClassLoaders();
  boolean anEmptyCtxClassLoaderExist=false;
  for (  Boolean hasCtxClassLoader : contextClassLoaders.values()) {
    if (!hasCtxClassLoader.booleanValue()) {
      anEmptyCtxClassLoaderExist=true;
      break;
    }
  }
  assertFalse(anEmptyCtxClassLoaderExist);
}
