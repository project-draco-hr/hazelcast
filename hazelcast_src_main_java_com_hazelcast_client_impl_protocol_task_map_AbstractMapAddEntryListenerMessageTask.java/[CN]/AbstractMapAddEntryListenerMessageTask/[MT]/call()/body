{
  final ClientEndpoint endpoint=getEndpoint();
  final MapService mapService=getService(MapService.SERVICE_NAME);
  EntryAdapter<Object,Object> listener=new MapListener();
  MapServiceContext mapServiceContext=mapService.getMapServiceContext();
  final String name=getDistributedObjectName();
  final String registrationId=mapServiceContext.addEventListener(listener,getEventFilter(),name);
  endpoint.setListenerRegistration(MapService.SERVICE_NAME,name,registrationId);
  return AddListenerResultParameters.encode(registrationId);
}
