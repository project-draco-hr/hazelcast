{
  ClusterServiceImpl service=getService();
  service.addMembershipListener(new MembershipListener(){
    public void memberAdded(    MembershipEvent membershipEvent){
      final MemberImpl member=(MemberImpl)membershipEvent.getMember();
      getClientEngine().sendResponse(getEndpoint(),new ClientMembershipEvent(member,true));
    }
    public void memberRemoved(    MembershipEvent membershipEvent){
      final MemberImpl member=(MemberImpl)membershipEvent.getMember();
      getClientEngine().sendResponse(getEndpoint(),new ClientMembershipEvent(member,false));
    }
  }
);
  final Collection<MemberImpl> memberList=service.getMemberList();
  final Collection<Data> response=new ArrayList<Data>(memberList.size());
  final SerializationService serializationService=getClientEngine().getSerializationService();
  for (  MemberImpl member : memberList) {
    response.add(serializationService.toData(member));
  }
  return new SerializableCollection(response);
}
