{
  if (byteOrder == null) {
    byteOrder=ByteOrder.BIG_ENDIAN;
  }
  if (useNativeByteOrder || byteOrder == ByteOrder.nativeOrder()) {
    byteOrder=ByteOrder.nativeOrder();
    if (allowUnsafe && UnsafeInputOutputFactory.unsafeAvailable()) {
      return new UnsafeInputOutputFactory();
    }
  }
  if (byteOrder == ByteOrder.BIG_ENDIAN) {
    return new ByteArrayInputOutputFactory();
  }
  return new ByteBufferInputOutputFactory(byteOrder);
}
