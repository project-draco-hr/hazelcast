{
  Long key=generateKey(name,timeout);
  ThreadContext threadContext=ThreadContext.get();
  TransactionImpl txn=threadContext.getCallContext().getTransaction();
  if (key != -1) {
    if (txn != null && txn.getStatus() == Transaction.TXN_STATUS_ACTIVE) {
      txn.attachPutOp(name,key,obj,timeout,true);
    }
 else {
      storeQueueItem(name,key,obj,index);
    }
    return true;
  }
  return false;
}
