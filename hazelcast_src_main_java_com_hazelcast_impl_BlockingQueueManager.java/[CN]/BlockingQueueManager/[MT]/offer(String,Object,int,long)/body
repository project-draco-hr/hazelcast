{
  Long key=generateKey(name,timeout);
  ThreadContext threadContext=ThreadContext.get();
  TransactionImpl txn=threadContext.getCallContext().getTransaction();
  if (key != -1) {
    final Data dataItem=toData(obj);
    if (txn != null && txn.getStatus() == Transaction.TXN_STATUS_ACTIVE) {
      txn.attachPutOp(name,key,dataItem,timeout,true);
    }
 else {
      storeQueueItem(name,key,dataItem,index);
      final BQ bq=getBQ(name);
      if (bq != null && bq.mapListeners.size() > 0) {
        enqueueAndReturn(new Processable(){
          public void process(){
            fireMapEvent(bq.mapListeners,name,EntryEvent.TYPE_ADDED,dataItem,thisAddress);
          }
        }
);
      }
    }
    return true;
  }
  return false;
}
