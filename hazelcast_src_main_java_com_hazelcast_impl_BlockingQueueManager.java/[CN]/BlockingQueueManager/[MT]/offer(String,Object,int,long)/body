{
  Long key=generateKey(name,timeout);
  ThreadContext threadContext=ThreadContext.get();
  TransactionImpl txn=threadContext.getCallContext().getTransaction();
  if (key != -1) {
    final Data dataItem=toData(obj);
    if (txn != null && txn.getStatus() == Transaction.TXN_STATUS_ACTIVE) {
      txn.attachPutOp(name,key,dataItem,timeout,true,index);
    }
 else {
      storeQueueItem(name,key,dataItem,index);
    }
    return true;
  }
  return false;
}
