{
  if (size() >= maxSize()) {
    if (req.hasEnoughTimeToSchedule()) {
      addOfferAction(new OfferAction(req));
    }
 else {
      req.response=-1L;
      returnResponse(req);
    }
  }
 else {
    generateKeyAndLease(req);
    returnResponse(req);
  }
}
