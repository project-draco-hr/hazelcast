{
  int index=(int)req.longValue;
  Data key=req.key;
  Data oldKey=null;
  boolean added=false;
  if (queue.size() >= index) {
    queue.add(new QData(key));
    added=true;
  }
 else {
    QData old=queue.set(index,new QData(key));
    if (isValid(old,Clock.currentTimeMillis())) {
      oldKey=old.data;
    }
 else {
      added=true;
    }
  }
  if (added) {
    takeOne();
  }
  req.response=oldKey;
  returnResponse(req);
}
