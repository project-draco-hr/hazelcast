{
  QueueConfig qconfig=node.getConfig().getQueueConfig(name.substring(Prefix.QUEUE.length()));
  maxSizePerJVM=(qconfig.getMaxSizePerJVM() == 0) ? Integer.MAX_VALUE : qconfig.getMaxSizePerJVM();
  maxAge=(qconfig.getTimeToLiveSeconds() == 0) ? Integer.MAX_VALUE : TimeUnit.SECONDS.toMillis(qconfig.getTimeToLiveSeconds());
  logger.log(Level.FINEST,name + ".maxSizePerJVM=" + maxSizePerJVM);
  logger.log(Level.FINEST,name + ".maxAge=" + maxAge);
  this.name=name;
  final int blocksLimit=10;
  lsBlocks=new ArrayList<Block>(blocksLimit);
  Address master=getMasterAddress();
  if (master == null) {
    throw new IllegalStateException("Master is " + master);
  }
  if (master.isThisAddress()) {
    Block block=createBlock(master,0);
    addBlock(block);
    sendAddBlockMessageToOthers(block,-1,null,true);
    for (int i=1; i < blocksLimit; i++) {
      int blockId=i;
      Address target=nextTarget();
      block=createBlock(target,blockId);
      addBlock(block);
      sendAddBlockMessageToOthers(block,-1,null,true);
    }
  }
}
