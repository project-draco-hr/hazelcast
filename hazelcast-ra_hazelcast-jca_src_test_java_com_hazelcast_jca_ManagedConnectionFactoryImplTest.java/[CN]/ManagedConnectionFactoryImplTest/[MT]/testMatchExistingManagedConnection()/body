{
  ResourceAdapterImpl mockResourceAdapter=mock(ResourceAdapterImpl.class);
  when(mockResourceAdapter.getHazelcastInstance()).thenReturn(null);
  ((ManagedConnectionFactoryImpl)connectionFactory).setResourceAdapter(mockResourceAdapter);
  ((ManagedConnectionFactoryImpl)connectionFactory).setConnectionTracingEvents(null);
  HashSet<ManagedConnection> managedConnections=new HashSet<ManagedConnection>();
  for (int i=0; i < 9; i++) {
    ConnectionRequestInfo cxInfo=mock(ConnectionRequestInfo.class);
    managedConnections.add(connectionFactory.createManagedConnection(null,cxInfo));
  }
  ManagedConnection nullSecurityConnection=connectionFactory.createManagedConnection(null,null);
  managedConnections.add(nullSecurityConnection);
  ManagedConnection retConnection=connectionFactory.matchManagedConnections(managedConnections,null,null);
  assertSame(retConnection,nullSecurityConnection);
}
