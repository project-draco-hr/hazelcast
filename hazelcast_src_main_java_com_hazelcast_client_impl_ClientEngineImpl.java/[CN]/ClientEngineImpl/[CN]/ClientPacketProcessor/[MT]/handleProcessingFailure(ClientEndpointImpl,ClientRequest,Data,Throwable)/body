{
  Level level=nodeEngine.isActive() ? Level.SEVERE : Level.FINEST;
  if (logger.isLoggable(level)) {
    if (request == null) {
      logger.log(level,e.getMessage(),e);
    }
 else {
      logger.log(level,"While executing request: " + request + " -> "+ e.getMessage(),e);
    }
  }
  if (request != null && endpoint != null) {
    endpoint.sendResponse(e,request.getCallId());
  }
 else   if (data != null && endpoint != null) {
    int callId=extractCallId(data);
    if (callId != -1) {
      endpoint.sendResponse(e,callId);
    }
  }
}
