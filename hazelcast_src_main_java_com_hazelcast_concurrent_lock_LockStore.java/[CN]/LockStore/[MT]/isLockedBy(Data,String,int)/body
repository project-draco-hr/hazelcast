{
  LockInfo lock=locks.get(key);
  return lock != null && lock.isLockedBy(caller,threadId);
}
