{
  if (factory == null) {
    ILogger logger=Logger.getLogger(ThreadContext.class.getName());
    logger.log(Level.SEVERE,"Factory is null",new Throwable());
  }
  final String factoryKey=factory != null ? factory.getName() : "null";
  HazelcastInstanceThreadContext hic=mapHazelcastInstanceContexts.get(factoryKey);
  if (hic != null)   return hic;
  hic=new HazelcastInstanceThreadContext(factory);
  mapHazelcastInstanceContexts.put(factoryKey,hic);
  return hic;
}
