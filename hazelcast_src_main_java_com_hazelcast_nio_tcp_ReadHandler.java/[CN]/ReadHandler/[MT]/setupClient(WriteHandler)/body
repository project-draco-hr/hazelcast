{
  final ByteBuffer clientTypeBuffer=ByteBuffer.allocate(3);
  int size;
  do {
    size=socketChannel.read(clientTypeBuffer);
  }
 while (size < 3);
  clientTypeBuffer.flip();
  SocketClientDataReaderNew reader=new SocketClientDataReaderNew(connection);
  if (reader.setConnectionType(clientTypeBuffer)) {
    socketReader=reader;
    writeHandler.setProtocol(Protocols.CLIENT_BINARY);
  }
}
