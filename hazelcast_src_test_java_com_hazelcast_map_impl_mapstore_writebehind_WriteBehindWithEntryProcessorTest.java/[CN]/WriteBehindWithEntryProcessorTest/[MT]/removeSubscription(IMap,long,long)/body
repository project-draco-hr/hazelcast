{
  map.executeOnKey(customerId,new AbstractEntryProcessor(){
    @Override public Object process(    Map.Entry entry){
      final Customer customer=(Customer)entry.getValue();
      customer.removeSubscription(productId);
      entry.setValue(customer);
      return customer.getSubscriptions().size();
    }
  }
);
}
