{
  System.setProperty(SerializationUtil.PROP_DEFAULT_SERIALIZER_OVERRIDE,"true");
  resetConfigField();
  SerializationConfig config=new SerializationConfig();
  FooXmlSerializer serializer=new FooXmlSerializer();
  SerializerConfig sc=new SerializerConfig().setImplementation(serializer).setTypeClass(FooDataSerializable.class);
  config.addSerializerConfig(sc);
  SerializationService ss=new DefaultSerializationServiceBuilder().setConfig(config).build();
  FooDataSerializable foo=new FooDataSerializable("foo");
  ss.toData(foo);
  assertTrue(SerializationUtil.isDefaultSerializerOverride());
  assertEquals(0,foo.serializationCount.get());
  assertEquals(1,serializer.serializationCount.get());
}
