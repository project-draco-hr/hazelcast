{
  System.clearProperty(SerializationUtil.PROP_DEFAULT_SERIALIZER_OVERRIDE);
  resetConfigField();
  SerializationConfig config=new SerializationConfig();
  FooXmlSerializer serializer=new FooXmlSerializer();
  SerializerConfig sc=new SerializerConfig().setImplementation(serializer).setTypeClass(FooDataSerializable.class);
  config.addSerializerConfig(sc);
  SerializationService ss=new DefaultSerializationServiceBuilder().setConfig(config).build();
  FooDataSerializable foo=new FooDataSerializable("foo");
  ss.toData(foo);
  assertFalse(SerializationUtil.isDefaultSerializerOverride());
  assertEquals(1,foo.serializationCount.get());
  assertEquals(0,serializer.serializationCount.get());
}
