{
  DataOutput dataOut=new DataOutputStream(IOUtil.newOutputStream(destination));
  totalWritten+=IOUtil.copyToHeapBuffer(response,destination);
  if (hasBuffer()) {
    for (    Data buffer : buffers) {
      try {
        buffer.writeData(dataOut);
      }
 catch (      IOException e) {
        e.printStackTrace();
      }
      totalWritten+=buffer.totalSize();
    }
    totalWritten+=IOUtil.copyToHeapBuffer(ByteBuffer.wrap("\r\n".getBytes()),destination);
  }
  return totalWritten >= totalSize;
}
