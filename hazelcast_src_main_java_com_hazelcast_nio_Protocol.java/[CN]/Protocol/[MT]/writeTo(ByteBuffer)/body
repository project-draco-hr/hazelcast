{
  totalWritten+=IOUtil.copyToHeapBuffer(response,destination);
  if (hasBuffer()) {
    for (    Data buffer : buffers) {
      ByteArrayOutputStream backing=new ByteArrayOutputStream(buffer.totalSize());
      DataOutput foo=new DataOutputStream(backing);
      try {
        buffer.writeData(foo);
      }
 catch (      IOException e) {
        e.printStackTrace();
      }
      totalWritten+=IOUtil.copyToHeapBuffer(ByteBuffer.wrap(backing.toByteArray()),destination);
    }
    totalWritten+=IOUtil.copyToHeapBuffer(ByteBuffer.wrap("\r\n".getBytes()),destination);
  }
  return totalWritten >= totalSize;
}
