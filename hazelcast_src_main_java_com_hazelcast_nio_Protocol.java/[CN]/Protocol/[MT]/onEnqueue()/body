{
  StringBuilder builder=new StringBuilder();
  if (threadId != -1)   builder.append(threadId).append(SPACE);
  builder.append(command.toString());
  if (flag != null) {
    builder.append(SPACE).append(flag);
  }
  for (  String arg : args) {
    builder.append(SPACE).append(arg);
  }
  if (hasBuffer()) {
    builder.append(SPACE).append("#").append(buffers == null ? 0 : buffers.length);
    builder.append(NEWLINE);
    int i=buffers.length;
    for (    Data buffer : buffers) {
      builder.append(buffer == null ? 0 : buffer.totalSize());
      if (--i != 0) {
        builder.append(SPACE);
      }
    }
  }
  builder.append(NEWLINE);
  response=ByteBuffer.wrap(builder.toString().getBytes());
  totalSize=response.array().length;
  if (hasBuffer()) {
    totalSize+=2;
  }
}
