{
  for (  Map.Entry<Integer,ResponseQueue> responseQueueEntry : responses.entrySet()) {
    final ResponseQueue queue=responseQueueEntry.getValue();
    final Integer key=responseQueueEntry.getKey();
    final Object result=queue.get();
    if (result instanceof NormalResponse) {
      results.put(key,((NormalResponse)result).getValue());
    }
 else {
      results.put(key,result);
    }
  }
}
