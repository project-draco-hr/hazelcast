{
  Deflater deflater=new Deflater();
  deflater.setLevel(Deflater.DEFAULT_COMPRESSION);
  deflater.setStrategy(Deflater.FILTERED);
  deflater.setInput(input);
  deflater.finish();
  byte[] buf=new byte[COMPRESSION_BUFFER_LENGTH];
  while (!deflater.finished()) {
    int count=deflater.deflate(buf);
    out.write(buf,0,count);
  }
  deflater.end();
}
