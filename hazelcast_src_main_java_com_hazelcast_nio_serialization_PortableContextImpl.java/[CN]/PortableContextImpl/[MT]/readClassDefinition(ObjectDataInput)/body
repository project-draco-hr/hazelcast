{
  int factoryId=in.readInt();
  int classId=in.readInt();
  int version=in.readInt();
  if (classId == 0) {
    throw new IllegalArgumentException("Portable class id cannot be zero!");
  }
  ClassDefinitionImpl cd=new ClassDefinitionImpl(factoryId,classId,version);
  int len=in.readShort();
  for (int i=0; i < len; i++) {
    FieldDefinitionImpl fd=readFieldDefinition(in);
    cd.addFieldDef(fd);
  }
  return cd;
}
