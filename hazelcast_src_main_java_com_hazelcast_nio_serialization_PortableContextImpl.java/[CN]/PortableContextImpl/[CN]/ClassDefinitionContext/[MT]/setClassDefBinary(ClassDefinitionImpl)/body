{
  if (cd.getBinary() == null) {
    final BufferObjectDataOutput out=serializationService.pop();
    try {
      cd.writeData(out);
      final byte[] binary=out.toByteArray();
      out.clear();
      compress(binary,out);
      cd.setBinary(out.toByteArray());
    }
 catch (    IOException e) {
      throw new HazelcastSerializationException(e);
    }
 finally {
      serializationService.push(out);
    }
  }
}
