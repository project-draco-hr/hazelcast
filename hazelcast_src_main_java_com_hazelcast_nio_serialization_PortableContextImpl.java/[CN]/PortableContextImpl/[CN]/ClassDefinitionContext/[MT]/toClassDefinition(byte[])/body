{
  if (compressedBinary == null || compressedBinary.length == 0) {
    throw new IOException("Illegal class-definition binary! ");
  }
  BufferObjectDataOutput out=serializationService.pop();
  byte[] binary;
  try {
    decompress(compressedBinary,out);
    binary=out.toByteArray();
  }
  finally {
    serializationService.push(out);
  }
  ClassDefinitionImpl cd=(ClassDefinitionImpl)readDirect(serializationService.createObjectDataInput(binary));
  if (cd.getVersion() < 0) {
    throw new IOException("ClassDefinition version cannot be negative! -> " + cd);
  }
  cd.setBinary(compressedBinary);
  return cd;
}
