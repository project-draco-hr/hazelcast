{
  if (compressedBinary == null || compressedBinary.length == 0) {
    throw new IOException("Illegal class-definition binary! ");
  }
  final BufferObjectDataOutput out=serializationService.pop();
  final byte[] binary;
  try {
    decompress(compressedBinary,out);
    binary=out.toByteArray();
  }
  finally {
    serializationService.push(out);
  }
  final ClassDefinitionImpl cd=new ClassDefinitionImpl();
  cd.readData(serializationService.createObjectDataInput(binary));
  if (cd.getVersion() < 0) {
    throw new IOException("ClassDefinition version cannot be negative! -> " + cd);
  }
  cd.setBinary(compressedBinary);
  return register(cd);
}
