{
  final int utflen=in.readShort();
  int count=0;
  int charArrCount=beginIndex;
  while (count < utflen) {
    int c=buffered(buffer,count++,utflen,in) & 0xff;
switch (c >> 4) {
case 0:
case 1:
case 2:
case 3:
case 4:
case 5:
case 6:
case 7:
      decodeOneByteChar(data,charArrCount,c);
    break;
case 12:
case 13:
  count=decodeTwoBytesChar(data,charArrCount,c,in,buffer,utflen,count);
break;
case 14:
count=decodeThreeBytesChar(data,charArrCount,c,in,buffer,utflen,count);
break;
default :
throw new UTFDataFormatException("malformed input around byte " + count);
}
charArrCount++;
}
}
