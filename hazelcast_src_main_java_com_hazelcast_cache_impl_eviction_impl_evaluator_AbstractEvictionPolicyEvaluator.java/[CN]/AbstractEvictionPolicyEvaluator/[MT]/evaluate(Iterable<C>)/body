{
  C evictionCandidate=null;
  long now=Clock.currentTimeMillis();
  for (  C candidate : evictionCandidates) {
    if (evictionCandidate == null) {
      evictionCandidate=candidate;
    }
 else {
      Evictable evictable=candidate.getEvictable();
      if (evictable == null) {
        continue;
      }
      if (evictable instanceof Expirable) {
        Expirable expirable=(Expirable)evictable;
        if (expirable.isExpiredAt(now)) {
          if (candidate instanceof Iterable) {
            return (Iterable<C>)candidate;
          }
 else {
            return Collections.singleton(candidate);
          }
        }
      }
      Evictable selected=selectEvictableAsPolicy(evictionCandidate.getEvictable(),evictable);
      if (selected == evictable) {
        evictionCandidate=candidate;
      }
    }
  }
  if (evictionCandidate == null) {
    return null;
  }
 else {
    if (evictionCandidate instanceof Iterable) {
      return (Iterable<C>)evictionCandidate;
    }
 else {
      return Collections.singleton(evictionCandidate);
    }
  }
}
