{
  C evictionCandidate=null;
  long now=Clock.currentTimeMillis();
  for (  C candidate : evictionCandidates) {
    if (evictionCandidate == null) {
      evictionCandidate=candidate;
    }
 else {
      Evictable evictable=candidate.getEvictable();
      if (evictable == null) {
        continue;
      }
      if (evictable instanceof Expirable) {
        Expirable expirable=(Expirable)evictable;
        if (expirable.isExpiredAt(now)) {
          return candidate instanceof Iterable ? (Iterable<C>)candidate : Collections.singleton(candidate);
        }
      }
      Evictable selected=selectEvictableAsPolicy(evictionCandidate.getEvictable(),evictable);
      if (selected == evictable) {
        evictionCandidate=candidate;
      }
    }
  }
  if (evictionCandidate == null) {
    return null;
  }
 else {
    return evictionCandidate instanceof Iterable ? (Iterable<C>)evictionCandidate : Collections.singleton(evictionCandidate);
  }
}
