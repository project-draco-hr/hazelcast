{
  HazelcastClient hClient=getHazelcastClient();
  final ISet<String> set=hClient.getSet("addRemoveItemListenerSet");
  final CountDownLatch addLatch=new CountDownLatch(2);
  final CountDownLatch removeLatch=new CountDownLatch(2);
  ItemListener<String> listener=new CountDownItemListener<String>(addLatch,removeLatch);
  set.addItemListener(listener,true);
  set.add("hello");
  set.add("hello");
  set.remove("hello");
  set.remove("hello");
  for (int i=0; i < 100; i++) {
    if (removeLatch.getCount() != 1 || addLatch.getCount() != 1) {
      Thread.sleep(50);
    }
 else {
      break;
    }
  }
  assertEquals(1,removeLatch.getCount());
  assertEquals(1,addLatch.getCount());
  set.removeItemListener(listener);
  set.add("hello");
  set.add("hello");
  set.remove("hello");
  set.remove("hello");
  Thread.sleep(50);
  assertEquals(1,addLatch.getCount());
  assertEquals(1,removeLatch.getCount());
}
