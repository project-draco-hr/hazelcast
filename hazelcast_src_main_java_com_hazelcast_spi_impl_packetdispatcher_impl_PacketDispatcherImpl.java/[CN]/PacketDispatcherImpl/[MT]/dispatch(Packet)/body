{
  try {
    if (packet.isFlagSet(FLAG_OP)) {
      if (packet.isFlagSet(FLAG_RESPONSE)) {
        responseHandler.handle(packet);
      }
 else {
        operationExecutor.handle(packet);
      }
    }
 else     if (packet.isFlagSet(FLAG_EVENT)) {
      eventPacketHandler.handle(packet);
    }
 else     if (packet.isFlagSet(FLAG_BIND)) {
      connectionPacketHandler.handle(packet);
    }
 else {
      logger.severe("Unknown packet type! Header: " + packet.getFlags());
    }
  }
 catch (  Throwable t) {
    inspectOutputMemoryError(t);
    logger.severe("Failed to process:" + packet,t);
  }
}
