{
  if (service == null) {
    final String name=serviceName != null ? serviceName : getServiceName();
    service=((NodeEngineImpl)nodeEngine).getService(name);
    if (service == null) {
      if (nodeEngine.isRunning()) {
        throw new HazelcastException("Service with name '" + name + "' not found!");
      }
 else {
        throw new RetryableHazelcastException("HazelcastInstance[" + nodeEngine.getThisAddress() + "] is not active!");
      }
    }
  }
  return (T)service;
}
