{
  HazelcastInstance h1=Hazelcast.newHazelcastInstance(config);
  HazelcastInstance h2=Hazelcast.newHazelcastInstance(config);
  Map<Integer,HazelcastInstance> memberMap=getMapOfClusterMembers(h1,h2);
  client=newHazelcastClient(h1,h2);
  IMap<String,String> clientMap=client.getMap("default");
  IMap<String,String> map1=h1.getMap("default");
  IMap<String,String> map2=h2.getMap("default");
  final CountDownLatch entryAddLatch=new CountDownLatch(2);
  final CountDownLatch entryUpdatedLatch=new CountDownLatch(2);
  final CountDownLatch entryRemovedLatch=new CountDownLatch(2);
  CountDownLatchEntryListener<String,String> listener=new CountDownLatchEntryListener<String,String>(entryAddLatch,entryUpdatedLatch,entryRemovedLatch);
  clientMap.addEntryListener(listener,true);
  map1.put("hello","world");
  map1.put("hello","new world");
  map1.remove("hello");
  memberMap.remove(client.getConnectionManager().getConnection().getAddress().getPort()).shutdown();
  clientMap.size();
  clientMap.put("hello","world");
  clientMap.put("hello","new world");
  clientMap.remove("hello");
  assertTrue(entryAddLatch.await(10,SECONDS));
  assertTrue(entryUpdatedLatch.await(10,SECONDS));
  assertTrue(entryRemovedLatch.await(10,SECONDS));
}
