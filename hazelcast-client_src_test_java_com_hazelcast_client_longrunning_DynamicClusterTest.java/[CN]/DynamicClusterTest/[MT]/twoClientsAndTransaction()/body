{
  Config config1=new XmlConfigBuilder().build();
  config1.setProperty(GroupProperties.PROP_WAIT_SECONDS_BEFORE_JOIN,"1");
  Config config2=new XmlConfigBuilder().build();
  config2.setProperty(GroupProperties.PROP_WAIT_SECONDS_BEFORE_JOIN,"1");
  GroupConfig gConfig1=new GroupConfig("g1","pg1");
  GroupConfig gConfig2=new GroupConfig("g2","pg2");
  config1.setGroupConfig(gConfig1);
  config2.setGroupConfig(gConfig2);
  HazelcastInstance h1=Hazelcast.newHazelcastInstance(config1);
  HazelcastInstance h2=Hazelcast.newHazelcastInstance(config2);
  HazelcastInstance client1=newHazelcastClient(h1);
  HazelcastInstance client2=newHazelcastClient(h2);
  Transaction t1=client1.getTransaction();
  Transaction t2=client2.getTransaction();
  t1.begin();
  client1.getMap("map").put(1,4);
  t1.commit();
  client1.shutdown();
  client2.shutdown();
  h1.shutdown();
  h2.shutdown();
}
