{
  HazelcastInstance h=Hazelcast.newHazelcastInstance(config);
  List list=h.getList("testGetInstancesCreatedFromCluster");
  Map map=h.getMap("testGetInstancesCreatedFromCluster");
  MultiMap mmap=h.getMultiMap("testGetInstancesCreatedFromCluster");
  Queue q=h.getQueue("testGetInstancesCreatedFromCluster");
  Set set=h.getSet("testGetInstancesCreatedFromCluster");
  ITopic topic=h.getTopic("testGetInstancesCreatedFromCluster");
  ILock lock=h.getLock("testGetInstancesCreatedFromCluster");
  List listOfInstances=new ArrayList();
  listOfInstances.add(list);
  listOfInstances.add(map);
  listOfInstances.add(mmap);
  listOfInstances.add(q);
  listOfInstances.add(set);
  listOfInstances.add(topic);
  listOfInstances.add(lock);
  client=newHazelcastClient(h);
  Collection<Instance> caches=client.getInstances();
  assertEquals(listOfInstances.size(),caches.size());
  for (Iterator<Instance> instanceIterator=caches.iterator(); instanceIterator.hasNext(); ) {
    Instance instance=instanceIterator.next();
    assertTrue(instance.getId().toString().endsWith("testGetInstancesCreatedFromCluster"));
    assertTrue(listOfInstances.contains(instance));
  }
  h.shutdown();
}
