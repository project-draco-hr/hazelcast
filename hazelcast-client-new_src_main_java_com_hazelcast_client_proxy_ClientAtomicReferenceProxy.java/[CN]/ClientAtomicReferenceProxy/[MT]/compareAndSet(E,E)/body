{
  ClientMessage request=AtomicReferenceCompareAndSetCodec.encodeRequest(name,toData(expect),toData(update));
  ClientMessage response=invoke(request);
  return AtomicReferenceCompareAndSetCodec.decodeResponse(response).response;
}
