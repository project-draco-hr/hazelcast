{
  final CacheConfig<Integer,Integer> config=new CacheConfig<Integer,Integer>();
  final List<EventCollectingCachePartitionLostListener> listeners=new ArrayList<EventCollectingCachePartitionLostListener>();
  for (int i=0; i < getNodeCount(); i++) {
    final EventCollectingCachePartitionLostListener listener=new EventCollectingCachePartitionLostListener(i);
    listeners.add(listener);
    config.setBackupCount(i);
    final Cache<Integer,Integer> cache=cacheManager.createCache(getIthCacheName(i),config);
    final ICache iCache=cache.unwrap(ICache.class);
    iCache.addPartitionLostListener(listener);
  }
  return listeners;
}
