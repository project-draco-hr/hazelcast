{
  SerializationService ss=new SerializationServiceBuilder().setUseNativeByteOrder(false).setAllowUnsafe(allowUnsafe).setByteOrder(byteOrder).build();
  final Person person=new Person(111,123L,89.56d,"test-person",new Address("street",987));
  ByteArrayOutputStream bout=new ByteArrayOutputStream();
  ObjectDataOutput out=ss.createObjectDataOutputStream(bout,byteOrder);
  out.writeObject(person);
  byte[] data1=bout.toByteArray();
  ObjectDataOutput out2=ss.createObjectDataOutput(1024);
  out2.writeObject(person);
  byte[] data2=out2.toByteArray();
  assertEquals(data1.length,data2.length);
  assertTrue(Arrays.equals(data1,data2));
  final ByteArrayInputStream bin=new ByteArrayInputStream(data2);
  final ObjectDataInput in=ss.createObjectDataInputStream(bin,byteOrder);
  final Person person1=in.readObject();
  final ObjectDataInput in2=ss.createObjectDataInput(data1);
  final Person person2=in2.readObject();
  assertEquals(person,person1);
  assertEquals(person,person2);
}
