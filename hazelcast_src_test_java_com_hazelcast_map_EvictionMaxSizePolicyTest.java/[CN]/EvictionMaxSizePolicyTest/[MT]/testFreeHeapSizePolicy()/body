{
  final int freeHeapMinSizeInMegaBytes=(int)(Runtime.getRuntime().maxMemory() / 1024 / 1024 - 1);
  final int nodeCount=1;
  final String mapName=randomMapName();
  final Config config=createConfig(MaxSizeConfig.MaxSizePolicy.FREE_HEAP_SIZE,freeHeapMinSizeInMegaBytes,mapName);
  final Collection<IMap> maps=createMaps(mapName,config,nodeCount);
  setTestSizeEstimator(maps,1);
  testMaxSizePolicy(maps,100);
  assertUsedHeapSizePolicyWorks(maps,freeHeapMinSizeInMegaBytes);
}
