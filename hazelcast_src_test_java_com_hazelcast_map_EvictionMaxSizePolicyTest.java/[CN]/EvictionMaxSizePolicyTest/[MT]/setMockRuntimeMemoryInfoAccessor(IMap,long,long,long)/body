{
  final MapProxyImpl mapProxy=(MapProxyImpl)map;
  final MapService mapService=(MapService)mapProxy.getService();
  final MapServiceContext mapServiceContext=mapService.getMapServiceContext();
  final DefaultMapServiceContext defaultMapServiceContext=(DefaultMapServiceContext)mapServiceContext;
  final EvictionOperator evictionOperator=EvictionOperator.create(new MemoryInfoAccessor(){
    @Override public long getTotalMemory(){
      return MemoryUnit.MEGABYTES.toBytes(totalMemoryMB);
    }
    @Override public long getFreeMemory(){
      return MemoryUnit.MEGABYTES.toBytes(freeMemoryMB);
    }
    @Override public long getMaxMemory(){
      return MemoryUnit.MEGABYTES.toBytes(maxMemoryMB);
    }
  }
,mapServiceContext);
  defaultMapServiceContext.setEvictionOperator(evictionOperator);
}
