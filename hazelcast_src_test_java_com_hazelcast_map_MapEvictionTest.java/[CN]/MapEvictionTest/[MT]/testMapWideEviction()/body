{
  int size=10000;
  Config cfg=new Config();
  MapConfig mc=cfg.getMapConfig("testMapWideEviction");
  mc.setEvictionPolicy(MapConfig.EvictionPolicy.LRU);
  mc.setEvictionPercentage(10);
  MaxSizeConfig msc=new MaxSizeConfig();
  msc.setMaxSizePolicy(MaxSizeConfig.MaxSizePolicy.PER_INSTANCE);
  msc.setSize(size);
  mc.setMaxSizeConfig(msc);
  HazelcastInstance[] instances=StaticNodeFactory.newInstances(cfg,2);
  IMap map=instances[0].getMap("testMapWideEviction");
  for (int i=0; i < size; i++) {
    map.put(i,i);
  }
  Thread.sleep(2000);
  assertTrue((map.size() / 2) <= (size * (100 - mc.getEvictionPercentage()) / 100));
  Hazelcast.shutdownAll();
}
