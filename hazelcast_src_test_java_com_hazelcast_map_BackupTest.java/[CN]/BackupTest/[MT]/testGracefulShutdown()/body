{
  int size=250000;
  StaticNodeFactory nodeFactory=createNodeFactory(5);
  final Config config=new Config();
  config.setProperty(GroupProperties.PROP_PARTITION_COUNT,"1111");
  HazelcastInstance h1=nodeFactory.newHazelcastInstance(config);
  IMap m1=h1.getMap("default");
  for (int i=0; i < size; i++) {
    m1.put(i,i);
  }
  HazelcastInstance h2=nodeFactory.newHazelcastInstance(config);
  IMap m2=h2.getMap("default");
  h1.getLifecycleService().shutdown();
  assertEquals(size,m2.size());
  HazelcastInstance h3=nodeFactory.newHazelcastInstance(config);
  IMap m3=h3.getMap("default");
  h2.getLifecycleService().shutdown();
  assertEquals(size,m3.size());
  HazelcastInstance h4=nodeFactory.newHazelcastInstance(config);
  IMap m4=h4.getMap("default");
  h3.getLifecycleService().shutdown();
  assertEquals(size,m4.size());
}
