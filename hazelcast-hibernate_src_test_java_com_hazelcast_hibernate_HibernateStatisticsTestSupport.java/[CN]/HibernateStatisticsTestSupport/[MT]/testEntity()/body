{
  final HazelcastInstance hz=getHazelcastInstance();
  assertNotNull(hz);
  assertEquals(Hazelcast.getDefaultInstance(),hz);
  final int count=100;
  insertDummyEntities(count);
  sleep(1);
  List<DummyEntity> list=new ArrayList<DummyEntity>(count);
  Session session=sf.openSession();
  try {
    for (int i=0; i < count; i++) {
      DummyEntity e=(DummyEntity)session.get(DummyEntity.class,new Long(i));
      session.evict(e);
      list.add(e);
    }
  }
  finally {
    session.close();
  }
  session=sf.openSession();
  Transaction tx=session.beginTransaction();
  try {
    for (    DummyEntity dummy : list) {
      dummy.setDate(new Date());
      session.update(dummy);
    }
    tx.commit();
  }
 catch (  Exception e) {
    tx.rollback();
    e.printStackTrace();
  }
 finally {
    session.close();
  }
  Map<?,?> cache=hz.getMap(DummyEntity.class.getName());
  assertEquals(count,stats.getEntityInsertCount());
  assertEquals(count * 2,stats.getSecondLevelCachePutCount());
  assertEquals(0,stats.getEntityLoadCount());
  assertEquals(count,stats.getSecondLevelCacheHitCount());
  assertEquals(0,stats.getSecondLevelCacheMissCount());
  assertEquals(count,cache.size());
  sf.getCache().evictEntityRegion(DummyEntity.class);
  assertEquals(0,cache.size());
  stats.logSummary();
}
