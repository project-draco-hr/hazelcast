{
  Config c=new Config();
  c.getGroupConfig().setName("testIssue304EvictionDespitePut");
  final HashMap<String,MapConfig> mapConfigs=new HashMap<String,MapConfig>();
  final MapConfig value=new MapConfig();
  value.setMaxIdleSeconds(3);
  mapConfigs.put("default",value);
  c.setMapConfigs(mapConfigs);
  final Properties properties=new Properties();
  properties.setProperty("hazelcast.map.cleanup.delay.seconds","1");
  c.setProperties(properties);
  int n=1;
  TestHazelcastInstanceFactory factory=createHazelcastInstanceFactory(n);
  final HazelcastInstance hazelcastInstance=factory.newHazelcastInstance(c);
  IMap<String,Long> map=hazelcastInstance.getMap("testIssue304EvictionDespitePutMap");
  final AtomicInteger evictCount=new AtomicInteger(0);
  map.addEntryListener(new EntryListener<String,Long>(){
    public void entryAdded(    EntryEvent<String,Long> event){
    }
    public void entryRemoved(    EntryEvent<String,Long> event){
    }
    public void entryUpdated(    EntryEvent<String,Long> event){
    }
    public void entryEvicted(    EntryEvent<String,Long> event){
      evictCount.incrementAndGet();
    }
  }
,true);
  String key="key";
  for (int i=0; i < 5; i++) {
    map.put(key,System.currentTimeMillis());
    Thread.sleep(1000);
  }
  assertEquals(evictCount.get(),0);
  assertNotNull(map.get(key));
  hazelcastInstance.getLifecycleService().shutdown();
}
