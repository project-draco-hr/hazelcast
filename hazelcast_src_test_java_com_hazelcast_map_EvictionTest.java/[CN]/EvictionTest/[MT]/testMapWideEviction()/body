{
  int size=10000;
  Config cfg=new Config();
  MapConfig mc=cfg.getMapConfig("testMapWideEviction");
  mc.setEvictionPolicy(MapConfig.EvictionPolicy.LRU);
  mc.setEvictionPercentage(25);
  MaxSizeConfig msc=new MaxSizeConfig();
  msc.setMaxSizePolicy(MaxSizeConfig.MaxSizePolicy.PER_NODE);
  msc.setSize(size);
  mc.setMaxSizeConfig(msc);
  int n=3;
  StaticNodeFactory factory=createNodeFactory(n);
  final HazelcastInstance[] instances=factory.newInstances(cfg);
  IMap map=instances[0].getMap("testMapWideEviction");
  for (int i=0; i < size; i++) {
    map.put(i,i);
  }
  Thread.sleep(1200);
  assertTrue(map.size() <= (size * n * (100 - mc.getEvictionPercentage()) / 100));
}
