{
  final int maxSize=1000;
  final int nodeCount=2;
  final String mapName=randomMapName();
  final Config config=newConfig(mapName,maxSize,MaxSizeConfig.MaxSizePolicy.PER_NODE);
  TestHazelcastInstanceFactory factory=createHazelcastInstanceFactory(nodeCount);
  final HazelcastInstance[] instances=factory.newInstances(config);
  IMap map=instances[0].getMap(mapName);
  for (int i=0; i < 2 * maxSize; i++) {
    map.put(i,i);
  }
  final long backupEntryCount=map.getLocalMapStats().getBackupEntryCount();
  final long ownedEntryCount=map.getLocalMapStats().getOwnedEntryCount();
  assertTrue(nodeCount * maxSize > ownedEntryCount + backupEntryCount);
}
