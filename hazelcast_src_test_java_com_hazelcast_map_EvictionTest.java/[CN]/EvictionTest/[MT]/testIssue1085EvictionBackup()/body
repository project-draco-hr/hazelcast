{
  Config config=new Config();
  config.getMapConfig("testIssue1085EvictionBackup").setTimeToLiveSeconds(3);
  HazelcastInstance[] instances=createHazelcastInstanceFactory(3).newInstances(config);
  int size=1000;
  final CountDownLatch latch=new CountDownLatch(size);
  final IMap map=instances[0].getMap("testIssue1085EvictionBackup");
  map.addEntryListener(new EntryAdapter(){
    @Override public void entryEvicted(    EntryEvent event){
      super.entryEvicted(event);
      latch.countDown();
    }
  }
,false);
  for (int i=0; i < size; i++) {
    map.put(i,i);
  }
  instances[1].shutdown();
  instances[2].shutdown();
  assertOpenEventually(latch);
  assertTrueEventually(new AssertTask(){
    public void run(){
      assertEquals(0,map.size());
    }
  }
);
}
