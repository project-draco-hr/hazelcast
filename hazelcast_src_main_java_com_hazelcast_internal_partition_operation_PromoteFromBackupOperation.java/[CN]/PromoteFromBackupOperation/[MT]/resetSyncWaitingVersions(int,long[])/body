{
  long[] versionsBeforeReset=null;
  for (int replicaIndex=1; replicaIndex <= versions.length; replicaIndex++) {
    if (versions[replicaIndex - 1] == InternalPartition.SYNC_WAITING) {
      if (versionsBeforeReset == null) {
        versionsBeforeReset=Arrays.copyOf(versions,versions.length);
      }
      versions[replicaIndex - 1]=0;
    }
  }
  if (logger.isFinestEnabled() && versionsBeforeReset != null) {
    logger.finest("Resetting all SYNC_WAITING Versions. partitionId=" + partitionId + " versionsBeforeReset="+ Arrays.toString(versionsBeforeReset));
  }
}
