{
  if (done) {
    return result;
  }
synchronized (this) {
    if (!done) {
      Packet packet;
      if (l < 0) {
        packet=queue.take();
      }
 else {
        packet=queue.poll(l,timeUnit);
      }
      try {
        this.result=handleResult(packet);
      }
 catch (      ExecutionException e) {
        throw new RuntimeException(e);
      }
      done=true;
    }
    return result;
  }
}
