{
  if (queue == null || queue.size() == 0) {
    return Collections.emptyList();
  }
  AtomicInteger flushCounter=getFlushCounter(recordStore);
  int flushCount=flushCounter.get();
  if (flushCount > 0) {
    return queue.get(flushCount);
  }
 else {
    return queue.filterItems(now);
  }
}
