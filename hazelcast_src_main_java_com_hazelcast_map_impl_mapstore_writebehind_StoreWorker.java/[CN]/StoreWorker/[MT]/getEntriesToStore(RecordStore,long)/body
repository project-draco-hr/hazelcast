{
  int numberOfEntriesToFlush=getNumberOfEntriesToFlush(recordStore);
  int initialCapacity=Math.max(numberOfEntriesToFlush,ARRAY_LIST_DEFAULT_CAPACITY);
  List<DelayedEntry> entries=new ArrayList<DelayedEntry>(initialCapacity);
  WriteBehindQueue<DelayedEntry> queue=getWriteBehindQueue(recordStore);
  filterWriteBehindQueue(now,numberOfEntriesToFlush,entries,queue);
  return entries;
}
