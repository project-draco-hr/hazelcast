{
  try {
    if (blCurrentPut != null && blCurrentPut.blockId == blockId) {
      blCurrentPut=null;
    }
    if (blCurrentTake != null && blCurrentTake.blockId == blockId) {
      blCurrentTake=null;
    }
    int size=lsBlocks.size();
    for (int i=0; i < size; i++) {
      Block b=lsBlocks.get(i);
      if (b.blockId == blockId) {
        blCurrentTake=null;
        return lsBlocks.remove(i);
      }
    }
    return null;
  }
  finally {
    if (blCurrentPut == null) {
      setCurrentPut();
    }
  }
}
