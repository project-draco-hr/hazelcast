{
  String mapName="testNearCacheEviction";
  NearCacheConfig nearCacheConfig=newNearCacheConfig();
  nearCacheConfig.setInvalidateOnChange(true);
  Config config=getConfig();
  config.getMapConfig(mapName).setNearCacheConfig(nearCacheConfig);
  TestHazelcastInstanceFactory factory=createHazelcastInstanceFactory(2);
  HazelcastInstance hazelcastInstance1=factory.newHazelcastInstance(config);
  HazelcastInstance hazelcastInstance2=factory.newHazelcastInstance(config);
  IMap<Integer,Integer> map1=hazelcastInstance1.getMap(mapName);
  IMap<Integer,Integer> map2=hazelcastInstance2.getMap(mapName);
  int size=10;
  for (int i=0; i < size; i++) {
    map1.put(i,i);
  }
  for (int i=0; i < size; i++) {
    map1.get(i);
    map2.get(i);
  }
  map1.clear();
  for (int i=0; i < size; i++) {
    assertNull(map1.get(i));
  }
}
