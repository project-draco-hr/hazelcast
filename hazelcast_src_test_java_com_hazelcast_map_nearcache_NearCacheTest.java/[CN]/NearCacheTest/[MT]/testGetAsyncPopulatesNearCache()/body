{
  final String mapName="testGetAsyncPopulatesNearCache";
  Config config=new Config();
  config.getMapConfig(mapName).setNearCacheConfig(new NearCacheConfig().setInvalidateOnChange(false));
  final TestHazelcastInstanceFactory hazelcastInstanceFactory=createHazelcastInstanceFactory(2);
  HazelcastInstance instance1=hazelcastInstanceFactory.newHazelcastInstance(config);
  HazelcastInstance instance2=hazelcastInstanceFactory.newHazelcastInstance(config);
  final IMap<Object,Object> map=instance1.getMap(mapName);
  int size=1000;
  for (int i=0; i < size; i++) {
    map.put(i,i);
  }
  for (int i=0; i < size; i++) {
    Future async=map.getAsync(i);
    async.get();
  }
  for (int i=0; i < size; i++) {
    map.get(i);
  }
  NearCacheStats stats=map.getLocalMapStats().getNearCacheStats();
  assertTrue("size below 400",400 < stats.getOwnedEntryCount());
  assertTrue("hits below 400",400 < stats.getHits());
}
