{
  boolean shouldMerge=false;
  if (joinRequest != null) {
    boolean validJoinRequest;
    try {
      try {
        validJoinRequest=node.getClusterService().validateJoinMessage(joinRequest);
      }
 catch (      Exception e) {
        logger.finest(e.getMessage());
        validJoinRequest=false;
      }
      if (validJoinRequest) {
        for (        Member member : node.getClusterService().getMembers()) {
          MemberImpl memberImpl=(MemberImpl)member;
          if (memberImpl.getAddress().equals(joinRequest.getAddress())) {
            logger.finest("Should not merge to " + joinRequest.getAddress() + ", because it is already member of this cluster.");
            return false;
          }
        }
        int currentMemberCount=node.getClusterService().getMembers().size();
        if (joinRequest.getMemberCount() > currentMemberCount) {
          logger.info(node.getThisAddress() + " is merging to " + joinRequest.getAddress()+ ", because : joinRequest.getMemberCount() > currentMemberCount ["+ (joinRequest.getMemberCount() + " > " + currentMemberCount)+ "]");
          logger.finest(joinRequest.toString());
          shouldMerge=true;
        }
 else         if (joinRequest.getMemberCount() == currentMemberCount) {
          if (node.getThisAddress().hashCode() > joinRequest.getAddress().hashCode()) {
            logger.info(node.getThisAddress() + " is merging to " + joinRequest.getAddress()+ ", because : node.getThisAddress().hashCode() > joinRequest.address.hashCode() "+ ", this node member count: "+ currentMemberCount);
            logger.finest(joinRequest.toString());
            shouldMerge=true;
          }
 else {
            logger.finest(joinRequest.getAddress() + " should merge to this node " + ", because : node.getThisAddress().hashCode() < joinRequest.address.hashCode() "+ ", this node member count: "+ currentMemberCount);
          }
        }
      }
    }
 catch (    Throwable e) {
      logger.severe(e);
      return false;
    }
  }
  return shouldMerge;
}
