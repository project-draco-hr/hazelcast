{
  try {
    int acquireResult=doSemaphoreOp(SEMAPHORE_TRY_ACQUIRE,name,permits,attach,timeout);
switch (acquireResult) {
case SemaphoreProxy.INSTANCE_DESTROYED:
      operationsCounter.incrementRejectedAcquires(currentTimeMillis() - begin);
    throw new InstanceDestroyedException(InstanceType.SEMAPHORE,(String)toObject(name));
case SemaphoreProxy.ACQUIRED:
  operationsCounter.incrementAcquires(currentTimeMillis() - begin,permits,attach);
return true;
case SemaphoreProxy.ACQUIRE_FAILED:
default :
operationsCounter.incrementRejectedAcquires(currentTimeMillis() - begin);
return false;
}
}
 catch (RuntimeInterruptedException e) {
operationsCounter.incrementRejectedAcquires(currentTimeMillis() - begin);
throw e;
}
}
