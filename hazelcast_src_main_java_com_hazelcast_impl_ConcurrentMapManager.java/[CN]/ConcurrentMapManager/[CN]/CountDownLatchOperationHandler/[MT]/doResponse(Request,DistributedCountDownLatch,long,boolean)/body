{
  final Record record=request.record;
  request.clearForResponse();
  if (changed) {
    record.setValue(toData(cdl));
    record.incrementVersion();
    request.version=record.getVersion();
    request.response=record.getValueData();
  }
  request.longValue=retValue;
  if (changed && request.operation == COUNT_DOWN_LATCH_COUNT_DOWN && cdl.getCount() == 0) {
    request.longValue=releaseThreads(record);
  }
  returnResponse(request);
}
