{
  int threadsReleased=0;
  final List<ScheduledAction> scheduledActions=record.getScheduledActions();
  if (scheduledActions != null) {
    for (    ScheduledAction sa : scheduledActions) {
      node.clusterImpl.deregisterScheduledAction(sa);
      if (!sa.expired()) {
        sa.consume();
        ++threadsReleased;
      }
 else {
        sa.onExpire();
      }
    }
    scheduledActions.clear();
  }
  return threadsReleased;
}
