{
  boolean unlocked=true;
  Record record=recordExist(request);
  logger.log(Level.FINEST,request.operation + " unlocking " + record);
  if (record != null) {
    unlocked=record.unlock(request.lockThreadId,request.lockAddress);
    if (unlocked) {
      CMap cmap=getOrCreateMap(record.getName());
      record.incrementVersion();
      request.version=record.getVersion();
      request.lockCount=record.getLockCount();
      if (record.getLockCount() == 0 && record.valueCount() == 0 && !record.hasScheduledAction()) {
        cmap.markAsRemoved(record);
      }
      cmap.fireScheduledActions(record);
    }
    logger.log(Level.FINEST,unlocked + " [" + record.getName()+ "] now lock "+ record.getLock());
  }
  if (unlocked) {
    request.response=Boolean.TRUE;
  }
 else {
    request.response=Boolean.FALSE;
  }
}
