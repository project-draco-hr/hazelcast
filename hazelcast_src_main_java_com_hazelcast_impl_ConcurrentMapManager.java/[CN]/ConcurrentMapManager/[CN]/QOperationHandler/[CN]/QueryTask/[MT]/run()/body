{
  Predicate predicate=(Predicate)toObject(request.value);
  AtomicBoolean strongRef=new AtomicBoolean(false);
  Set<MapEntry> results=node.queryService.query(cmap.name,strongRef,predicate);
  System.out.println(node.getName() + " after index REcords size " + results.size()+ " strong: "+ strongRef.get());
  if (predicate != null) {
    if (!strongRef.get()) {
      Iterator<MapEntry> it=results.iterator();
      while (it.hasNext()) {
        Record record=(Record)it.next();
        if (record.isActive()) {
          try {
            if (!predicate.apply(record.getRecordEntry())) {
              it.remove();
            }
 else {
            }
          }
 catch (          Exception e) {
            e.printStackTrace();
            it.remove();
          }
        }
 else {
          it.remove();
        }
      }
    }
  }
  createEntries(request,results);
  enqueueAndReturn(new Processable(){
    public void process(){
      returnResponse(request);
    }
  }
);
}
