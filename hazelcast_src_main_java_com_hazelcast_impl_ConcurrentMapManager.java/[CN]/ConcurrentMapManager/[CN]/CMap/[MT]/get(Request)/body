{
  Record record=getRecord(req.key);
  if (record == null)   return null;
  if (!record.isActive())   return null;
  if (!record.isValid()) {
    if (record.isEvictable()) {
      scheduleForEviction(record);
      return null;
    }
  }
  if (req.local && locallyOwnedMap != null) {
    locallyOwnedMap.offerToCache(record);
  }
  record.setLastAccessed();
  touch(record);
  Data data=record.getValue();
  Data returnValue=null;
  if (data != null) {
    returnValue=doHardCopy(data);
  }
 else {
    if (record.getLsValues() != null) {
      Values values=new Values(record.getLsValues());
      returnValue=toData(values);
    }
  }
  if (returnValue != null) {
    req.key.setNoData();
    req.key=null;
  }
  return returnValue;
}
