{
  if (key == null || key.size() == 0) {
    throw new RuntimeException("Cannot create record from a 0 size key: " + key);
  }
  int blockId=getBlockId(key);
  Record rec=new Record(node.factory,name,blockId,key,value,ttl,newId++);
  Block ownerBlock=getOrCreateBlock(blockId);
  if (thisAddress.equals(ownerBlock.getRealOwner())) {
    if (value != null && value.size() > 0) {
      addNewValueIndex(rec);
    }
    ownedEntryCount++;
  }
  mapRecords.put(key,rec);
  if (evictionPolicy != OrderingType.NONE) {
    if (maxSize != Integer.MAX_VALUE) {
      int limitSize=(maxSize / lsMembers.size());
      if (ownedEntryCount > limitSize) {
        startEviction();
      }
    }
  }
  return rec;
}
