{
  Record record=getRecord(req.key);
  if (record == null) {
    record=createNewRecord(req.key,null);
    req.key=null;
  }
 else {
    if (req.operation == CONCURRENT_MAP_ADD_TO_SET) {
      return false;
    }
  }
  record.setVersion(record.getVersion() + 1);
  record.incrementCopyCount();
  fireMapEvent(mapListeners,name,EntryEvent.TYPE_ADDED,record);
  return true;
}
