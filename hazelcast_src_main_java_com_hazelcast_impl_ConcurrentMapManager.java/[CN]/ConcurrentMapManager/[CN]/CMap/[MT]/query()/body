{
  long now=System.currentTimeMillis();
  int size=0;
  final List<MapEntry> localRecords=new ArrayList<MapEntry>(mapRecords.size() / 2);
  Collection<Record> records=mapRecords.values();
  for (  Record record : records) {
    if (record.isValid(now)) {
      Block block=blocks[record.blockId];
      if (thisAddress.equals(block.owner)) {
        localRecords.add(record.getRecordEntry());
      }
    }
  }
  executeLocally(new Runnable(){
    public void run(){
      int query=0;
      for (      MapEntry entry : localRecords) {
        if (entry.isValid()) {
          Object key=entry.getKey();
          Object value=entry.getValue();
          if (key == null)           throw new RuntimeException();
          if (value == null)           throw new RuntimeException();
          query++;
        }
      }
    }
  }
);
}
