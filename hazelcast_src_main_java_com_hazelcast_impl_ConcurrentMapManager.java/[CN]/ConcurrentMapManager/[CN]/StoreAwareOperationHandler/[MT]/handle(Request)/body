{
  CMap cmap=getOrCreateMap(request.name);
  boolean checkCapacity=(cmap.store == null && (request.operation == CONCURRENT_MAP_PUT || request.operation == CONCURRENT_MAP_TRY_PUT));
  boolean overCapacity=checkCapacity && cmap.overCapacity(request);
  if (cmap.isNotLocked(request) && !overCapacity) {
    if (shouldSchedule(request)) {
      if (request.hasEnoughTimeToSchedule()) {
        schedule(request);
      }
 else {
        onNoTimeToSchedule(request);
      }
      return;
    }
    if (shouldExecuteAsync(request)) {
      executeAsync(request);
      return;
    }
    doOperation(request);
    returnResponse(request);
  }
 else {
    request.response=OBJECT_REDO;
    returnResponse(request);
  }
}
