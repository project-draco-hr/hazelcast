{
  final int drainedPermits=semaphore.drain();
  doResponse(request,semaphore,drainedPermits,drainedPermits > 0);
}
