{
  MLock mlock=new MLock();
  boolean locked=mlock.lockAndGetValue(name,key,timeout);
  if (!locked) {
    throw new TimeoutException();
  }
 else {
    return ThreadContext.get().isClient() ? mlock.oldValue : toObject(mlock.oldValue);
  }
}
