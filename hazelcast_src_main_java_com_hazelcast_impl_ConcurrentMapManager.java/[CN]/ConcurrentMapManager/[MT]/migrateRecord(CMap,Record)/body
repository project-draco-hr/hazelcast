{
  if (!node.isActive() || node.factory.restarted)   return;
  MMigrate mmigrate=new MMigrate();
  if (cmap.isMultiMap()) {
    Set<Data> values=rec.getMultiValues();
    if (values == null || values.size() == 0) {
      mmigrate.migrateMulti(rec,null);
    }
 else {
      for (      Data value : values) {
        mmigrate.migrateMulti(rec,value);
      }
    }
  }
 else {
    boolean migrated=mmigrate.migrate(rec);
    if (!migrated) {
      logger.log(Level.FINEST,"Migration failed " + rec.getKeyData());
    }
  }
}
