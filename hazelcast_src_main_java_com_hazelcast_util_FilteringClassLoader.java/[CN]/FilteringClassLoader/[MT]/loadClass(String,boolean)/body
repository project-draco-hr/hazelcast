{
  ValidationUtil.isNotNull(name,"name");
  for (  String excludePackage : excludePackages) {
    if (name.startsWith(excludePackage)) {
      throw new ClassNotFoundException(name + " - Package excluded explicitly!");
    }
  }
  if (name.startsWith("com.hazelcast")) {
    Class<?> clazz=cache.get(name);
    if (clazz != null) {
      return clazz;
    }
    URL url=getResource(name.replaceAll("\\.","/").concat(".class"));
    FileInputStream fis=null;
    try {
      File classFile=new File(url.toURI());
      byte[] data=new byte[(int)classFile.length()];
      fis=new FileInputStream(classFile);
      fis.read(data);
      clazz=defineClass(name,data,0,data.length);
      cache.put(name,clazz);
      return clazz;
    }
 catch (    Exception e) {
      throw new ClassNotFoundException(name,e);
    }
 finally {
      IOUtil.closeResource(fis);
    }
  }
  return delegatingClassLoader.loadClass(name);
}
