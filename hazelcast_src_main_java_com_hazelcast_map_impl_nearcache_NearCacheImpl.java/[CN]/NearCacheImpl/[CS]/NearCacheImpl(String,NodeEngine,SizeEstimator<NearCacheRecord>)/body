{
  this.cache=new ConcurrentHashMap<Data,NearCacheRecord>();
  this.mapName=mapName;
  this.executionService=nodeEngine.getExecutionService();
  this.serializationService=nodeEngine.getSerializationService();
  this.nearCacheSizeEstimator=nearCacheSizeEstimator;
  Config config=nodeEngine.getConfig();
  NearCacheConfig nearCacheConfig=config.findMapConfig(mapName).getNearCacheConfig();
  this.inMemoryFormat=nearCacheConfig.getInMemoryFormat();
  this.maxSize=nearCacheConfig.getMaxSize() <= 0 ? Integer.MAX_VALUE : nearCacheConfig.getMaxSize();
  this.maxIdleMillis=TimeUnit.SECONDS.toMillis(nearCacheConfig.getMaxIdleSeconds());
  this.timeToLiveMillis=TimeUnit.SECONDS.toMillis(nearCacheConfig.getTimeToLiveSeconds());
  this.invalidateOnChange=nearCacheConfig.isInvalidateOnChange();
  this.evictionPolicy=EvictionPolicy.valueOf(nearCacheConfig.getEvictionPolicy());
  this.canCleanUp=new AtomicBoolean(true);
  this.canEvict=new AtomicBoolean(true);
  this.stats=new NearCacheStatsImpl();
  this.selectedComparator=NearCacheRecord.getComparator(evictionPolicy);
  this.lastCleanup=Clock.currentTimeMillis();
}
