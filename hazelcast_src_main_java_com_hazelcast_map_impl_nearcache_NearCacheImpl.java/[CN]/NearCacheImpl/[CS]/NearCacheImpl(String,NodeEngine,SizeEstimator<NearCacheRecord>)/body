{
  this.cache=new ConcurrentHashMap<Data,NearCacheRecord>();
  this.mapName=mapName;
  this.executionService=nodeEngine.getExecutionService();
  this.serializationService=nodeEngine.getSerializationService();
  this.nearCacheSizeEstimator=nearCacheSizeEstimator;
  Config config=nodeEngine.getConfig();
  NearCacheConfig nearCacheConfig=config.findMapConfig(mapName).getNearCacheConfig();
  EvictionConfig evictionConfig=initDefaultMaxSize(nearCacheConfig.getEvictionConfig());
  this.inMemoryFormat=nearCacheConfig.getInMemoryFormat();
  this.maxSize=evictionConfig.getSize();
  this.maxIdleMillis=TimeUnit.SECONDS.toMillis(nearCacheConfig.getMaxIdleSeconds());
  this.timeToLiveMillis=TimeUnit.SECONDS.toMillis(nearCacheConfig.getTimeToLiveSeconds());
  this.invalidateOnChange=nearCacheConfig.isInvalidateOnChange();
  this.evictionPolicy=evictionConfig.getEvictionPolicy();
  this.canExpire=new AtomicBoolean(true);
  this.canEvict=new AtomicBoolean(true);
  this.stats=new NearCacheStatsImpl();
  this.selectedComparator=NearCacheRecord.getComparator(evictionPolicy);
  this.lastExpiration=Clock.currentTimeMillis();
}
