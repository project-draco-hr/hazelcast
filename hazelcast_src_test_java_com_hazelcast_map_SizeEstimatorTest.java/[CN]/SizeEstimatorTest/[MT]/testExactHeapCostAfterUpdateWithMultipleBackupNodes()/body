{
  final long expectedPerEntryHeapCost=168L;
  final long putCount=1000L;
  final int nodeCount=3, expectedReplicaCount=nodeCount;
  final SizeEstimatorTestMapBuilder<Long,Long> testMapBuilder=new SizeEstimatorTestMapBuilder<Long,Long>();
  final IMap<Long,Long> map=testMapBuilder.withNodeCount(nodeCount).withBackupCount(nodeCount - 1).build();
  for (long i=0; i < putCount; i++) {
    map.put(i,i);
  }
  for (long i=0; i < putCount; i++) {
    map.put(i,i);
  }
  final long heapCost=testMapBuilder.totalHeapCost();
  assertEquals("Heap cost calculation is wrong!",expectedPerEntryHeapCost * putCount * expectedReplicaCount,heapCost);
}
