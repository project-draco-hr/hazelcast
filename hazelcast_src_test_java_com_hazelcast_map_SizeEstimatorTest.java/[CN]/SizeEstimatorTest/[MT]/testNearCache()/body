{
  final String NO_NEAR_CAHED_MAP="testIssue833";
  final String NEAR_CACHED_MAP="testNearCache";
  final Config config=new Config();
  final NearCacheConfig nearCacheConfig=new NearCacheConfig();
  nearCacheConfig.setInMemoryFormat(MapConfig.InMemoryFormat.BINARY);
  config.getMapConfig(NEAR_CACHED_MAP).setNearCacheConfig(nearCacheConfig).setBackupCount(0);
  config.getMapConfig(NO_NEAR_CAHED_MAP).setBackupCount(0);
  final int n=2;
  final TestHazelcastInstanceFactory factory=createHazelcastInstanceFactory(n);
  final HazelcastInstance h[]=factory.newInstances(config);
  warmUpPartitions(h);
  final IMap<String,String> noNearCached=h[0].getMap(NO_NEAR_CAHED_MAP);
  for (int i=0; i < 1000; i++) {
    noNearCached.put("key" + i,"value" + i);
  }
  final IMap<String,String> nearCachedMap=h[0].getMap(NEAR_CACHED_MAP);
  for (int i=0; i < 1000; i++) {
    nearCachedMap.put("key" + i,"value" + i);
  }
  for (int i=0; i < 1000; i++) {
    nearCachedMap.get("key" + i);
  }
  Assert.assertTrue(nearCachedMap.getLocalMapStats().getHeapCost() > noNearCached.getLocalMapStats().getHeapCost());
}
