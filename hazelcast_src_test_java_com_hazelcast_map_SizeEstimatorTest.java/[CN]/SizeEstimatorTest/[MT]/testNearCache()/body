{
  final String NO_NEAR_CACHED_MAP=randomString();
  final String NEAR_CACHED_MAP=randomString();
  Config config=getConfig();
  NearCacheConfig nearCacheConfig=new NearCacheConfig();
  nearCacheConfig.setInMemoryFormat(InMemoryFormat.BINARY);
  config.getMapConfig(NEAR_CACHED_MAP).setBackupCount(0).setNearCacheConfig(nearCacheConfig);
  config.getMapConfig(NO_NEAR_CACHED_MAP).setBackupCount(0);
  final HazelcastInstance h[]=factory.newInstances(config);
  warmUpPartitions(h);
  final IMap<String,String> noNearCached=h[0].getMap(NO_NEAR_CACHED_MAP);
  for (int i=0; i < 1000; i++) {
    noNearCached.put("key" + i,"value" + i);
  }
  final IMap<String,String> nearCachedMap=h[0].getMap(NEAR_CACHED_MAP);
  for (int i=0; i < 1000; i++) {
    nearCachedMap.put("key" + i,"value" + i);
  }
  for (int i=0; i < 1000; i++) {
    nearCachedMap.get("key" + i);
  }
  assertTrue(nearCachedMap.getLocalMapStats().getHeapCost() > noNearCached.getLocalMapStats().getHeapCost());
}
