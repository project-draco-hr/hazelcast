{
  if (!conn.live()) {
    logger.severe("Can't create and endpoint for a dead connection");
    return null;
  }
  String clientUuid=UuidUtil.createClientUuid(conn.getEndPoint());
  ClientEndpoint endpoint=new ClientEndpoint(ClientEngineImpl.this,conn,clientUuid);
  if (endpoints.putIfAbsent(conn,endpoint) != null) {
    logger.severe("An endpoint already exists for connection:" + conn);
  }
  return endpoint;
}
