{
  if (response instanceof Throwable) {
    response=ClientExceptionConverters.get(endpoint.getClientType()).convert((Throwable)response);
  }
  final Data resultData=response != null ? serializationService.toData(response) : NULL;
  Connection conn=endpoint.getConnection();
  conn.write(new DataAdapter(resultData,serializationService.getSerializationContext()));
}
