{
  Connection conn=packet.getConn();
  ClientEndpoint endpoint=getEndpoint(conn);
  ClientRequest request=null;
  try {
    request=loadRequest();
    if (request == null) {
      handlePacketWithNullRequest();
    }
 else     if (request instanceof AuthenticationRequest) {
      if (conn.live()) {
        endpoint=new ClientEndpoint(ClientEngineImpl.this,conn);
        processRequest(endpoint,request);
      }
 else {
        handleEndpointNotCreatedConnectionNotAlive();
      }
    }
 else     if (endpoint == null) {
      handleMissingEndpoint(conn);
    }
 else     if (endpoint.isAuthenticated()) {
      processRequest(endpoint,request);
    }
 else {
      handleAuthenticationFailure(conn,endpoint,request);
    }
  }
 catch (  Throwable e) {
    handleProcessingFailure(endpoint,request,e);
  }
}
