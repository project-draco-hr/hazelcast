{
  while (!stop) {
    try {
      Thread.sleep(10000);
    }
 catch (    InterruptedException e) {
      e.printStackTrace();
    }
    for (    Connection connection : endpoints.keySet()) {
      try {
        if (!connection.live()) {
          long dieTime=connection.getFirstDeadTime();
          if (dieTime == -1) {
            connection.setFirstDeadTime(System.currentTimeMillis());
          }
 else           if (System.currentTimeMillis() > dieTime + TimeUnit.MINUTES.toMillis(5)) {
            logger.severe("ClientEngine cleanup thread removed endpoint for dead connection: " + connection);
            removeEndpoint(connection,true);
          }
        }
      }
 catch (      Exception e) {
        logger.severe(e);
      }
    }
  }
}
