{
  if (poolSize <= 0) {
    final int cores=Runtime.getRuntime().availableProcessors();
    poolSize=cores * 5;
  }
  executor=new ThreadPoolExecutor(poolSize,poolSize,0L,TimeUnit.MILLISECONDS,new LinkedBlockingQueue<Runnable>(),new PoolExecutorThreadFactory(threadGroup,name + ".cached-",classLoader),new RejectedExecutionHandler(){
    public void rejectedExecution(    Runnable r,    ThreadPoolExecutor executor){
      if (logger.isFinestEnabled()) {
        logger.finest("Rejected task: " + r + ", because client is shutting down...");
      }
    }
  }
);
  scheduledExecutor=Executors.newSingleThreadScheduledExecutor(new SingleExecutorThreadFactory(threadGroup,classLoader,name + ".scheduled"));
}
