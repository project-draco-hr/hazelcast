{
  final IQueue<Object> q=client.getQueue("Q");
  q.addItemListener(new ItemListener(){
    public void itemAdded(    ItemEvent itemEvent){
    }
    public void itemRemoved(    ItemEvent item){
    }
  }
,true);
  for (int i=0; i < 1000; i++) {
    q.offer(i);
  }
  assertTrueEventually(new Runnable(){
    public void run(){
      assertEquals(1000,q.size());
    }
  }
);
  for (int i=0; i < 1000; i++) {
    Object o=q.poll();
    assertEquals(i,o);
    q.remove(o);
  }
  assertTrueEventually(new Runnable(){
    public void run(){
      assertEquals(0,q.size());
    }
  }
);
}
