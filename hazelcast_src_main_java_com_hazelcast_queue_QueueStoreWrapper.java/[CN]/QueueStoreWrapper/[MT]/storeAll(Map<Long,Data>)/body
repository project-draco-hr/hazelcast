{
  if (enabled) {
    final Map<Long,Object> objectMap=new HashMap<Long,Object>(map.size());
    if (binary) {
      BufferObjectDataOutput out=(BufferObjectDataOutput)serializationService.createObjectDataOutput(1024);
      try {
        for (        Map.Entry<Long,Data> entry : map.entrySet()) {
          entry.getValue().writeData(out);
          objectMap.put(entry.getKey(),out.toByteArray());
          out.reset();
        }
      }
 catch (      IOException e) {
        throw new HazelcastException(e);
      }
 finally {
        IOUtil.closeResource(out);
      }
    }
 else {
      for (      Map.Entry<Long,Data> entry : map.entrySet()) {
        objectMap.put(entry.getKey(),serializationService.toObject(entry.getValue()));
      }
    }
    store.storeAll(objectMap);
  }
}
