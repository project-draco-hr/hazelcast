{
  connection.setEndPoint(endPoint);
  if (mapConnections.containsKey(endPoint)) {
    return false;
  }
  if (!endPoint.equals(ioService.getThisAddress())) {
    if (!connection.isClient()) {
      connection.setMonitor(getConnectionMonitor(endPoint,true));
    }
    if (!accept) {
      Packet bindPacket=createBindPacket(new Bind(ioService.getThisAddress()));
      connection.getWriteHandler().enqueueSocketWritable(bindPacket);
    }
    mapConnections.put(endPoint,connection);
    setConnectionInProgress.remove(endPoint);
    for (    ConnectionListener listener : setConnectionListeners) {
      listener.connectionAdded(connection);
    }
  }
 else {
    return false;
  }
  return true;
}
