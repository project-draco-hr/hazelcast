{
  Config cfg=new Config();
  final MapConfig mapConfig=cfg.getMapConfig("employees2");
  mapConfig.addMapIndexConfig(new MapIndexConfig("name",false)).addMapIndexConfig(new MapIndexConfig("age",true)).addMapIndexConfig(new MapIndexConfig("active",false));
  TestHazelcastInstanceFactory nodeFactory=createHazelcastInstanceFactory(4);
  HazelcastInstance h1=nodeFactory.newHazelcastInstance(cfg);
  IMap imap=h1.getMap("employees");
  fillMap(imap);
  EntryObject e=new PredicateBuilder().getEntryObject();
  Predicate predicate=e.is("active").and(e.get("age").equal(23));
  long start;
  Set<Map.Entry> entries;
  long tookWithout=runQuery(imap,predicate);
  imap.clear();
  imap=h1.getMap("employees2");
  fillMap(imap);
  e=new PredicateBuilder().getEntryObject();
  predicate=e.is("active").and(e.get("age").equal(23));
  start=Clock.currentTimeMillis();
  entries=imap.entrySet(predicate);
  long tookWithIndex=(Clock.currentTimeMillis() - start);
  assertEntriesMatch(entries);
  assertTrue("tookWithIndex: " + tookWithIndex + ", tookWithoutIndex: "+ tookWithout,tookWithIndex < (tookWithout / 2));
}
