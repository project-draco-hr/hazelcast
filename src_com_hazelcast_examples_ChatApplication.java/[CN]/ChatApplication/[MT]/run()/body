{
  boolean chatting=true;
  showConnected(map);
  map.addEntryListener(new ChatCallback(),true);
  while (chatting) {
    int input;
    StringBuilder message=new StringBuilder();
    ChatMessage chat;
    try {
      while ((input=System.in.read()) != '\n')       message.append((char)input);
    }
 catch (    IOException e) {
      e.printStackTrace();
    }
    chat=new ChatMessage(username,message.toString());
    chat.send(map);
  }
}
