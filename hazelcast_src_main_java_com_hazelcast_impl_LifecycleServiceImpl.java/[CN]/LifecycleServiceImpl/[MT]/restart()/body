{
synchronized (lifecycleLock) {
    fireLifecycleEvent(RESTARTING);
    paused.set(true);
    final Node node=instance.node;
    node.onRestart();
    node.connectionManager.onRestart();
    node.clusterService.onRestart();
    node.partitionService.onRestart();
    node.rejoin();
    paused.set(false);
    fireLifecycleEvent(RESTARTED);
  }
}
