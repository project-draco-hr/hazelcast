{
  if (event.getReplicaIndex() > 0) {
    if (thisAddress.equals(event.getOldAddress())) {
      final PartitionImpl partition=partitions[event.getPartitionId()];
      if (!partition.isOwnerOrBackup(thisAddress)) {
        clearPartitionReplica(event.getPartitionId(),event.getReplicaIndex());
      }
    }
 else     if (thisAddress.equals(event.getNewAddress())) {
      syncPartitionReplica(event.getPartitionId(),event.getReplicaIndex(),true);
    }
  }
  if (event.getReplicaIndex() == 0 && event.getNewAddress() == null && node.isActive() && node.joined()) {
    final String warning="Owner of partition is being removed! " + "Possible data loss for partition[" + event.getPartitionId() + "]. "+ event;
    logger.warning(warning);
    systemLogService.logWarningPartition(warning);
  }
  if (node.isMaster()) {
    stateVersion.incrementAndGet();
  }
}
