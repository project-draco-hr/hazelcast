{
  final String mapName="testGetAsyncWithNearCache";
  ClientConfig config=new ClientConfig();
  config.addNearCacheConfig(mapName,new NearCacheConfig());
  HazelcastInstance instance1=Hazelcast.newHazelcastInstance();
  HazelcastInstance instance2=Hazelcast.newHazelcastInstance();
  HazelcastInstance client=HazelcastClient.newHazelcastClient(config);
  IMap<Integer,Integer> map=client.getMap(mapName);
  HashSet keys=new HashSet();
  int size=1000;
  for (int i=0; i < size; i++) {
    map.put(i,i);
    keys.add(i);
  }
  for (int i=0; i < size; i++) {
    map.get(i);
  }
  for (int i=0; i < size; i++) {
    Future<Integer> async=map.getAsync(i);
    async.get();
  }
  NearCacheStats stats=map.getLocalMapStats().getNearCacheStats();
  assertEquals(1000,stats.getHits());
}
