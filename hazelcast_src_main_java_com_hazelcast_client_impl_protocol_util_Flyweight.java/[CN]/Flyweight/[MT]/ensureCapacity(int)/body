{
  final int capacity=buffer.capacity() > 0 ? buffer.capacity() : 1;
  if (requiredCapacity > capacity) {
    final int newCapacity=findSuitableCapacity(capacity,requiredCapacity);
    ByteBuffer newBuffer=ByteBuffer.allocate(newCapacity);
    if (buffer.byteBuffer() != null) {
      newBuffer.put(buffer.byteBuffer());
    }
 else     if (buffer.byteArray() != null) {
      newBuffer.put(buffer.byteArray());
    }
    buffer.wrap(newBuffer);
  }
}
