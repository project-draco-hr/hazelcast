{
  Hazelcast.getMap("testReentrantLock").put("1","value");
  TransactionalMap txnMap=newTransactionalMapProxy("testReentrantLock");
  TransactionalMap txnMap2=newTransactionalMapProxy("testReentrantLock");
  try {
    assertEquals("value",txnMap.tryLockAndGet("1",5,TimeUnit.SECONDS));
  }
 catch (  TimeoutException e) {
    fail();
  }
  txnMap.lock("1");
  assertFalse(txnMap2.tryLock("1"));
  txnMap.unlock("1");
  assertFalse(txnMap2.tryLock("1"));
  txnMap.unlock("1");
  assertTrue(txnMap2.tryLock("1"));
}
