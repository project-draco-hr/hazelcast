{
  TransactionalMap txnMap=newTransactionalMapProxy("testMapIterateEntries3");
  txnMap.put("1","value1");
  assertEquals(1,txnMap.size());
  txnMap.begin();
  txnMap.put("1","value2");
  assertEquals(1,txnMap.size());
  Set<Map.Entry> entries=txnMap.entrySet();
  for (  Map.Entry entry : entries) {
    if ("1".equals(entry.getKey())) {
      assertEquals("value2",entry.getValue());
    }
 else     throw new RuntimeException("cannot contain another entry with key " + entry.getKey());
  }
  txnMap.rollback();
  assertEquals(1,txnMap.size());
  entries=txnMap.entrySet();
  for (  Map.Entry entry : entries) {
    if ("1".equals(entry.getKey())) {
      assertEquals("value1",entry.getValue());
    }
 else     throw new RuntimeException("cannot contain another entry with key " + entry.getKey());
  }
}
