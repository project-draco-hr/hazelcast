{
  MultiMap multiMap=Hazelcast.getMultiMap("testMultiMapPutRemoveWithTxn");
  multiMap.put("1","C");
  multiMap.put("2","x");
  multiMap.put("2","y");
  TransactionalMultiMap txnMap=newTransactionalMultiMapProxy("testMultiMapPutRemoveWithTxn");
  txnMap.begin();
  txnMap.put("1","A");
  txnMap.put("1","B");
  Collection g1=txnMap.get("1");
  System.err.println(g1);
  assertTrue(g1.contains("A"));
  assertTrue(g1.contains("B"));
  assertTrue(g1.contains("C"));
  assertTrue(txnMap.remove("1","C"));
  assertEquals(4,txnMap.size());
  Collection g2=txnMap.get("1");
  assertTrue(g2.contains("A"));
  assertTrue(g2.contains("B"));
  assertFalse(g2.contains("C"));
  Collection r1=txnMap.remove("2");
  assertTrue(r1.contains("x"));
  assertTrue(r1.contains("y"));
  assertNull(txnMap.get("2"));
  Collection r2=txnMap.remove("1");
  assertEquals(2,r2.size());
  assertTrue(r2.contains("A"));
  assertTrue(r2.contains("B"));
  assertNull(txnMap.get("1"));
  txnMap.commit();
  assertEquals(0,txnMap.size());
}
