{
  Hazelcast.getSet("test").add("1");
  Hazelcast.getSet("test").add("1");
  TransactionalSet set=newTransactionalSetProxy("test");
  TransactionalSet set2=newTransactionalSetProxy("test");
  assertEquals(1,set.size());
  assertEquals(1,set2.size());
  set.begin();
  set.add("2");
  assertEquals(2,set.size());
  assertEquals(1,set2.size());
  set.commit();
  assertEquals(2,set.size());
  assertEquals(2,set2.size());
  set2.begin();
  assertEquals(2,set.size());
  assertEquals(2,set2.size());
  set2.remove("1");
  assertEquals(2,set.size());
  assertEquals(1,set2.size());
  set2.commit();
  assertEquals(1,set.size());
  assertEquals(1,set2.size());
}
