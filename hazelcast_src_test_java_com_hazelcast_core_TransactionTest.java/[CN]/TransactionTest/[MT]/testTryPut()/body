{
  Map map=Hazelcast.getMap("testTryPut");
  map.put("1","value");
  TransactionalMap txnMap=newTransactionalMapProxy("testTryPut");
  TransactionalMap txnMap2=newTransactionalMapProxy("testTryPut");
  txnMap.lock("1");
  long start=Clock.currentTimeMillis();
  assertFalse(txnMap2.tryPut("1","value2",2,TimeUnit.SECONDS));
  long end=Clock.currentTimeMillis();
  long took=(end - start);
  assertTrue((took > 1000) ? (took < 4000) : false);
  assertEquals("value",map.get("1"));
  assertEquals("value",txnMap.get("1"));
  assertEquals("value",txnMap2.get("1"));
  txnMap.unlock("1");
  assertTrue(txnMap2.tryPut("1","value2",2,TimeUnit.SECONDS));
  assertEquals("value2",map.get("1"));
  assertEquals("value2",txnMap.get("1"));
  assertEquals("value2",txnMap2.get("1"));
}
