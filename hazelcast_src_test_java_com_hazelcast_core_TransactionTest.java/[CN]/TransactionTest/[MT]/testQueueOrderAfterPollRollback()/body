{
  IQueue<Integer> queue=newQueueProxy("testQueueOrderAfterPollRollback");
  TransactionalQueue<Integer> txn1=newTransactionalQueueProxy("testQueueOrderAfterPollRollback");
  txn1.begin();
  txn1.offer(1);
  txn1.offer(2);
  txn1.offer(3);
  txn1.commit();
  assertEquals(3,queue.size());
  assertEquals(3,txn1.size());
  TransactionalQueue<Integer> txn2=newTransactionalQueueProxy("testQueueOrderAfterPollRollback");
  txn2.begin();
  assertEquals(1,txn2.poll().intValue());
  assertEquals(2,txn2.peek().intValue());
  txn2.rollback();
  assertEquals(1,queue.poll().intValue());
  assertEquals(2,queue.poll().intValue());
  assertEquals(3,queue.poll().intValue());
}
