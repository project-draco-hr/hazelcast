{
  if (!isValidInternal()) {
    throw new IllegalStateException(sm.getString("standardSession.getAttribute.ise"));
  }
  if (name == null)   throw new IllegalArgumentException(sm.getString("standardSession.setAttribute.namenull"));
  if (HAZEL_SESSION_MARK.equals(name)) {
    throw new IllegalArgumentException(HAZEL_MARK_EXCEPTION);
  }
  HazelAttribute hattribute=(HazelAttribute)attributes.get(name);
  if (hattribute == null) {
    hattribute=(HazelAttribute)hazelAttributes.get(getIdInternal() + "_" + name);
    if (hattribute == null) {
      attributes.put(name,new HazelAttribute(getIdInternal(),name,null));
      return null;
    }
  }
  long requestId=HazelValve.requestLocal.get();
  hattribute.touch(requestId);
  return hattribute.getValue();
}
