{
  logger.log(Level.FINEST,"Updating Members");
  lock.lock();
  try {
    Map<Address,MemberImpl> mapOldMembers=new HashMap<Address,MemberImpl>();
    for (    MemberImpl member : getMembers()) {
      mapOldMembers.put(member.getAddress(),member);
    }
    System.out.println("lsMemberInfos = " + lsMemberInfos);
    MemberImpl[] newMembers=new MemberImpl[lsMemberInfos.size()];
    int k=0;
    for (    MemberInfo memberInfo : lsMemberInfos) {
      MemberImpl member=mapOldMembers.get(memberInfo.address);
      if (member == null) {
        member=createMember(memberInfo.address,memberInfo.nodeType,memberInfo.uuid,thisAddress.getScopeId());
      }
      newMembers[k++]=member;
      member.didRead();
    }
    addMembers(newMembers);
    System.out.println("getMembers() = " + getMembers());
    System.out.println("dataMemberCount = " + dataMemberCount);
    if (!getMembers().contains(thisMember)) {
      throw new RuntimeException("Member list doesn't contain local member!");
    }
    heartBeater();
    node.getClusterImpl().setMembers(getMembers());
    node.setJoined();
    logger.log(Level.INFO,this.toString());
  }
  finally {
    lock.unlock();
  }
}
