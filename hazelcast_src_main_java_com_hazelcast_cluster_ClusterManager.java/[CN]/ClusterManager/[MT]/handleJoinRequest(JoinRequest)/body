{
  logger.log(Level.FINEST,joinInProgress + " Handling " + joinRequest);
  if (getMember(joinRequest.address) != null) {
    return;
  }
  Connection conn=joinRequest.getConnection();
  boolean validateJoinRequest;
  try {
    validateJoinRequest=node.validateJoinRequest(joinRequest);
  }
 catch (  Exception e) {
    validateJoinRequest=false;
  }
  if (validateJoinRequest) {
    if (!node.getConfig().getNetworkConfig().getJoin().getMulticastConfig().isEnabled()) {
      if (node.isActive() && node.joined() && node.getMasterAddress() != null && !isMaster()) {
        sendProcessableTo(new Master(node.getMasterAddress()),conn);
      }
    }
    if (isMaster() && node.joined() && node.isActive()) {
      if (joinRequest.to != null && !joinRequest.to.equals(thisAddress)) {
        sendProcessableTo(new Master(node.getMasterAddress()),conn);
        return;
      }
      if (!joinInProgress) {
        MemberInfo newMemberInfo=new MemberInfo(joinRequest.address,joinRequest.nodeType);
        if (setJoins.add(newMemberInfo)) {
          sendProcessableTo(new Master(node.getMasterAddress()),conn);
          timeToStartJoin=System.currentTimeMillis() + WAIT_MILLIS_BEFORE_JOIN;
        }
 else {
          if (System.currentTimeMillis() > timeToStartJoin) {
            startJoin();
          }
        }
      }
    }
  }
 else {
    conn.close();
  }
}
