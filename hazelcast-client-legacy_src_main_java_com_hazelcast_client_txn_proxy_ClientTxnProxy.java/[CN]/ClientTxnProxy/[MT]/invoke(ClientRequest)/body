{
  if (request instanceof BaseTransactionRequest) {
    ((BaseTransactionRequest)request).setTxnId(transactionContext.getTxnId());
    ((BaseTransactionRequest)request).setClientThreadId(Thread.currentThread().getId());
  }
  HazelcastClientInstanceImpl client=transactionContext.getClient();
  SerializationService ss=client.getSerializationService();
  try {
    ClientInvocation invocation=new ClientInvocation(client,request,transactionContext.getConnection());
    Future<SerializableList> future=invocation.invoke();
    return ss.toObject(future.get());
  }
 catch (  Exception e) {
    throw ExceptionUtil.rethrow(e);
  }
}
