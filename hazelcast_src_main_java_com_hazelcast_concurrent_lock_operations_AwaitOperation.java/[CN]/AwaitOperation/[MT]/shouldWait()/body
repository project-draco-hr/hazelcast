{
  LockStoreImpl lockStore=getLockStore();
  boolean canAcquireLock=lockStore.canAcquireLock(key,getCallerUuid(),threadId);
  ConditionKey signalKey=lockStore.getSignalKey(key);
  if (signalKey != null && conditionId.equals(signalKey.getConditionId()) && canAcquireLock) {
    return false;
  }
  boolean shouldWait=firstRun || !canAcquireLock;
  firstRun=false;
  return shouldWait;
}
