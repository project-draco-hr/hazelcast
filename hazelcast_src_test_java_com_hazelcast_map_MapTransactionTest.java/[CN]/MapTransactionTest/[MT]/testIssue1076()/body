{
  final HazelcastInstance inst=createHazelcastInstance();
  IMap map=inst.getMap("default");
  EntryListener<String,Integer> l=new EntryListener<String,Integer>(){
    @Override public void entryAdded(    EntryEvent<String,Integer> event){
    }
    @Override public void entryRemoved(    EntryEvent<String,Integer> event){
    }
    @Override public void entryUpdated(    EntryEvent<String,Integer> event){
    }
    @Override public void entryEvicted(    EntryEvent<String,Integer> event){
    }
  }
;
  EntryObject e=new PredicateBuilder().getEntryObject();
  Predicate<String,Integer> p=e.equal(1);
  map.addEntryListener(l,p,null,false);
  for (Integer i=0; i < 100; i++) {
    TransactionContext context=inst.newTransactionContext();
    context.beginTransaction();
    TransactionalMap<String,Integer> txnMap=context.getMap("default");
    txnMap.remove(i.toString());
    context.commitTransaction();
  }
  assertEquals(0,map.size());
  inst.shutdown();
}
