{
  Config config=new Config();
  StaticNodeFactory factory=new StaticNodeFactory(2);
  HazelcastInstance h1=factory.newHazelcastInstance(config);
  HazelcastInstance h2=factory.newHazelcastInstance(config);
  IMap map1=h1.getMap("default");
  IMap map2=h2.getMap("default");
  Transaction txn=h1.getTransaction();
  txn.begin();
  map1.put("1","value");
  map1.put("13","value");
  assertFalse(map2.tryPut("1","value2",0,null));
  assertEquals("value",map1.get("1"));
  assertEquals("value",map1.get("13"));
  assertNull(map2.get("1"));
  assertNull(map2.get("13"));
  txn.commit();
  assertEquals("value",map1.get("1"));
  assertEquals("value",map1.get("13"));
  assertEquals("value",map2.get("1"));
  assertEquals("value",map2.get("13"));
}
