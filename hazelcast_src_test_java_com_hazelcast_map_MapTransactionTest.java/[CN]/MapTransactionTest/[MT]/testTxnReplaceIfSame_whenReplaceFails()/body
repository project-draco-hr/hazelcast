{
  final String TEST_MAP="testMap";
  final String key="k";
  final String value="v";
  final TestHazelcastInstanceFactory factory=createHazelcastInstanceFactory(1);
  final HazelcastInstance hazelcastInstance=factory.newHazelcastInstance(new Config());
  IMap<String,Object> map=hazelcastInstance.getMap(TEST_MAP);
  map.put(key,value);
  hazelcastInstance.executeTransaction(new TransactionalTask<Object>(){
    @Override public Object execute(    TransactionalTaskContext transactionContext) throws TransactionException {
      TransactionalMap<String,Object> map=transactionContext.getMap(TEST_MAP);
      map.replace(key,value + "other",value);
      return null;
    }
  }
);
  assertFalse("Key remains locked!",map.isLocked(key));
}
