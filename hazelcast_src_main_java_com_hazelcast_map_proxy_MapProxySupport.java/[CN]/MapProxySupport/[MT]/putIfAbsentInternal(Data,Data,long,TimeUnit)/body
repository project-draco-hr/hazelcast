{
  int partitionId=nodeService.getPartitionId(key);
  String txnId=prepareTransaction(partitionId);
  PutIfAbsentOperation putOperation=new PutIfAbsentOperation(name,key,value,txnId,getTTLInMillis(ttl,timeunit));
  putOperation.setValidateTarget(true);
  long backupCallId=mapService.createNewBackupCallQueue();
  putOperation.setBackupCallId(backupCallId);
  putOperation.setServiceName(MAP_SERVICE_NAME);
  Data result=null;
  try {
    Object returnObj=invoke(putOperation,partitionId);
    UpdateResponse updateResponse=(UpdateResponse)returnObj;
    result=updateResponse.getOldValue();
    if (result == null) {
      checkBackups(partitionId,putOperation,updateResponse);
    }
    return result;
  }
 catch (  Throwable throwable) {
    throw (RuntimeException)throwable;
  }
 finally {
    mapService.removeBackupCallQueue(backupCallId);
  }
}
