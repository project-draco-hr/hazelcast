{
  final NodeEngine nodeEngine=getNodeEngine();
  final MapService mapService=getService();
  if (interceptor instanceof HazelcastInstanceAware) {
    ((HazelcastInstanceAware)interceptor).setHazelcastInstance(nodeEngine.getHazelcastInstance());
  }
  String id=mapService.addInterceptor(name,interceptor);
  Collection<MemberImpl> members=nodeEngine.getClusterService().getMemberList();
  for (  MemberImpl member : members) {
    try {
      if (member.localMember())       continue;
      Future f=nodeEngine.getOperationService().invokeOnTarget(SERVICE_NAME,new AddInterceptorOperation(id,interceptor,name),member.getAddress());
      f.get();
    }
 catch (    Throwable t) {
      throw ExceptionUtil.rethrow(t);
    }
  }
  return id;
}
