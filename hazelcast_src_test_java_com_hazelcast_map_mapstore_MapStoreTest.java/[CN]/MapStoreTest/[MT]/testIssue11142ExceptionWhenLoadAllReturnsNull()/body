{
  Config config=new Config();
  String mapname="testIssue11142ExceptionWhenLoadAllReturnsNull";
  MapStoreConfig mapStoreConfig=new MapStoreConfig();
  mapStoreConfig.setImplementation(new MapStoreAdapter<String,String>(){
    @Override public Set<String> loadAllKeys(){
      Set keys=new HashSet();
      keys.add("key");
      return keys;
    }
    public Map loadAll(    Collection keys){
      System.out.println("Loader.loadAll keys " + keys);
      return null;
    }
  }
);
  config.getMapConfig(mapname).setMapStoreConfig(mapStoreConfig);
  HazelcastInstance instance=Hazelcast.newHazelcastInstance(config);
  HazelcastInstance instance2=Hazelcast.newHazelcastInstance(config);
  final IMap map=instance.getMap(mapname);
  for (int i=0; i < 300; i++) {
    map.put(i,i);
  }
  assertEquals(300,map.size());
}
