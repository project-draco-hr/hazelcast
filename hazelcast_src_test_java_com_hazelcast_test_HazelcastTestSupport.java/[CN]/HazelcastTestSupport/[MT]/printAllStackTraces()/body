{
  Map liveThreads=Thread.getAllStackTraces();
  for (  Object o : liveThreads.keySet()) {
    Thread key=(Thread)o;
    System.err.println("Thread " + key.getName());
    StackTraceElement[] trace=(StackTraceElement[])liveThreads.get(key);
    for (    StackTraceElement aTrace : trace) {
      System.err.println("\tat " + aTrace);
    }
  }
}
