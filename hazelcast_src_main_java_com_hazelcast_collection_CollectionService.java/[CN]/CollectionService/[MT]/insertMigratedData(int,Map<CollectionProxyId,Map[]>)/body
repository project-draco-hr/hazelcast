{
  for (  Map.Entry<CollectionProxyId,Map[]> entry : map.entrySet()) {
    CollectionProxyId proxyId=entry.getKey();
    CollectionContainer container=getOrCreateCollectionContainer(partitionId,proxyId);
    Map<Data,Object> objects=entry.getValue()[0];
    for (    Map.Entry<Data,Object> objectEntry : objects.entrySet()) {
      Data key=objectEntry.getKey();
      Object object=objectEntry.getValue();
      if (object instanceof Collection) {
        Collection coll=(Collection)createNew(proxyId);
        coll.addAll((Collection)object);
        container.objects.put(key,coll);
      }
 else {
        container.objects.put(key,object);
      }
    }
    Map<Data,LockInfo> locks=entry.getValue()[1];
    container.locks.putAll(locks);
  }
}
