{
  int remaining=in.readInt();
  while (remaining > 0) {
    ByteBuffer bb=ThreadContext.get().getBufferPool().obtain();
    int sizeToRead=(remaining > BYTE_BUFFER_SIZE) ? BYTE_BUFFER_SIZE : remaining;
    byte[] bytes=new byte[sizeToRead];
    in.readFully(bytes);
    bb.put(bytes);
    add(bb);
    remaining-=sizeToRead;
  }
  postRead();
}
