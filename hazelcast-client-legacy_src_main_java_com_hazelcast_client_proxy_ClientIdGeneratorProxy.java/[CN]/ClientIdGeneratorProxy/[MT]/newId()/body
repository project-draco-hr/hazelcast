{
  int value=residue.getAndIncrement();
  if (value >= BLOCK_SIZE) {
synchronized (this) {
      value=residue.get();
      if (value >= BLOCK_SIZE) {
        local.set(atomicLong.getAndIncrement());
        residue.set(0);
      }
      return newId();
    }
  }
  return local.get() * BLOCK_SIZE + value;
}
