{
  if (future == null) {
    throw new IllegalArgumentException("future must not be null");
  }
  if (future instanceof CompletableFuture) {
    return (CompletableFuture<V>)future;
  }
  return registerCompletableFuture(future);
}
