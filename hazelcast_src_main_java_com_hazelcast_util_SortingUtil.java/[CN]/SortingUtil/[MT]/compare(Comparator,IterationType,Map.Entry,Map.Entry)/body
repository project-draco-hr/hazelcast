{
  Object comparable1=entry1;
  Object comparable2=entry2;
  if (iterationType == IterationType.KEY) {
    comparable1=entry1.getKey();
    comparable2=entry2.getKey();
  }
 else   if (iterationType == IterationType.VALUE) {
    comparable1=entry1.getValue();
    comparable2=entry2.getValue();
  }
  if (comparator != null) {
    return comparator.compare(comparable1,comparable2);
  }
  if (iterationType == IterationType.ENTRY) {
    comparable1=entry1.getValue();
    comparable2=entry2.getValue();
  }
  if (comparable1 instanceof Comparable && comparable2 instanceof Comparable) {
    return ((Comparable)comparable1).compareTo(comparable2);
  }
  return comparable1.hashCode() - comparable2.hashCode();
}
