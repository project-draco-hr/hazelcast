{
  if (comparator != null) {
    return comparator.compare(value1,value2);
  }
 else   if (value1 instanceof Comparable && value2 instanceof Comparable) {
    return ((Comparable)value1).compareTo(value2);
  }
  return value1.hashCode() - value2.hashCode();
}
