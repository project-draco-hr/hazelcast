{
  if (buffer == null)   return Integer.MIN_VALUE;
  if (hash == Integer.MIN_VALUE) {
    int h=1;
    byte[] b=buffer.array();
    for (int i=0; i < b.length; i++) {
      h=31 * h + b[i];
    }
    hash=h;
  }
  return hash;
}
