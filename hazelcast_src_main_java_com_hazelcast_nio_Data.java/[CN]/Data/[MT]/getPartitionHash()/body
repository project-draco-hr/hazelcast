{
  if (partitionHash == -1) {
    if (buffer == null) {
      throw new IllegalStateException("Cannot hash null buffer");
    }
    partitionHash=hashCode();
  }
  return partitionHash;
}
