{
  final long ttl=checkedTime(record.getTtl());
  final long ttlExpirationTime=sumForExpiration(ttl,record.getLastUpdateTime());
  maxIdleMillis=checkedTime(maxIdleMillis);
  final long idleExpirationTime=sumForExpiration(maxIdleMillis,record.getLastAccessTime());
  return Math.min(ttlExpirationTime,idleExpirationTime);
}
