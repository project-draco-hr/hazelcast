{
synchronized (listenerRegLock) {
    String userRegistrationId=UuidUtil.newUnsecureUuidString();
    ClientRegistrationKey registrationKey=new ClientRegistrationKey(userRegistrationId,handler,codec);
    try {
      ClientEventRegistration registration=invoke(registrationKey);
      registrations.put(registrationKey,registration);
    }
 catch (    Exception e) {
      throw new HazelcastException("Listener can not be added",e);
    }
    return userRegistrationId;
  }
}
