{
  EventHandler handler=registrationKey.getHandler();
  ClientMessage request=registrationKey.getRequest();
  handler.beforeListenerRegister();
  ClientInvocation invocation=new ClientInvocation(client,request);
  invocation.setEventHandler(handler);
  try {
    ClientInvocationFuture future=invocation.invoke();
    String registrationId=registrationKey.getCodec().decodeAddResponse(future.get());
    handler.onListenerRegister();
    Address address=future.getInvocation().getSendConnection().getRemoteEndpoint();
    ClientEventRegistration registration=new ClientEventRegistration(registrationId,request.getCorrelationId(),address,registrationKey.getCodec());
    registrations.put(registrationKey,registration);
  }
 catch (  Exception e) {
    EmptyStatement.ignore(e);
  }
}
