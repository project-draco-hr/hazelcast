{
  final AtomicBoolean running=new AtomicBoolean(true);
  Thread t=new Thread(){
    public void run(){
      while (running.get()) {
        client.getMap("mapChildTransaction").get("3");
      }
    }
  }
;
  t.start();
  CBAuthorisation cb=new CBAuthorisation();
  cb.setAmount(15000);
  try {
    TransactionContext context=client.newTransactionContext();
    context.beginTransaction();
    TransactionalMap mapTransaction=context.getMap("mapChildTransaction");
    mapTransaction.put("3",cb);
    cb.setAmount(12000);
    mapTransaction.set("3",cb);
    cb.setAmount(10000);
    mapTransaction.set("3",cb);
    cb.setAmount(900);
    mapTransaction.set("3",cb);
    cb.setAmount(800);
    mapTransaction.set("3",cb);
    cb.setAmount(700);
    mapTransaction.set("3",cb);
    context.commitTransaction();
  }
 catch (  TransactionException e) {
    e.printStackTrace();
    fail();
  }
  running.set(false);
  t.join();
}
