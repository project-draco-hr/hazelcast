{
  if (mapListeners != null) {
    final InvocationQueue sq=InvocationQueue.get();
    final Set<Map.Entry<Address,Boolean>> entries=mapListeners.entrySet();
    for (    final Map.Entry<Address,Boolean> entry : entries) {
      final Address address=entry.getKey();
      final boolean includeValue=entry.getValue();
      if (address.isThisAddress()) {
        try {
          final Data eventKey=(key != null) ? ThreadContext.get().hardCopy(key) : null;
          Data eventValue=null;
          if (includeValue)           eventValue=ThreadContext.get().hardCopy(value);
          enqueueEvent(eventType,name,eventKey,eventValue,address,recordId);
        }
 catch (        final Exception e) {
          e.printStackTrace();
        }
      }
 else {
        final Invocation inv=sq.obtainInvocation();
        inv.reset();
        try {
          final Data eventKey=key;
          Data eventValue=null;
          if (includeValue)           eventValue=value;
          inv.set(name,OP_EVENT,eventKey,eventValue);
          inv.longValue=eventType;
          inv.recordId=recordId;
        }
 catch (        final Exception e) {
          e.printStackTrace();
        }
        final boolean sent=send(inv,address);
        if (!sent)         inv.returnToContainer();
      }
    }
  }
}
