{
  if (mapListeners != null) {
    final PacketQueue sq=PacketQueue.get();
    final Set<Map.Entry<Address,Boolean>> entries=mapListeners.entrySet();
    for (    final Map.Entry<Address,Boolean> entry : entries) {
      final Address address=entry.getKey();
      final boolean includeValue=entry.getValue();
      if (address.isThisAddress()) {
        try {
          final Data eventKey=(key != null) ? ThreadContext.get().hardCopy(key) : null;
          Data eventValue=null;
          if (includeValue)           eventValue=ThreadContext.get().hardCopy(value);
          enqueueEvent(eventType,name,eventKey,eventValue,address);
        }
 catch (        final Exception e) {
          e.printStackTrace();
        }
      }
 else {
        final PacketQueue.Packet packet=sq.obtainPacket();
        packet.reset();
        try {
          final Data eventKey=key;
          Data eventValue=null;
          if (includeValue)           eventValue=value;
          packet.set(name,OP_EVENT,eventKey,eventValue);
          packet.longValue=eventType;
        }
 catch (        final Exception e) {
          e.printStackTrace();
        }
        final boolean sent=send(packet,address);
        if (!sent)         packet.returnToContainer();
      }
    }
  }
}
