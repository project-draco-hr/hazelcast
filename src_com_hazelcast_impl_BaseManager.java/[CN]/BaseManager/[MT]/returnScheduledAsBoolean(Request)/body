{
  if (request.local) {
    final TargetAwareOp mop=(TargetAwareOp)request.attachment;
    mop.setResult(request.response);
  }
 else {
    final Packet packet=obtainPacket();
    request.setPacket(packet);
    if (request.response == Boolean.TRUE) {
      final boolean sent=sendResponse(packet,request.caller);
      if (DEBUG) {
        log(request.local + " returning scheduled response " + sent);
      }
    }
 else {
      sendResponseFailure(packet,request.caller);
    }
  }
}
