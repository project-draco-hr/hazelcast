{
  assertTrueEventually(new AssertTask(){
    @Override public void run() throws Exception {
      final InternalEventService eventService=getNodeEngineImpl(instance).getEventService();
      final Collection<EventRegistration> registrations=eventService.getRegistrations(SERVICE_NAME,EVENT_TOPIC_NAME);
      assertEquals(expected.size(),registrations.size());
      for (      EventRegistration registration : registrations) {
        assertTrue(expected.contains(registration.getSubscriber()));
      }
    }
  }
);
}
