{
  ClusterService clusterService=getService();
  NodeServiceImpl nodeService=(NodeServiceImpl)getNodeService();
  Node node=nodeService.getNode();
  ILogger logger=nodeService.getLogger(SetMasterOperation.class.getName());
  if (!node.joined() && !node.getThisAddress().equals(masterAddress)) {
    logger.log(Level.FINEST,"Handling master response: " + this);
    final Address currentMaster=node.getMasterAddress();
    if (currentMaster != null && !currentMaster.equals(masterAddress)) {
      final Connection conn=node.connectionManager.getConnection(currentMaster);
      if (conn != null && conn.live()) {
        logger.log(Level.FINEST,"Ignoring master response " + this + " since node has an active master: "+ currentMaster);
        return;
      }
    }
    node.setMasterAddress(masterAddress);
    node.connectionManager.getOrConnect(masterAddress);
    if (!clusterService.sendJoinRequest(masterAddress,true)) {
      logger.log(Level.WARNING,"Could not create connection to possible master " + masterAddress);
    }
  }
}
