{
  HazelcastClient hClient=getHazelcastClient();
  final IMap map=hClient.getMap("lockMap");
  final CountDownLatch latch=new CountDownLatch(1);
  map.put("a","b");
  Thread.sleep(10);
  map.lock("a");
  new Thread(new Runnable(){
    public void run(){
      map.lock("a");
      latch.countDown();
    }
  }
).start();
  Thread.sleep(10);
  assertEquals(1,latch.getCount());
  map.unlock("a");
  assertTrue(latch.await(10,TimeUnit.SECONDS));
}
