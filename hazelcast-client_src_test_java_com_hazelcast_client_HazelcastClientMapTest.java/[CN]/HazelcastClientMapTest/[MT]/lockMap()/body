{
  HazelcastInstance h=Hazelcast.newHazelcastInstance(null);
  hClient=getHazelcastClient(h);
  final IMap map=hClient.getMap("ABC");
  final CountDownLatch latch=new CountDownLatch(1);
  map.put("a","b");
  Thread.sleep(1000);
  System.out.println("Getting the lock");
  map.lock("a");
  System.out.println("Got the lock " + Thread.currentThread().getId());
  new Thread(new Runnable(){
    public void run(){
      map.lock("a");
      System.out.println("Thread also get the lock " + Thread.currentThread().getId());
      latch.countDown();
    }
  }
).start();
  Thread.sleep(100);
  assertEquals(1,latch.getCount());
  System.out.println("Unlocking the key");
  map.unlock("a");
  System.out.println("Unlocked the key");
  assertTrue(latch.await(2000,TimeUnit.MILLISECONDS));
}
