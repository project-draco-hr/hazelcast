{
  HazelcastClient hClient=getHazelcastClient();
  final IMap<String,byte[]> map=hClient.getMap("addListenerAndMultiPut");
  map.clear();
  int counter=100;
  assertEquals(0,map.size());
  final CountDownLatch entryAddLatch=new CountDownLatch(counter);
  final CountDownLatch entryUpdatedLatch=new CountDownLatch(counter);
  final CountDownLatch entryRemovedLatch=new CountDownLatch(counter);
  CountDownLatchEntryListener<String,byte[]> listener=new CountDownLatchEntryListener<String,byte[]>(entryAddLatch,entryUpdatedLatch,entryRemovedLatch);
  map.addEntryListener(listener,true);
  assertNull(map.get("hello"));
  Map<String,byte[]> many=new HashMap<String,byte[]>();
  for (int i=0; i < counter; i++) {
    many.put("" + i,new byte[i]);
  }
  map.putAll(many);
  assertTrue(entryAddLatch.await(10,TimeUnit.SECONDS));
}
