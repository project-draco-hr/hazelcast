{
  TransactionImpl transaction;
  TransactionManagerServiceImpl transactionManagerService=mock(TransactionManagerServiceImpl.class);
  RuntimeException expectedException=new RuntimeException("example exception");
  when(transactionManagerService.pickBackupAddresses(anyInt())).thenThrow(expectedException);
  NodeEngine nodeEngine=mock(NodeEngine.class);
  when(nodeEngine.getLocalMember()).thenReturn(new MemberImpl());
  when(nodeEngine.getLogger(TransactionImpl.class)).thenReturn(new DummyLogger());
  transaction=new TransactionImpl(transactionManagerService,nodeEngine,TransactionOptions.getDefault(),null);
  try {
    transaction.begin();
    fail("Transaction expected to fail");
  }
 catch (  Exception e) {
    assertEquals(expectedException,e);
  }
  transaction=new TransactionImpl(transactionManagerService,nodeEngine,TransactionOptions.getDefault(),"123");
  try {
    transaction.begin();
    fail("Transaction expected to fail");
  }
 catch (  Exception e) {
    assertEquals(expectedException,e);
  }
}
