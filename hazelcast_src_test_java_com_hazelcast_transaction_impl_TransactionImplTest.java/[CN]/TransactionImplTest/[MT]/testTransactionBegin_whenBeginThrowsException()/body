{
  TransactionImpl transaction;
  TransactionManagerServiceImpl transactionManagerService=mock(TransactionManagerServiceImpl.class);
  RuntimeException expectedException=new RuntimeException("example exception");
  when(transactionManagerService.pickBackupAddresses(anyInt())).thenThrow(expectedException);
  NodeEngine nodeEngine=mock(NodeEngine.class);
  when(nodeEngine.getOperationService()).thenReturn(operationService);
  when(nodeEngine.getLocalMember()).thenReturn(new MemberImpl());
  when(nodeEngine.getLogger(TransactionImpl.class)).thenReturn(new DummyLogger());
  TransactionOptions options=TransactionOptions.getDefault();
  transaction=new TransactionImpl(transactionManagerService,nodeEngine,options,null);
  try {
    transaction.begin();
    fail("Transaction expected to fail");
  }
 catch (  Exception e) {
    assertEquals(expectedException,e);
  }
  transaction=new TransactionImpl(transactionManagerService,nodeEngine,options,"123");
  try {
    transaction.begin();
    fail("Transaction expected to fail");
  }
 catch (  Exception e) {
    assertEquals(expectedException,e);
  }
}
