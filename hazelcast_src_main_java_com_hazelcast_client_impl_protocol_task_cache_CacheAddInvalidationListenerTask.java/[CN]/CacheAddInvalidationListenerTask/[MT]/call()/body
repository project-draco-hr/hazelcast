{
  final ClientEndpoint endpoint=getEndpoint();
  CacheService cacheService=getService(CacheService.SERVICE_NAME);
  String registrationId=cacheService.addInvalidationListener(parameters.name,new CacheEventListener(){
    @Override public void handleEvent(    Object eventObject){
      if (!endpoint.isAlive()) {
        return;
      }
      if (eventObject instanceof CacheInvalidationMessage) {
        CacheInvalidationMessage message=(CacheInvalidationMessage)eventObject;
        ClientMessage eventMessage=CacheAddInvalidationListenerCodec.encodeCacheInvalidationEvent(message.getName(),message.getKey(),message.getSourceUuid());
        sendClientMessage(message.getKey(),eventMessage);
      }
    }
  }
);
  endpoint.setListenerRegistration(CacheService.SERVICE_NAME,parameters.name,registrationId);
  return registrationId;
}
