{
  fireTtlCleanup();
  if (evictionPolicy == EvictionPolicy.NONE && cache.size() >= maxSize) {
    return;
  }
  if (evictionPolicy != EvictionPolicy.NONE && cache.size() >= maxSize) {
    fireEvictCache();
  }
  final Object value=storageFormat.equals(StorageFormat.HEAP_OBJECT) ? mapService.toObject(data) : data;
  final CacheRecord record=new CacheRecord(key,value);
  cache.put(key,record);
  updateSizeEstimator(calculateCost(record));
}
