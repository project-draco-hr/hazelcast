{
  this.mapName=mapName;
  this.mapService=mapService;
  this.nodeEngine=mapService.getNodeEngine();
  Config config=nodeEngine.getConfig();
  NearCacheConfig nearCacheConfig=config.getMapConfig(mapName).getNearCacheConfig();
  maxSize=nearCacheConfig.getMaxSize() <= 0 ? Integer.MAX_VALUE : nearCacheConfig.getMaxSize();
  maxIdleMillis=nearCacheConfig.getMaxIdleSeconds() * 1000;
  inMemoryFormat=nearCacheConfig.getInMemoryFormat();
  timeToLiveMillis=nearCacheConfig.getTimeToLiveSeconds() * 1000;
  invalidateOnChange=nearCacheConfig.isInvalidateOnChange();
  evictionPolicy=EvictionPolicy.valueOf(nearCacheConfig.getEvictionPolicy());
  cache=new ConcurrentHashMap<Data,CacheRecord>();
  canCleanUp=new AtomicBoolean(true);
  canEvict=new AtomicBoolean(true);
  lastCleanup=Clock.currentTimeMillis();
}
