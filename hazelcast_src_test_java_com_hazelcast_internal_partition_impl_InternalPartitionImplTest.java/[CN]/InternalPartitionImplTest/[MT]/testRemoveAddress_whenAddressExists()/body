{
  for (int i=0; i < MAX_REPLICA_COUNT; i++) {
    replicaAddresses[i]=newAddress(5000 + i);
  }
  partition.setInitialReplicaAddresses(replicaAddresses);
  int replicaIndex=partition.getReplicaIndex(thisAddress);
  assertEquals(replicaIndex,partition.removeAddress(thisAddress));
  assertNull(partition.getReplicaAddress(replicaIndex));
  for (int i=0; i < MAX_REPLICA_COUNT; i++) {
    if (i != replicaIndex) {
      assertEquals(replicaAddresses[i],partition.getReplicaAddress(i));
    }
  }
}
