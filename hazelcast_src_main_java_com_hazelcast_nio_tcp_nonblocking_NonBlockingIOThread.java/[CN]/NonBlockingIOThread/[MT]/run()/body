{
  try {
    for (; ; ) {
      try {
        if (selectNow) {
          runSelectNowLoop();
        }
 else {
          runSelectLoop();
        }
        break;
      }
 catch (      IOException nonFatalException) {
        logger.warning(getName() + " " + nonFatalException.toString(),nonFatalException);
        try {
          Thread.sleep(SELECT_FAILURE_PAUSE_MILLIS);
        }
 catch (        InterruptedException i) {
          interrupt();
        }
      }
    }
  }
 catch (  OutOfMemoryError e) {
    oomeHandler.handle(e);
  }
catch (  Throwable e) {
    logger.warning("Unhandled exception in " + getName(),e);
  }
 finally {
    closeSelector();
  }
  logger.finest(getName() + " finished");
}
