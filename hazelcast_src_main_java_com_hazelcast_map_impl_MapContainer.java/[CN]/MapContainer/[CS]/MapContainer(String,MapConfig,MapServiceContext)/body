{
  this.name=name;
  this.mapConfig=mapConfig;
  this.maxIdleMillis=calculateMaxIdleMillis(mapConfig);
  this.ttlMillisFromConfig=calculateTTLMillis(mapConfig);
  this.mapServiceContext=mapServiceContext;
  this.partitioningStrategy=createPartitioningStrategy();
  final NodeEngine nodeEngine=mapServiceContext.getNodeEngine();
  recordFactory=createRecordFactory(nodeEngine);
  initWanReplication(nodeEngine);
  interceptors=new CopyOnWriteArrayList<MapInterceptor>();
  interceptorMap=new ConcurrentHashMap<String,MapInterceptor>();
  nearCacheSizeEstimator=createNearCacheSizeEstimator();
  mapStoreContext=createMapStoreContext(this);
  mapStoreContext.start();
}
