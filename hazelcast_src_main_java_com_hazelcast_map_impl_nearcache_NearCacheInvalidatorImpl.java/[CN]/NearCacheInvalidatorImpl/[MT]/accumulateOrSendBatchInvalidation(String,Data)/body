{
  if (!isServerNearCacheInvalidationEnabled(mapName) && !hasInvalidationListener(mapName)) {
    return;
  }
  InvalidationQueue invalidationQueue=getOrPutIfAbsent(invalidationQueues,mapName,invalidationQueueConstructor);
  invalidationQueue.offer(mapServiceContext.toData(key));
  if (invalidationQueue.size() >= batchSize) {
    sendBatchInvalidation(mapName,invalidationQueue);
  }
}
