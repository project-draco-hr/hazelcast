{
  if (invalidationQueue == null) {
    return;
  }
  if (!invalidationQueue.tryAcquire()) {
    return;
  }
  int size=invalidationQueue.size();
  List<Data> keysToBeInvalidated=new ArrayList<Data>(size);
  for (int i=0; i < size; i++) {
    Data key=invalidationQueue.poll();
    if (key == null) {
      break;
    }
    keysToBeInvalidated.add(key);
  }
  try {
    sendInvalidationToServerNearCaches(mapName,keysToBeInvalidated);
    sendInvalidationToClientNearCaches(mapName,keysToBeInvalidated,null);
  }
  finally {
    invalidationQueue.release();
  }
}
