{
  final HazelcastInstance instance=createHazelcastInstance();
  final ILock lock=instance.getLock(randomString());
  final CountDownLatch latch0=new CountDownLatch(1);
  final CountDownLatch latch=new CountDownLatch(1);
  new Thread(){
    public void run(){
      lock.lock();
      latch0.countDown();
      sleepMillis(500);
      lock.unlock();
    }
  }
.start();
  latch0.await();
  lock.lock(1000,TimeUnit.MILLISECONDS);
  assertTrue(lock.isLocked());
  sleepSeconds(2);
  assertFalse(lock.isLocked());
}
