{
  final TestHazelcastInstanceFactory nodeFactory=createHazelcastInstanceFactory(2);
  final Config config=new Config();
  final AtomicInteger integer=new AtomicInteger(0);
  final HazelcastInstance lockOwner=nodeFactory.newHazelcastInstance(config);
  final HazelcastInstance instance1=nodeFactory.newHazelcastInstance(config);
  final String name="testLockOwnerDies";
  final ILock lock=lockOwner.getLock(name);
  lock.lock();
  Assert.assertEquals(true,lock.isLocked());
  Thread t=new Thread(new Runnable(){
    public void run(){
      final ILock lock=instance1.getLock(name);
      lock.lock();
      integer.incrementAndGet();
    }
  }
);
  t.start();
  Assert.assertEquals(0,integer.get());
  lockOwner.getLifecycleService().shutdown();
  Thread.sleep(5000);
  Assert.assertEquals(1,integer.get());
}
