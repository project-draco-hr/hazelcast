{
  final TestHazelcastInstanceFactory nodeFactory=createHazelcastInstanceFactory(2);
  final Config config=new Config();
  final HazelcastInstance instance1=nodeFactory.newHazelcastInstance(config);
  final HazelcastInstance instance2=nodeFactory.newHazelcastInstance(config);
  final int key=new Random().nextInt();
  final ILock lock=instance1.getLock(key);
  lock.lock();
  assertEquals(1,lock.getLockCount());
  assertTrue(lock.tryLock());
  assertEquals(2,lock.getLockCount());
  lock.unlock();
  assertEquals(1,lock.getLockCount());
  assertTrue(lock.isLocked());
  lock.unlock();
  assertEquals(0,lock.getLockCount());
  assertFalse(lock.isLocked());
  assertEquals(-1L,lock.getRemainingLeaseTime());
}
