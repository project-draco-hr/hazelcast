{
  if (valueData != null && valueData.isPortable()) {
    FieldDefinition fd=valueData.getClassDefinition().get(attributeName);
    if (fd == null)     throw new QueryException("Unknown Attribute: " + attributeName);
    return AttributeType.getAttributeType(fd.getType().getId());
  }
  return getAttributeTypeViaReflection(attributeName);
}
