{
  if (KEY_ATTRIBUTE_NAME.equals(attributeName)) {
    return ReflectionHelper.getAttributeType(getKey().getClass());
  }
 else   if (THIS_ATTRIBUTE_NAME.equals(attributeName)) {
    return ReflectionHelper.getAttributeType(getValue().getClass());
  }
  boolean key=attributeName.startsWith(KEY_ATTRIBUTE_NAME);
  Data data;
  if (key) {
    attributeName=attributeName.substring(KEY_ATTRIBUTE_NAME.length() + 1);
    data=getKeyData();
  }
 else {
    data=getValueData();
  }
  if (data != null && data.isPortable()) {
    PortableContext portableContext=serializationService.getPortableContext();
    return PortableExtractor.getAttributeType(portableContext,data,attributeName);
  }
  return ReflectionHelper.getAttributeType(key ? getKey() : getValue(),attributeName);
}
