{
  if (transaction.getState() != Transaction.State.ACTIVE) {
    throw new IllegalStateException("Transaction is not active!");
  }
  transaction.attachParticipant(partitionId,getServiceName());
  return transaction.getTxnId();
}
