{
  out.writeInt(map.size());
  for (  Map.Entry<Data,Collection<Data>> entry : map.entrySet()) {
    entry.getKey().writeData(out);
    Collection<Data> coll=entry.getValue();
    out.writeInt(coll.size());
    for (    Data data : coll) {
      data.writeData(out);
    }
  }
}
