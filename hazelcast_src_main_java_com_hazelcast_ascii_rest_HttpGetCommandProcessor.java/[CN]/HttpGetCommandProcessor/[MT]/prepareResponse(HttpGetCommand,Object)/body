{
  if (value == null) {
    command.send204();
  }
 else {
    if (value instanceof byte[]) {
      command.setResponse(HttpCommand.CONTENT_TYPE_BINARY,(byte[])value);
    }
 else     if (value instanceof RestValue) {
      RestValue restValue=(RestValue)value;
      command.setResponse(restValue.getContentType(),restValue.getValue());
    }
 else     if (value instanceof String) {
      command.setResponse(HttpCommand.CONTENT_TYPE_PLAIN_TEXT,((String)value).getBytes());
    }
 else {
      command.setResponse(HttpCommand.CONTENT_TYPE_BINARY,textCommandService.toByteArray(value));
    }
  }
}
