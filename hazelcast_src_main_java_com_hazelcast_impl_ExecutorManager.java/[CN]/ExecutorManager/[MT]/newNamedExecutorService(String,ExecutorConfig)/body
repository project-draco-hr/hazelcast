{
  ClassLoader classLoader=node.getConfig().getClassLoader();
  logger.log(Level.FINEST,"creating new named executor service " + name);
  ThreadPoolExecutor threadPoolExecutor=new ThreadPoolExecutor(executorConfig.getCorePoolSize(),executorConfig.getMaxPoolSize(),executorConfig.getKeepAliveSeconds(),TimeUnit.SECONDS,new UnboundedBlockingQueue<Runnable>(),new ExecutorThreadFactory(node.threadGroup,getThreadNamePrefix(name),classLoader),new RejectionHandler()){
    protected void beforeExecute(    Thread t,    Runnable r){
      ThreadContext threadContext=ThreadContext.get();
      CallContext callContext=mapThreadCallContexts.get(t);
      if (callContext == null) {
        callContext=new CallContext(threadContext.createNewThreadId(),false);
        mapThreadCallContexts.put(t,callContext);
      }
      threadContext.setCurrentFactory(node.factory);
      threadContext.setCallContext(callContext);
    }
  }
;
  NamedExecutorService es=new NamedExecutorService(name,classLoader,executorConfig,threadPoolExecutor);
  mapExecutors.put(name,es);
  return es;
}
