{
  if (!enabled) {
    return;
  }
  if (started.compareAndSet(false,true)) {
    logger.log(Level.INFO,"Hazelcast JMX agent enabled");
    if (showDetails()) {
      startStatsCollector();
    }
    MBeanServer mbs=mBeanServer();
    try {
      ClusterMBean clusterMBean=new ClusterMBean(this,this.name);
      mbs.registerMBean(clusterMBean,clusterMBean.getObjectName());
      DataMBean dataMBean=new DataMBean(this);
      dataMBean.setParentName(clusterMBean.getRootName());
      mbs.registerMBean(dataMBean,dataMBean.getObjectName());
    }
 catch (    Exception e) {
      logger.log(Level.WARNING,"Unable to start JMX service",e);
    }
  }
}
