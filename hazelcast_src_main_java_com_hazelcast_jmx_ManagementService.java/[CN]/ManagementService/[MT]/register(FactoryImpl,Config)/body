{
  if (!started) {
    start();
  }
  if (!started) {
    return;
  }
  MBeanServer mbs=ManagementFactory.getPlatformMBeanServer();
  try {
    ClusterMBean clusterMBean=new ClusterMBean(instance,config);
    mbs.registerMBean(clusterMBean,clusterMBean.getObjectName());
    DataMBean dataMBean=new DataMBean(instance);
    dataMBean.setParentName(clusterMBean.getRootName());
    mbs.registerMBean(dataMBean,dataMBean.getObjectName());
  }
 catch (  Exception e) {
    logger.log(Level.WARNING,"Unable to start JMX service",e);
    return;
  }
}
