{
  if (file == null) {
    throw new NullPointerException();
  }
  Thread thread=Thread.currentThread();
  StringBuffer sb=new StringBuffer();
  sb.append(thread.getClass());
  sb.append(' ');
  sb.append(thread.getName());
  sb.append('\n');
  StackTraceElement[] elements=thread.getStackTrace();
  for (  StackTraceElement element : elements) {
    sb.append('\t').append(element.toString()).append('\n');
  }
  PrintWriter out=null;
  try {
    out=new PrintWriter(new BufferedWriter(new FileWriter(file,true)));
    out.print(sb.toString());
    out.close();
  }
 catch (  IOException e) {
    e.printStackTrace();
  }
 finally {
    IOUtil.closeResource(out);
  }
}
