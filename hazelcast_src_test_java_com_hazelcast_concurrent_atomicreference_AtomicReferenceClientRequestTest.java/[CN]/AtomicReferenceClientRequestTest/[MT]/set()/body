{
  IAtomicReference<String> reference=getAtomicReference();
  final SimpleClient client=getClient();
  client.send(new SetRequest(name,toData(null)));
  assertNull(client.receive());
  assertNull(reference.get());
  client.send(new SetRequest(name,toData("foo")));
  assertNull(client.receive());
  assertEquals("foo",reference.get());
  client.send(new SetRequest(name,toData("foo")));
  assertNull(client.receive());
  assertEquals("foo",reference.get());
  client.send(new SetRequest(name,toData(null)));
  assertNull(client.receive());
  assertEquals(null,reference.get());
}
