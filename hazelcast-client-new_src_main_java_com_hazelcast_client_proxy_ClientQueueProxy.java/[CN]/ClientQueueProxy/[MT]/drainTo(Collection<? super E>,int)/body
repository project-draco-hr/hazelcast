{
  ClientMessage request=QueueDrainToMaxSizeParameters.encode(name,maxElements);
  ClientMessage response=invoke(request);
  DataCollectionResultParameters resultParameters=DataCollectionResultParameters.decode(response);
  Collection<Data> resultCollection=resultParameters.result;
  for (  Data data : resultCollection) {
    E e=toObject(data);
    c.add(e);
  }
  return resultCollection.size();
}
