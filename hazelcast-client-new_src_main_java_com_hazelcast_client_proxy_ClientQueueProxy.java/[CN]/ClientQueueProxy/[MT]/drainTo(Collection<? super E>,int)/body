{
  ClientMessage request=QueueDrainToMaxSizeCodec.encodeRequest(name,maxElements);
  ClientMessage response=invoke(request);
  QueueDrainToMaxSizeCodec.ResponseParameters resultParameters=QueueDrainToMaxSizeCodec.decodeResponse(response);
  Collection<Data> resultCollection=resultParameters.list;
  for (  Data data : resultCollection) {
    E e=toObject(data);
    c.add(e);
  }
  return resultCollection.size();
}
