{
  Map<String,String> map=new HashMap<String,String>();
  map.put("1","a");
  map.put("2","b");
  map.put("3","c");
  map.put("4","d");
  String commandLine="MPUTALL 0 default #" + map.size() * 2;
  StringBuilder sizeLine=new StringBuilder("");
  int i=map.keySet().size();
  for (  String k : map.keySet()) {
    sizeLine.append(k.getBytes().length);
    sizeLine.append(" ").append(map.get(k).getBytes().length);
    i--;
    if (i != 0) {
      sizeLine.append(" ");
    }
  }
  OutputStream out=doOp(commandLine,sizeLine.toString());
  for (  String k : map.keySet()) {
    out.write(k.getBytes());
    out.write(map.get(k).getBytes());
  }
  assertTrue(read(socket).contains("OK"));
  doOp("ENTRYSET 0 map default",null);
  List<String> keys=read(socket);
  System.out.println("keys = " + keys);
}
