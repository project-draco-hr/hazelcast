{
  final CountDownLatch latch=new CountDownLatch(1);
  new Thread(new Runnable(){
    public void run(){
      try {
        OutputStream out=doOp("MADDLISTENER default true #1","" + "2".getBytes().length);
        out.write("b".getBytes());
        out.write("\r\n".getBytes());
        out.flush();
        assertTrue(read(socket).contains("OK"));
        final String value="a";
        putFromAnotherThread("1",value);
        List<String> values=read(socket);
        latch.countDown();
      }
 catch (      IOException e) {
        e.printStackTrace();
      }
catch (      InterruptedException e) {
        e.printStackTrace();
      }
    }
  }
).start();
  assertFalse(latch.await(20000,TimeUnit.MILLISECONDS));
}
