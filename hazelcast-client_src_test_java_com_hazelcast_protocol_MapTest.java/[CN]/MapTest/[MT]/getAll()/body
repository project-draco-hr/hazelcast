{
  put(socket,"1".getBytes(),"a".getBytes(),0);
  put(socket,"2".getBytes(),"b".getBytes(),0);
  put(socket,"3".getBytes(),"c".getBytes(),0);
  put(socket,"4".getBytes(),"d".getBytes(),0);
  OutputStream out=doOp("MGETALL 0 default 0 #3","1 1 1");
  out.write("1".getBytes());
  out.write("2".getBytes());
  out.write("4".getBytes());
  out.write("\r\n".getBytes());
  out.flush();
  List<String> list=read(socket);
  assertTrue(list.contains("a"));
  assertTrue(list.contains("b"));
  assertTrue(list.contains("d"));
  assertFalse(list.contains("c"));
}
