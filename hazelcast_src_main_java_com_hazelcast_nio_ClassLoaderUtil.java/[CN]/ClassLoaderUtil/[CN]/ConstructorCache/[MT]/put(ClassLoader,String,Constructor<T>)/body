{
  ConcurrentMap<String,WeakReference<Constructor>> innerCache=cache.get(classLoader);
  if (innerCache == null) {
    innerCache=new ConcurrentHashMap<String,WeakReference<Constructor>>(100);
    ConcurrentMap<String,WeakReference<Constructor>> old=cache.putIfAbsent(classLoader,innerCache);
    if (old != null) {
      innerCache=old;
    }
  }
  innerCache.put(className,new WeakReference<Constructor>(constructor));
  return constructor;
}
