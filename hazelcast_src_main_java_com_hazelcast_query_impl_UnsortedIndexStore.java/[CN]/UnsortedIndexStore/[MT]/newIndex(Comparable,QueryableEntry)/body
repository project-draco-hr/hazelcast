{
  ensureNotLocked();
  takeLock();
  try {
    Data indexKey=record.getIndexKey();
    ConcurrentMap<Data,QueryableEntry> records=mapRecords.get(newValue);
    if (records == null) {
      records=new ConcurrentHashMap<Data,QueryableEntry>();
      ConcurrentMap<Data,QueryableEntry> existing=mapRecords.putIfAbsent(newValue,records);
      if (existing != null) {
        records=existing;
      }
    }
    records.put(indexKey,record);
  }
  finally {
    releaseLock();
  }
}
