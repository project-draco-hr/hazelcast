{
  E value;
  if (localPool == null) {
    value=objectQueue.poll();
    if (value == null) {
      value=objectFactory.createNew();
    }
  }
 else {
    value=localPool.poll();
    if (value == null) {
      int totalDrained=objectQueue.drainTo(localPool,maxSize);
      if (totalDrained == 0) {
        for (int i=0; i < 4; i++) {
          localPool.add(objectFactory.createNew());
        }
      }
      value=localPool.poll();
      if (value == null) {
        value=objectFactory.createNew();
      }
    }
  }
  return value;
}
