{
  super(connection,ioThread,loggingService);
  buffer=IOUtil.newByteBuffer(bufferSize,direct);
  lastHandle=Clock.currentTimeMillis();
  builder=new ClientMessageBuilder(new ClientMessageBuilder.MessageHandler(){
    @Override public void handleMessage(    ClientMessage message){
      connectionManager.handleClientMessage(message,connection);
    }
  }
);
}
