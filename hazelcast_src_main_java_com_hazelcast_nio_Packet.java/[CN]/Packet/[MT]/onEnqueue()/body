{
  bbSizes.clear();
  bbHeader.clear();
  bbHeader.putShort(operation.getValue());
  bbHeader.putInt(blockId);
  bbHeader.putInt(threadId);
  byte booleans=0;
  if (lockCount != 0) {
    booleans=ByteUtil.setTrue(booleans,0);
  }
  if (timeout != -1) {
    booleans=ByteUtil.setTrue(booleans,1);
  }
  if (ttl != -1) {
    booleans=ByteUtil.setTrue(booleans,2);
  }
  if (txnId != -1) {
    booleans=ByteUtil.setTrue(booleans,3);
  }
  if (longValue != Long.MIN_VALUE) {
    booleans=ByteUtil.setTrue(booleans,4);
  }
  if (version != -1) {
    booleans=ByteUtil.setTrue(booleans,5);
  }
  if (client) {
    booleans=ByteUtil.setTrue(booleans,6);
  }
  if (lockAddress == null) {
    booleans=ByteUtil.setTrue(booleans,7);
  }
  bbHeader.put(booleans);
  if (lockCount != 0) {
    bbHeader.putInt(lockCount);
  }
  if (timeout != -1) {
    bbHeader.putLong(timeout);
  }
  if (ttl != -1) {
    bbHeader.putLong(ttl);
  }
  if (txnId != -1) {
    bbHeader.putLong(txnId);
  }
  if (longValue != Long.MIN_VALUE) {
    bbHeader.putLong(longValue);
  }
  if (version != -1) {
    bbHeader.putLong(version);
  }
  if (lockAddress != null) {
    lockAddress.writeObject(bbHeader);
  }
  bbHeader.putLong(callId);
  bbHeader.put(responseType);
  putString(bbHeader,name);
  byte indexCount=(indexes == null) ? 0 : (byte)indexes.length;
  bbHeader.put(indexCount);
  for (byte i=0; i < indexCount; i++) {
    bbHeader.putLong(indexes[i]);
    bbHeader.put(indexTypes[i]);
  }
  bbHeader.putInt(key == null ? -1 : key.partitionHash);
  bbHeader.putInt(value == null ? -1 : value.partitionHash);
  bbHeader.flip();
  bbSizes.putInt(bbHeader.limit());
  bbSizes.putInt(key == null ? 0 : key.size);
  bbSizes.putInt(value == null ? 0 : value.size);
  bbSizes.put(PACKET_VERSION);
  bbSizes.flip();
  totalSize=0;
  totalSize+=bbSizes.limit();
  totalSize+=bbHeader.limit();
  totalSize+=key == null ? 0 : key.size;
  totalSize+=value == null ? 0 : value.size;
}
