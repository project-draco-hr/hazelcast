{
  if (!isPersistStatusSet(PERSIST_TYPE)) {
    if (destination.remaining() < INT_SIZE_IN_BYTES + 1) {
      return false;
    }
    int type=data.getType();
    destination.putInt(type);
    boolean hasClassDefinition=context.hasClassDefinition(data);
    destination.put((byte)(hasClassDefinition ? 1 : 0));
    if (hasClassDefinition) {
      classDefinitionSerializer=new ClassDefinitionSerializer(data,context);
    }
    setPersistStatus(PERSIST_TYPE);
  }
  return true;
}
