{
  if (!isPersistStatusSet(PERSIST_VALUE)) {
    if (size > 0) {
      int bytesWritable=destination.remaining();
      int bytesNeeded=size - valueOffset;
      int bytesWrite;
      boolean done;
      if (bytesWritable >= bytesNeeded) {
        bytesWrite=bytesNeeded;
        done=true;
      }
 else {
        bytesWrite=bytesWritable;
        done=false;
      }
      byte[] byteArray=data.toByteArray();
      destination.put(byteArray,valueOffset,bytesWrite);
      valueOffset+=bytesWrite;
      if (!done) {
        return false;
      }
    }
    setPersistStatus(PERSIST_VALUE);
  }
  return true;
}
