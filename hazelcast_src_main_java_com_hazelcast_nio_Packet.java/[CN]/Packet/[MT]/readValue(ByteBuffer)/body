{
  if (!isPersistStatusSet(PERSIST_VALUE)) {
    if (payload == null) {
      payload=new byte[size];
    }
    if (size > 0) {
      int bytesReadable=source.remaining();
      int bytesNeeded=size - valueOffset;
      boolean done;
      int bytesRead;
      if (bytesReadable >= bytesNeeded) {
        bytesRead=bytesNeeded;
        done=true;
      }
 else {
        bytesRead=bytesReadable;
        done=false;
      }
      source.get(payload,valueOffset,bytesRead);
      valueOffset+=bytesRead;
      if (!done) {
        return false;
      }
    }
    setPersistStatus(PERSIST_VALUE);
  }
  return true;
}
