{
  TransactionLog log=new TransactionLog();
  KeyAwareTransactionLogRecord record=mock(KeyAwareTransactionLogRecord.class);
  String key="foo";
  when(record.getKey()).thenReturn(key);
  log.add(record);
  assertSame(record,log.get(key));
  assertEquals(1,log.size());
}
