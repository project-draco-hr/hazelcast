{
  HazelcastInstance hz=createHazelcastInstance();
  NodeEngine nodeEngine=mock(NodeEngine.class);
  RuntimeException e=new RuntimeException("expected exception");
  Mockito.when(nodeEngine.getConfigClassLoader()).thenThrow(e);
  PartitioningStrategyConfig cfg=new PartitioningStrategyConfig();
  cfg.setPartitioningStrategyClass("com.hazelcast.partition.strategy.StringPartitioningStrategy");
  expectedException.expect(new IsSame<RuntimeException>(e));
  PartitioningStrategy partitioningStrategy=getPartitioningStrategy(nodeEngine,"whenStrategyInstantiationThrowsException_getSamePartitioningStrategy_rethrowsException",cfg);
}
