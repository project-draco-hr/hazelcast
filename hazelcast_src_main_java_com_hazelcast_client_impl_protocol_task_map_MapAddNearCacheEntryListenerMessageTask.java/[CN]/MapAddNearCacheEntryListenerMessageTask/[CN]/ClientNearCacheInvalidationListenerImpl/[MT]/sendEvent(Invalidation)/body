{
  if (event instanceof BatchNearCacheInvalidation) {
    List<Data> keys=getKeysExcludingSource(((BatchNearCacheInvalidation)event),endpoint.getUuid());
    if (!isEmpty(keys)) {
      sendClientMessage(parameters.name,encodeIMapBatchInvalidationEvent(keys));
    }
  }
 else   if (!endpoint.getUuid().equals(event.getSourceUuid())) {
    if (event instanceof SingleNearCacheInvalidation) {
      Data key=((SingleNearCacheInvalidation)event).getKey();
      sendClientMessage(key,encodeIMapInvalidationEvent(key));
    }
 else     if (event instanceof CleaningNearCacheInvalidation) {
      sendClientMessage(parameters.name,encodeIMapInvalidationEvent(null));
    }
  }
}
