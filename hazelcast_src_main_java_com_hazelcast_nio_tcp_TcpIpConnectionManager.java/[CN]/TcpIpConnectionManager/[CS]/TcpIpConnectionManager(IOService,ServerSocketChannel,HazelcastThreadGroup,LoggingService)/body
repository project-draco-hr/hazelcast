{
  this.ioService=ioService;
  this.metricRegistry=ioService.getMetricRegistry();
  this.hazelcastThreadGroup=hazelcastThreadGroup;
  this.serverSocketChannel=serverSocketChannel;
  this.logger=loggingService.getLogger(TcpIpConnectionManager.class.getName());
  this.socketReceiveBufferSize=ioService.getSocketReceiveBufferSize() * IOService.KILO_BYTE;
  this.socketSendBufferSize=ioService.getSocketSendBufferSize() * IOService.KILO_BYTE;
  this.socketClientReceiveBufferSize=ioService.getSocketClientReceiveBufferSize() * IOService.KILO_BYTE;
  this.socketClientSendBufferSize=ioService.getSocketClientSendBufferSize() * IOService.KILO_BYTE;
  this.socketLingerSeconds=ioService.getSocketLingerSeconds();
  this.socketConnectTimeoutSeconds=ioService.getSocketConnectTimeoutSeconds();
  this.socketKeepAlive=ioService.getSocketKeepAlive();
  this.socketNoDelay=ioService.getSocketNoDelay();
  this.selectorThreadCount=ioService.getSelectorThreadCount();
  this.inSelectors=new InSelectorImpl[selectorThreadCount];
  this.outSelectors=new OutSelectorImpl[selectorThreadCount];
  final Collection<Integer> ports=ioService.getOutboundPorts();
  this.outboundPortCount=ports.size();
  this.outboundPorts.addAll(ports);
  this.socketChannelWrapperFactory=ioService.getSocketChannelWrapperFactory();
  this.loggingService=loggingService;
  metricRegistry.scanAndRegister(this,"tcp.connection");
}
