{
  if (connection == null) {
    return;
  }
  if (logger.isFinestEnabled()) {
    log(Level.FINEST,"Destroying " + connection);
  }
  if (activeConnections.remove(connection)) {
    ioBalancer.connectionRemoved(connection);
  }
  final Address endPoint=connection.getEndPoint();
  if (endPoint != null) {
    connectionsInProgress.remove(endPoint);
    connectionsMap.remove(endPoint,connection);
    fireConnectionRemovedEvent(connection,endPoint);
  }
  if (connection.isAlive()) {
    connection.close();
  }
}
