{
  if (connection == null) {
    return;
  }
  if (logger.isFinestEnabled()) {
    logger.finest("Destroying " + connection);
  }
  activeConnections.remove(connection);
  final Address endPoint=connection.getEndPoint();
  if (endPoint != null) {
    connectionsInProgress.remove(endPoint);
    connectionsMap.remove(endPoint,connection);
    if (connection instanceof TcpIpConnection) {
      ioThreadingModel.onConnectionRemoved((TcpIpConnection)connection);
    }
    if (live) {
      ioService.getEventService().executeEventCallback(new StripedRunnable(){
        @Override public void run(){
          for (          ConnectionListener listener : connectionListeners) {
            listener.connectionRemoved(connection);
          }
        }
        @Override public int getKey(){
          return endPoint.hashCode();
        }
      }
);
    }
  }
  if (connection.isAlive()) {
    connection.close();
    closedCount.inc();
  }
}
