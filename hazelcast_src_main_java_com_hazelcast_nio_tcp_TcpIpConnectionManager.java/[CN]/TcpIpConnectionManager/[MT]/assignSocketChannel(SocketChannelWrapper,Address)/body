{
  InetSocketAddress remoteSocketAddress=(InetSocketAddress)channel.socket().getRemoteSocketAddress();
  String remoteHost=remoteSocketAddress.getHostName();
  int index=getSelectorIndex(remoteHost);
  final TcpIpConnection connection=new TcpIpConnection(this,inSelectors[index],outSelectors[index],connectionIdGen.incrementAndGet(),channel);
  ioBalancer.connectionAdded(connection);
  connection.setEndPoint(endpoint);
  activeConnections.add(connection);
  acceptedSockets.remove(channel);
  connection.start();
  logConnectionEstablished(channel,remoteSocketAddress,index);
  return connection;
}
