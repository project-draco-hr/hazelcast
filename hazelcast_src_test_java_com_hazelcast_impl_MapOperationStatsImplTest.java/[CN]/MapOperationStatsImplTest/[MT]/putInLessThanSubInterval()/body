{
  MapOperationStatsImpl mapOperationStats=new MapOperationStatsImpl(100);
  long start=System.currentTimeMillis();
  long counter=0;
  boolean run=true;
  while (run) {
    mapOperationStats.incrementPuts();
    counter++;
    Thread.sleep(1);
    if (System.currentTimeMillis() - start > 5) {
      run=false;
    }
  }
  MapOperationStats stats=mapOperationStats.getPublishedStats();
  assertEquals(counter,stats.getNumberOfPuts());
  long interval=stats.getPeriodEnd() - stats.getPeriodStart();
  assertTrue(interval < 50);
}
