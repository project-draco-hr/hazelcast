{
  if (!alive.compareAndSet(true,false)) {
    return;
  }
  try {
    if (socketChannel != null && socketChannel.isOpen()) {
      readHandler.shutdown();
      writeHandler.shutdown();
      socketChannel.close();
    }
  }
 catch (  Exception e) {
    logger.warning(e);
  }
  Object connAddress=getConnectionAddress();
  String message="Connection [" + connAddress + "] lost. Reason: ";
  if (t == null) {
    message+="Socket explicitly closed";
  }
 else {
    message+=t.getClass().getName() + "[" + t.getMessage()+ "]";
  }
  logger.info(message);
  connectionManager.destroyConnection(this);
  connectionManager.getIoService().onDisconnect(endPoint);
  if (t != null && monitor != null) {
    monitor.onError(t);
  }
}
