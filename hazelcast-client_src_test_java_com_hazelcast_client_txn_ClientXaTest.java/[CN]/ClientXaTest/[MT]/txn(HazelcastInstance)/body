{
  tm.begin();
  final TransactionContext context=instance.newTransactionContext();
  final XAResource xaResource=context.getXaResource();
  final Transaction transaction=tm.getTransaction();
  transaction.enlistResource(xaResource);
  boolean error=false;
  try {
    final TransactionalMap m=context.getMap("m");
    m.put(random.nextInt(10),"value");
  }
 catch (  Exception e) {
    e.printStackTrace();
    error=true;
  }
 finally {
    close(error,xaResource);
  }
}
