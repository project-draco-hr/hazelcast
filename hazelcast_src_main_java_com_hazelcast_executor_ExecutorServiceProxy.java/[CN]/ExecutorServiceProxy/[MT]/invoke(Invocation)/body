{
  final NodeEngine nodeEngine=getNodeEngine();
  final boolean sync=checkSync();
  final Future future=inv.invoke();
  if (sync) {
    Object response;
    try {
      response=future.get();
    }
 catch (    Exception e) {
      response=e;
    }
    return new CompletedFuture<T>(nodeEngine.getSerializationService(),response);
  }
  return new DelegatingFuture<T>(future,nodeEngine.getSerializationService());
}
