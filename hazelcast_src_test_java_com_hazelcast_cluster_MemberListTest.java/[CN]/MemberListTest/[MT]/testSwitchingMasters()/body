{
  List<HazelcastInstance> instanceList=buildInstances(5,55701);
  final HazelcastInstance h1=instanceList.get(0);
  final HazelcastInstance h2=instanceList.get(1);
  final HazelcastInstance h3=instanceList.get(2);
  final HazelcastInstance h4=instanceList.get(3);
  final HazelcastInstance h5=instanceList.get(4);
  assertClusterSizeEventually(5,h1);
  assertClusterSizeEventually(5,h2);
  assertClusterSizeEventually(5,h3);
  assertClusterSizeEventually(5,h4);
  assertClusterSizeEventually(5,h5);
  sleepSeconds(15);
  Member master=h1.getCluster().getLocalMember();
  assertMasterEquals(master,h2);
  assertMasterEquals(master,h3);
  assertMasterEquals(master,h4);
  assertMasterEquals(master,h5);
  h1.shutdown();
  assertClusterSizeEventually(4,h2);
  assertClusterSizeEventually(4,h3);
  assertClusterSizeEventually(4,h4);
  assertClusterSizeEventually(4,h5);
  master=h2.getCluster().getLocalMember();
  assertMasterEquals(master,h2);
  assertMasterEquals(master,h3);
  assertMasterEquals(master,h4);
  assertMasterEquals(master,h5);
  sleepSeconds(10);
  assertClusterSize(4,h2);
  assertClusterSize(4,h3);
  assertClusterSize(4,h4);
  assertClusterSize(4,h5);
  assertMasterEquals(master,h2);
  assertMasterEquals(master,h3);
  assertMasterEquals(master,h4);
  assertMasterEquals(master,h5);
}
