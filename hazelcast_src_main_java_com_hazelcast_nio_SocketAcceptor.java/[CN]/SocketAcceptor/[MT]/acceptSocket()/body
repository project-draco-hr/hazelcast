{
  if (!connectionManager.isLive())   return;
  SocketChannelWrapper socketChannelWrapper=null;
  try {
    final SocketChannel socketChannel=serverSocketChannel.accept();
    if (socketChannel != null) {
      socketChannelWrapper=connectionManager.wrapSocketChannel(socketChannel,false);
    }
  }
 catch (  Exception e) {
    if (e instanceof ClosedChannelException && !connectionManager.isLive()) {
      logger.log(Level.FINEST,"Terminating socket acceptor thread...",e);
    }
 else {
      logger.log(Level.WARNING,"Unexpected error while accepting connection!",e);
      try {
        serverSocketChannel.close();
      }
 catch (      Exception ignore) {
      }
      connectionManager.ioService.onFatalError(e);
    }
  }
  if (socketChannelWrapper != null) {
    final SocketChannelWrapper socketChannel=socketChannelWrapper;
    connectionManager.executeAsync(new Runnable(){
      public void run(){
        String message=socketChannel.socket().getLocalPort() + " is accepting socket connection from " + socketChannel.socket().getRemoteSocketAddress();
        logger.log(Level.INFO,message);
        connectionManager.ioService.getSystemLogService().logConnection(message);
        try {
          MemberSocketInterceptor memberSocketInterceptor=connectionManager.getMemberSocketInterceptor();
          if (memberSocketInterceptor != null) {
            memberSocketInterceptor.onAccept(socketChannel.socket());
          }
          socketChannel.configureBlocking(false);
          connectionManager.initSocket(socketChannel.socket());
          connectionManager.assignSocketChannel(socketChannel);
        }
 catch (        Exception e) {
          logger.log(Level.WARNING,e.getMessage(),e);
          connectionManager.ioService.getSystemLogService().logConnection(e.getMessage());
          if (socketChannel != null) {
            try {
              socketChannel.close();
            }
 catch (            IOException ignored) {
            }
          }
        }
      }
    }
);
  }
}
