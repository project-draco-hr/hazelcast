{
  Selector selector=null;
  try {
    log(Level.FINEST,"Starting SocketAcceptor on " + serverSocketChannel);
    selector=Selector.open();
    serverSocketChannel.configureBlocking(false);
    serverSocketChannel.register(selector,SelectionKey.OP_ACCEPT);
    while (connectionManager.isLive()) {
      final int keyCount=selector.select();
      if (Thread.currentThread().isInterrupted()) {
        break;
      }
      if (keyCount == 0) {
        continue;
      }
      final Set<SelectionKey> setSelectedKeys=selector.selectedKeys();
      final Iterator<SelectionKey> it=setSelectedKeys.iterator();
      while (it.hasNext()) {
        final SelectionKey sk=it.next();
        it.remove();
        if (sk.isValid() && sk.isAcceptable()) {
          acceptSocket();
        }
      }
    }
  }
 catch (  OutOfMemoryError e) {
    OutOfMemoryErrorDispatcher.onOutOfMemory(e);
  }
catch (  IOException e) {
    log(Level.SEVERE,e.getClass().getName() + ": " + e.getMessage(),e);
  }
 finally {
    closeSelector(selector);
  }
}
