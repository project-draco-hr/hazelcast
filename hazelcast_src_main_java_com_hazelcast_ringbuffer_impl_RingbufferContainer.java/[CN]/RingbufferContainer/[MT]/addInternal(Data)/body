{
  tailSequence++;
  if (tailSequence - capacity == headSequence) {
    headSequence++;
  }
  int index=toIndex(tailSequence);
  Object item=dataItem;
  if (inMemoryFormat == OBJECT) {
    item=serializationService.toObject(dataItem);
  }
  ringItems[index]=item;
  if (isTTLEnabled()) {
    ringExpirationMs[index]=currentTimeMillis() + ttlMs;
  }
  return tailSequence;
}
