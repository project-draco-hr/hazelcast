{
  out.writeInt(map.size());
  for (  Map.Entry<String,Map> entry : map.entrySet()) {
    String name=entry.getKey();
    out.writeUTF(name);
    Map<Data,CollectionWrapper> collections=entry.getValue();
    out.writeInt(collections.size());
    for (    Map.Entry<Data,CollectionWrapper> collectionEntry : collections.entrySet()) {
      Data key=collectionEntry.getKey();
      key.writeData(out);
      CollectionWrapper wrapper=collectionEntry.getValue();
      Collection<CollectionRecord> coll=wrapper.getCollection();
      out.writeInt(coll.size());
      for (      CollectionRecord record : coll) {
        record.writeData(out);
      }
    }
  }
}
