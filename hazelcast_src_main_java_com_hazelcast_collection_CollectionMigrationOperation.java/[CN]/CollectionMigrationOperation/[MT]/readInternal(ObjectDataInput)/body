{
  int mapSize=in.readInt();
  map=new HashMap<CollectionProxyId,Map>(mapSize);
  for (int i=0; i < mapSize; i++) {
    CollectionProxyId proxyId=new CollectionProxyId();
    proxyId.readData(in);
    int collectionSize=in.readInt();
    Map<Data,CollectionWrapper> collections=new HashMap<Data,CollectionWrapper>();
    for (int j=0; j < collectionSize; j++) {
      Data key=new Data();
      key.readData(in);
      int collSize=in.readInt();
      Collection<CollectionRecord> coll=new ArrayList<CollectionRecord>(collSize);
      for (int k=0; k < collSize; k++) {
        CollectionRecord record=new CollectionRecord();
        record.readData(in);
        coll.add(record);
      }
      collections.put(key,new CollectionWrapper(coll));
    }
    map.put(proxyId,collections);
  }
}
