{
  if (discoveryStrategiesConfig.getNodeFilter() != null) {
    return discoveryStrategiesConfig.getNodeFilter();
  }
  if (discoveryStrategiesConfig.getNodeFilterClass() != null) {
    try {
      ClassLoader cl=configClassLoader;
      if (cl == null) {
        cl=DefaultDiscoveryService.class.getClassLoader();
      }
      String className=discoveryStrategiesConfig.getNodeFilterClass();
      return (NodeFilter)cl.loadClass(className).newInstance();
    }
 catch (    Exception e) {
      throw new RuntimeException("Failed to configure discovery node filter",e);
    }
  }
  return null;
}
