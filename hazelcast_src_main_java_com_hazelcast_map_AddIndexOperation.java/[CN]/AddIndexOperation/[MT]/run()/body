{
  MapService mapService=getService();
  MapInfo mapInfo=mapService.getMapInfo(name);
  RecordStore rs=mapService.getPartitionContainer(getPartitionId()).getRecordStore(name);
  ConcurrentMap<Data,Record> records=rs.getRecords();
  IndexService indexService=mapInfo.getIndexService();
  SerializationServiceImpl ss=(SerializationServiceImpl)getNodeEngine().getSerializationService();
  Index index=indexService.addOrGetIndex(attributeName,ordered);
  for (  Record record : records.values()) {
    Data key=record.getKey();
    index.saveEntryIndex(new QueryEntry(ss,key,key,record.getValue()));
  }
}
