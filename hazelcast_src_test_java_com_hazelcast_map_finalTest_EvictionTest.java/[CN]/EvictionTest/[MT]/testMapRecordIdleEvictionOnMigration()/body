{
  Config cfg=new Config();
  MapConfig mc=cfg.getMapConfig("testMapRecordIdleEvictionOnMigration");
  int maxIdleSeconds=5;
  int size=1000;
  mc.setMaxIdleSeconds(maxIdleSeconds);
  StaticNodeFactory factory=new StaticNodeFactory(3);
  HazelcastInstance instance1=factory.newHazelcastInstance(cfg);
  final IMap map=instance1.getMap("testMapRecordIdleEvictionOnMigration");
  for (int i=0; i < size; i++) {
    map.put(i,i);
  }
  HazelcastInstance instance2=factory.newHazelcastInstance(cfg);
  HazelcastInstance instance3=factory.newHazelcastInstance(cfg);
  Thread.sleep(maxIdleSeconds * 1000 + 3000);
  Assert.assertEquals(0,map.size());
}
