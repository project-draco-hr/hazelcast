{
  OneShotExecutionCallback oneShotExecutionCallback=null;
  if (nearCache != null || statisticsEnabled) {
    oneShotExecutionCallback=new OneShotExecutionCallback(){
      @Override protected void onResponseInternal(      Object responseData){
        if (nearCache != null) {
          if (cacheOnUpdate) {
            storeInNearCache(keyData,valueData,value);
          }
 else {
            invalidateNearCache(keyData);
          }
        }
        if (statisticsEnabled) {
          handleStatisticsOnPut(isGet,start,responseData);
        }
      }
      @Override protected void onFailureInternal(      Throwable t){
      }
    }
;
  }
  ClientDelegatingFuture delegatingFuture;
  if (oneShotExecutionCallback != null) {
    delegatingFuture=new CallbackAwareClientDelegatingFuture(future,clientContext.getSerializationService(),PUT_RESPONSE_DECODER,oneShotExecutionCallback);
    delegatingFuture.andThen(oneShotExecutionCallback);
  }
 else {
    delegatingFuture=new ClientDelegatingFuture(future,clientContext.getSerializationService(),PUT_RESPONSE_DECODER);
  }
  return delegatingFuture;
}
