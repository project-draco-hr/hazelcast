{
  final Config config=new Config();
  TestHazelcastInstanceFactory factory=createHazelcastInstanceFactory(2);
  final HazelcastInstance instance1=factory.newHazelcastInstance(config);
  final HazelcastInstance instance2=factory.newHazelcastInstance(config);
  final ISemaphore semaphore=instance1.getSemaphore("testTryAcquire");
  int numberOfPermits=20;
  assertTrue(semaphore.init(numberOfPermits));
  for (int i=0; i < numberOfPermits; i++) {
    assertEquals(numberOfPermits - i,semaphore.availablePermits());
    assertEquals(semaphore.tryAcquire(),true);
  }
  assertFalse(semaphore.tryAcquire());
  assertEquals(semaphore.availablePermits(),0);
}
