{
  Config config=new Config();
  final HazelcastInstance hz=Hazelcast.newHazelcastInstance(config);
  final String queueName="test";
  final SerializationService ss=new SerializationServiceImpl(0);
  final Client c=new Client();
  c.auth();
  final Thread thread=new Thread(){
    public void run(){
      try {
        c.send(new OfferRequest(queueName,ss.toData("item1")));
        while (!isInterrupted()) {
          System.err.println("--> " + c.receive());
        }
        c.close();
      }
 catch (      IOException e) {
        e.printStackTrace();
      }
    }
  }
;
  thread.start();
  Thread.sleep(2000);
  Object item=hz.getQueue(queueName).peek();
  System.err.println("done : " + item.equals("item1"));
  thread.interrupt();
  c.close();
  thread.join();
  hz.getMap("test").put(1111,1111);
  Thread.sleep(2000);
  Hazelcast.shutdownAll();
}
