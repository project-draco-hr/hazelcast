{
  Config config=new Config();
  TestHazelcastInstanceFactory factory=createHazelcastInstanceFactory(3);
  HazelcastInstance instance1=factory.newHazelcastInstance(config);
  IAtomicReference<SimpleObject> reference1=instance1.getAtomicReference("test");
  SimpleObject object=new SimpleObject(1);
  reference1.set(object);
  HazelcastInstance instance2=factory.newHazelcastInstance(config);
  instance1.shutdown();
  IAtomicReference<SimpleObject> reference2=instance2.getAtomicReference("test");
  SimpleObject objectTest1=reference2.get();
  assertEquals(object,objectTest1);
  HazelcastInstance instance3=factory.newHazelcastInstance(config);
  instance2.shutdown();
  IAtomicReference<SimpleObject> reference3=instance3.getAtomicReference("test");
  SimpleObject objectTest2=reference3.get();
  assertEquals(object,objectTest2);
}
