{
  future=context.getExecutionService().submit(new Runnable(){
    public void run(){
      while (active && !Thread.currentThread().isInterrupted()) {
        try {
          EventResponseHandler eventResponseHandler=new EventResponseHandler();
          if (key == null) {
            context.getInvocationService().invokeOnRandomTarget(registrationRequest,eventResponseHandler);
          }
 else {
            context.getInvocationService().invokeOnKeyOwner(registrationRequest,key,eventResponseHandler);
          }
        }
 catch (        Exception ignored) {
        }
      }
    }
  }
);
  try {
    if (!latch.await(1,TimeUnit.MINUTES)) {
      throw new ClientException("Could not register listener!!!");
    }
  }
 catch (  InterruptedException e) {
  }
  return UUID.randomUUID().toString();
}
