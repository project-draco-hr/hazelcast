{
  initialKeys.clear();
  int maxSizePerNode=getApproximateMaxSize(maxSizeConfig,PER_NODE) - 1;
  Iterator keyIterator=loadedKeys.iterator();
  try {
    while (keyIterator.hasNext()) {
      Object key=keyIterator.next();
      Data dataKey=mapServiceContext.toData(key,partitioningStrategy);
      if (mapServiceContext.isOwnedKey(dataKey)) {
        initialKeys.put(dataKey,key);
        if (initialKeys.size() == maxSizePerNode) {
          break;
        }
      }
    }
  }
  finally {
    if (keyIterator instanceof Closeable) {
      IOUtil.closeResource((Closeable)keyIterator);
    }
  }
}
