{
  final BasicMapStoreContext basicMapStoreContext=new BasicMapStoreContext();
  basicMapStoreContext.setMapContainer(mapContainer);
  final MapServiceContext mapServiceContext=mapContainer.getMapServiceContext();
  final NodeEngine nodeEngine=mapServiceContext.getNodeEngine();
  final String mapName=mapContainer.getName();
  final MapConfig mapConfig=mapContainer.getMapConfig();
  final MapStoreConfig mapStoreConfig=mapConfig.getMapStoreConfig();
  final ClassLoader configClassLoader=nodeEngine.getConfigClassLoader();
  final Object store=createStore(mapName,mapStoreConfig,configClassLoader);
  nodeEngine.getConfig().getMapConfig(mapName).getMapStoreConfig().setImplementation(store);
  final MapStoreWrapper storeWrapper=new MapStoreWrapper(mapName,store);
  basicMapStoreContext.setStoreWrapper(storeWrapper);
  callLifecycleSupportInit(mapName,store,mapStoreConfig,nodeEngine);
  return basicMapStoreContext;
}
