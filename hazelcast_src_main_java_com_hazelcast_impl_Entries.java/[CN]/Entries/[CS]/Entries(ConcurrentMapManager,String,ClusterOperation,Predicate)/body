{
  this.concurrentMapManager=concurrentMapManager;
  this.name=name;
  this.operation=operation;
  if (name.startsWith(Prefix.MULTIMAP)) {
    colKeyValues=new LinkedList<Map.Entry>();
  }
 else {
    colKeyValues=new HashSet<Map.Entry>();
  }
  TransactionImpl txn=ThreadContext.get().getCallContext().getTransaction();
  this.checkValue=(Instance.InstanceType.MAP == BaseManager.getInstanceType(name)) && (operation == CONCURRENT_MAP_ITERATE_VALUES || operation == CONCURRENT_MAP_ITERATE_ENTRIES);
  if (txn != null) {
    List<Map.Entry> entriesUnderTxn=txn.newEntries(name);
    if (entriesUnderTxn != null) {
      if (predicate != null) {
        for (        Map.Entry entry : entriesUnderTxn) {
          if (predicate.apply((MapEntry)entry)) {
            colKeyValues.add(entry);
          }
        }
      }
 else {
        colKeyValues.addAll(entriesUnderTxn);
      }
    }
  }
}
