{
  for (; ; ) {
    final Object oldState=state;
    if (isDone(oldState)) {
      logger.warning("The Future.complete(Object value) can only be called once. Request: " + invocationToString() + ", current response: "+ getState()+ ", new response: "+ value);
      return false;
    }
    if (compareAndSetState(oldState,value)) {
      unblockAll(oldState,defaultExecutor);
      return true;
    }
  }
}
