{
  ComputeServiceBuilder mockComputeServiceBuilder=mock(ComputeServiceBuilder.class);
  doReturn(nodes).when(mockComputeServiceBuilder).getFilteredNodes();
  JCloudsDiscoveryStrategy jCloudsDiscoveryStrategy=new JCloudsDiscoveryStrategy(mockComputeServiceBuilder);
  Iterable<DiscoveryNode> runningNodes=jCloudsDiscoveryStrategy.discoverNodes();
  for (  DiscoveryNode node : runningNodes) {
    assertTrue(addressesOfRunningInstances.contains(node.getPrivateAddress()));
  }
}
