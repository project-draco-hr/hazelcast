{
  if (request instanceof BaseTransactionRequest) {
    ((BaseTransactionRequest)request).setTxnId(proxy.getTxnId());
    ((BaseTransactionRequest)request).setClientThreadId(Thread.currentThread().getId());
  }
  final ClientInvocationService invocationService=proxy.getClient().getInvocationService();
  final SerializationService ss=proxy.getClient().getSerializationService();
  try {
    final Future f=invocationService.invokeOnConnection(request,proxy.getConnection());
    return ss.toObject(f.get());
  }
 catch (  Exception e) {
    throw ExceptionUtil.rethrow(e);
  }
}
