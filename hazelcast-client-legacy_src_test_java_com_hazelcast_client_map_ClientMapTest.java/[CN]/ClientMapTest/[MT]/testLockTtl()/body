{
  final IMap<String,String> map=createMap();
  map.put("key1","value1");
  assertEquals("value1",map.get("key1"));
  map.lock("key1",2,TimeUnit.SECONDS);
  final CountDownLatch latch=new CountDownLatch(1);
  new Thread(){
    @Override public void run(){
      map.tryPut("key1","value2",5,TimeUnit.SECONDS);
      latch.countDown();
    }
  }
.start();
  assertTrue(latch.await(10,TimeUnit.SECONDS));
  assertFalse(map.isLocked("key1"));
  assertEquals("value2",map.get("key1"));
  map.forceUnlock("key1");
}
