{
  final String output;
synchronized (lock) {
    app.handleCommand(command);
    output=buffer.toString();
    buffer.setLength(0);
  }
  return output;
}
