{
  eventCount.inc();
  lastHandle=Clock.currentTimeMillis();
  if (!connection.isAlive()) {
    return;
  }
  if (lastMessage == null) {
    lastMessage=poll();
  }
  if (lastMessage == null && buffer.position() == 0) {
    ready=true;
    return;
  }
  writeBuffer();
  ready=false;
  registerWrite();
}
