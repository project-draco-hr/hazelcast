{
  final Map<Integer,MemberGroup> memberGroups=new HashMap<Integer,MemberGroup>();
  for (  MemberImpl member : members) {
    for (    Entry<Integer,MemberGroupConfig> groupConfigEntry : memberGroupConfigMap.entrySet()) {
      if (AddressPicker.matchAddress(member.getAddress().getHost(),groupConfigEntry.getValue().getInterfaces())) {
        MemberGroup group=memberGroups.get(groupConfigEntry.getKey());
        if (group == null) {
          group=new DefaultMemberGroup();
          memberGroups.put(groupConfigEntry.getKey(),group);
        }
        group.addMember(member);
        break;
      }
    }
  }
  return memberGroups.values();
}
