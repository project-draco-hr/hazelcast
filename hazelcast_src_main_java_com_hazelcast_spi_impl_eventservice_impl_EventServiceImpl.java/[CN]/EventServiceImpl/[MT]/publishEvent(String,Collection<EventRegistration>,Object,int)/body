{
  Data eventData=null;
  for (  EventRegistration registration : registrations) {
    if (!(registration instanceof Registration)) {
      throw new IllegalArgumentException();
    }
    if (isLocal(registration)) {
      executeLocal(serviceName,event,registration,orderKey);
      continue;
    }
    if (eventData == null) {
      eventData=serializationService.toData(event);
    }
    EventPacket eventPacket=new EventPacket(registration.getId(),serviceName,eventData);
    sendEventPacket(registration.getSubscriber(),eventPacket,orderKey);
  }
}
