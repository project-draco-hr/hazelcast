{
  final int indexBracketStart=address.indexOf('[');
  final int indexBracketEnd=address.indexOf(']',indexBracketStart);
  final int indexColon=address.indexOf(':');
  final int lastIndexColon=address.lastIndexOf(':');
  final String host;
  final int port;
  if (indexColon > -1 && lastIndexColon > indexColon) {
    if (indexBracketStart == 0 && indexBracketEnd > indexBracketStart && lastIndexColon == indexBracketEnd + 1) {
      host=address.substring(indexBracketStart + 1,indexBracketEnd);
      port=Integer.parseInt(address.substring(lastIndexColon + 1));
    }
 else {
      host=address;
      port=defaultPort;
    }
  }
 else   if (indexColon > 0 && indexColon == lastIndexColon) {
    host=address.substring(0,indexColon);
    port=Integer.parseInt(address.substring(indexColon + 1));
  }
 else {
    host=address;
    port=defaultPort;
  }
  return new AddressHolder(host,port);
}
