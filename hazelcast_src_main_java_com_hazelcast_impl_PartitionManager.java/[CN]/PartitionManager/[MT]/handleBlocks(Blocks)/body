{
  for (  Block block : blockOwners.lsBlocks) {
    Block blockReal=getOrCreateBlock(block.getBlockId());
    boolean same=sameBlocks(block,blockReal);
    blockReal.setOwner(block.getOwner());
    blockReal.setMigrationAddress(block.getMigrationAddress());
    if (thisAddress.equals(blockReal.getOwner()) && blockReal.isMigrating()) {
      startMigration(new Block(block));
    }
 else     if (!same && block.getOwner() != null) {
      boolean started=blockReal.isMigrating();
      if (started) {
        fireMigrationEvent(started,new Block(block));
      }
 else {
        fireMigrationEvent(started,new Block(block.getBlockId(),null,block.getOwner()));
      }
    }
    if (!same) {
      invalidateBlocksHash();
    }
  }
}
