{
  Packet packet;
  try {
    Connection oldConnection=connection;
    connection=client.connectionManager.getConnection();
    if (oldConnection == null || restoredConnection(oldConnection,connection)) {
      logger.log(Level.FINEST,"restoredConnection");
      outRunnable.sendReconnectCall();
      if (oldConnection != null) {
        redoUnfinishedCalls(oldConnection);
      }
    }
    if (connection == null) {
      outRunnable.clusterIsDown(oldConnection);
      Thread.sleep(50);
    }
 else {
      packet=reader.readPacket(connection);
      logger.log(Level.FINEST,"Reading " + packet.getOperation() + " Call id: "+ packet.getCallId());
      Call call=callMap.remove(packet.getCallId());
      if (call != null) {
        call.setResponse(packet);
      }
 else {
        if (packet.getOperation().equals(ClusterOperation.EVENT)) {
          client.getListenerManager().enqueue(packet);
        }
        if (packet.getCallId() != -1) {
          logger.log(Level.SEVERE,"In Thread can not handle: " + packet.getOperation() + " : "+ packet.getCallId());
        }
      }
    }
  }
 catch (  RuntimeException re) {
    throw re;
  }
catch (  Throwable e) {
    logger.log(Level.FINE,"InRunnable [" + connection + "] got an exception:"+ e.toString());
    outRunnable.clusterIsDown(connection);
  }
}
