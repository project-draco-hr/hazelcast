{
  Packet packet;
  try {
    Connection oldConnection=connection;
    connection=client.connectionManager.getConnection();
    if (restoredConnection(oldConnection,connection)) {
      client.executorServiceManager.interruptExecutingTasks(new MemberLeftException());
    }
    if (connection == null) {
      interruptWaitingCalls();
    }
 else {
      packet=reader.readPacket(connection);
      Call call=callMap.remove(packet.getCallId());
      if (call != null) {
        if (call.getRequest().getOperation().equals(ClusterOperation.REMOTELY_EXECUTE)) {
          client.executorServiceManager.handleExecutionResponse(packet);
        }
 else {
synchronized (call) {
            call.setResponse(packet);
            call.notify();
          }
        }
      }
 else {
        if (packet.getOperation().equals(ClusterOperation.EVENT)) {
          client.listenerManager.enqueue(packet);
        }
        if (packet.getCallId() == -1) {
        }
 else {
          throw new RuntimeException("In Thread can not handle: " + packet.getOperation() + " : "+ packet.getCallId());
        }
      }
    }
  }
 catch (  RuntimeException re) {
    throw re;
  }
catch (  Exception e) {
    logger.info("InRunnable got an exception:" + e.getMessage());
    client.connectionManager.destroyConnection(connection);
  }
}
