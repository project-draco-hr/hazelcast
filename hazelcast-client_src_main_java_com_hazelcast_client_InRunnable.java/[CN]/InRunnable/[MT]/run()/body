{
  while (true) {
    Connection connection=null;
    Packet packet=null;
    try {
      connection=connectionManager.getConnection();
      if (connection == null) {
        notifyWaitingCalls();
        continue;
      }
      packet=reader.readPacket(connection);
      Call c=null;
      if (packet.isRedoOnDisConnect()) {
        c=callMap.get(packet.getCallId());
      }
 else {
        c=callMap.remove(packet.getCallId());
      }
      if (c != null) {
synchronized (c) {
          c.setResponse(packet);
          c.notify();
        }
      }
 else {
        if (packet.getOperation().equals(ClusterOperation.EVENT)) {
          listenerManager.enqueue(packet);
        }
      }
    }
 catch (    IOException e) {
      connectionManager.destroyConnection(connection);
      continue;
    }
  }
}
