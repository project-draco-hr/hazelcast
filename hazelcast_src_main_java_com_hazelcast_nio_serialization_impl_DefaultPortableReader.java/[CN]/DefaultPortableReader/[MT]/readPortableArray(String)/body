{
  final int currentPos=in.position();
  try {
    FieldDefinition fd=cd.getField(fieldName);
    if (fd == null) {
      throw throwUnknownFieldException(fieldName);
    }
    if (fd.getType() != FieldType.PORTABLE_ARRAY) {
      throw new HazelcastSerializationException("Not a Portable array field: " + fieldName);
    }
    int pos=readPosition(fd);
    in.position(pos);
    int len=in.readInt();
    int factoryId=in.readInt();
    int classId=in.readInt();
    checkFactoryAndClass(fd,factoryId,classId);
    final Portable[] portables=new Portable[len];
    if (len > 0) {
      final int offset=in.position();
      for (int i=0; i < len; i++) {
        final int start=in.readInt(offset + i * Bits.INT_SIZE_IN_BYTES);
        in.position(start);
        portables[i]=serializer.readAndInitialize(in,factoryId,classId);
      }
    }
    return portables;
  }
  finally {
    in.position(currentPos);
  }
}
