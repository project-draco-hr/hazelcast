{
  IMap<String,Object> map=hz.getMap(DEFAULT_MAP_NAME);
  CookieStore cookieStore=new BasicCookieStore();
  assertEquals("true",executeRequest("write",serverPort1,cookieStore));
  assertEquals(1,map.size());
  String oldSessionId=findHazelcastSessionId(map);
  assertNotNull(oldSessionId);
  assertEquals("value",executeRequest("read",serverPort2,cookieStore));
  assertEquals("true",executeRequest("reload",serverPort2,cookieStore));
  String newSessionId=findHazelcastSessionId(map);
  assertEquals(1,map.size());
  assertNotNull(map.get(newSessionId));
  SessionState sessionState=(SessionState)map.get(newSessionId);
  SerializationService ss=getNode(hz).getSerializationService();
  assertEquals("first-value",ss.toObject(sessionState.getAttributes().get("first-key")));
  assertEquals("second-value",ss.toObject(sessionState.getAttributes().get("second-key")));
}
