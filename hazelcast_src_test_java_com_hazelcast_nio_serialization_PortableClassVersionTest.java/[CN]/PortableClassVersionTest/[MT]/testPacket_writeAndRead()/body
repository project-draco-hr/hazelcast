{
  SerializationService ss=createSerializationService(10);
  UsernamePasswordCredentials credentials=new UsernamePasswordCredentials("test","pass");
  ClientPrincipal principal=new ClientPrincipal("uuid","uuid2");
  Data data=ss.toData(new AuthenticationRequest(credentials,principal));
  Packet packet=new Packet(data);
  ByteBuffer buffer=ByteBuffer.allocate(1024);
  assertTrue(packet.writeTo(buffer));
  SerializationService ss2=createSerializationService(1);
  buffer.flip();
  packet=new Packet();
  assertTrue(packet.readFrom(buffer));
  AuthenticationRequest request=ss2.toObject(packet.getData());
}
