{
  bbos.setBufferProvider(bufferProvider);
  bbos.reset();
  if (obj instanceof byte[]) {
    bbos.write((byte)40);
    byte[] bytes=(byte[])obj;
    bbos.writeInt(bytes.length);
    bbos.write((byte[])obj);
  }
 else   if (obj instanceof Long) {
    bbos.write((byte)41);
    bbos.writeLong(((Long)obj).longValue());
  }
 else   if (obj instanceof Integer) {
    bbos.write((byte)42);
    bbos.writeInt(((Integer)obj).intValue());
  }
 else   if (obj instanceof DataSerializable) {
    bbos.write((byte)45);
    bbos.writeUTF(obj.getClass().getName());
    ((DataSerializable)obj).writeData(bbos);
    bbos.writeInt(STREAM_END);
  }
 else   if (obj instanceof String) {
    bbos.write((byte)46);
    String str=(String)obj;
    bbos.writeUTF(str);
  }
 else {
    bbos.write((byte)66);
    ObjectOutputStream os=new ObjectOutputStream(bbos);
    os.writeUnshared(obj);
  }
  bbos.flush();
}
