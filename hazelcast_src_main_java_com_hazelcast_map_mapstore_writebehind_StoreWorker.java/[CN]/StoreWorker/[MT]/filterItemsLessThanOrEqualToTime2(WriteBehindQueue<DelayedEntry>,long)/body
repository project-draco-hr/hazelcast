{
  if (queue == null || queue.size() == 0) {
    return Collections.emptyList();
  }
  List<DelayedEntry> delayedEntries=null;
  final Iterator<DelayedEntry> iterator=queue.iterator();
  while (iterator.hasNext()) {
    final DelayedEntry e=iterator.next();
    if (delayedEntries == null) {
      delayedEntries=new ArrayList<DelayedEntry>();
    }
    if (e.getStoreTime() <= now) {
      delayedEntries.add(e);
    }
  }
  if (delayedEntries == null) {
    return Collections.emptyList();
  }
  return delayedEntries;
}
