{
  if (removed) {
    if (instanceType.isSet()) {
      factory.node.concurrentMapManager.new MRemoveItem().removeItem(name,key);
    }
 else     if (!newRecord) {
      if (instanceType.isMap()) {
        factory.node.concurrentMapManager.new MRemove().remove(name,key);
      }
 else       if (instanceType.isMultiMap()) {
        if (value == null) {
          factory.node.concurrentMapManager.new MRemove().remove(name,key);
        }
 else {
          factory.node.concurrentMapManager.new MRemoveMulti().remove(name,key,value);
        }
      }
    }
    factory.node.concurrentMapManager.new MLock().unlock(name,key,-1);
  }
 else {
    if (instanceType.isMultiMap()) {
      factory.node.concurrentMapManager.new MPutMulti().put(name,key,value);
    }
 else {
      if (getRecord) {
        factory.node.concurrentMapManager.new MLock().unlock(name,key,-1);
      }
 else       if (value != null) {
        factory.node.concurrentMapManager.new MPut().putAfterCommit(name,key,value,ttl,id);
      }
 else {
        factory.node.concurrentMapManager.new MLock().unlock(name,key,-1);
      }
    }
  }
}
