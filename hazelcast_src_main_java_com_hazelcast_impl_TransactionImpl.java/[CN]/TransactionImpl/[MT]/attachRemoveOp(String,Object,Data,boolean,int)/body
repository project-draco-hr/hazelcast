{
  Instance.InstanceType instanceType=ConcurrentMapManager.getInstanceType(name);
  Object matchValue=(instanceType.isMultiMap()) ? toObject(value) : null;
  TransactionRecord rec=findTransactionRecord(name,key,matchValue);
  Data oldValue=null;
  if (rec == null) {
    rec=new TransactionRecord(name,key,value,newRecord);
    transactionRecords.add(rec);
  }
 else {
    oldValue=rec.value;
    rec.value=value;
  }
  rec.valueCount=valueCount;
  rec.removed=true;
  return oldValue;
}
