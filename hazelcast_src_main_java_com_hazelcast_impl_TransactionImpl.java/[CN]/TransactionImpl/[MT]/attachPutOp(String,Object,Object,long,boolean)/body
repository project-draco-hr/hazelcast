{
  Instance.InstanceType instanceType=ConcurrentMapManager.getInstanceType(name);
  Object matchValue=(instanceType.isMultiMap()) ? value : null;
  TransactionRecord rec=findTransactionRecord(name,key,matchValue);
  if (rec == null) {
    rec=new TransactionRecord(name,key,value,newRecord);
    rec.timeout=timeout;
    transactionRecords.add(rec);
    return null;
  }
 else {
    Object old=rec.value;
    rec.value=value;
    rec.removed=false;
    return old;
  }
}
