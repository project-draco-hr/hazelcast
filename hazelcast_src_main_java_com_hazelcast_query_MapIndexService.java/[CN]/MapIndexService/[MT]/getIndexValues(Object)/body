{
  if (hasIndexedAttributes) {
    int indexCount=mapIndexes.size();
    long[] newIndexes=new long[indexCount];
    if (value instanceof Data) {
      value=toObject((Data)value);
    }
    Collection<Index> indexes=mapIndexes.values();
    for (    Index index : indexes) {
      int attributedIndex=index.getAttributeIndex();
      newIndexes[attributedIndex]=index.extractLongValue(value);
    }
    if (indexTypes == null || indexTypes.length != indexCount) {
synchronized (indexTypesLock) {
        if (indexTypes == null || indexTypes.length != indexCount) {
          indexTypes=new byte[indexCount];
          for (          Index index : indexes) {
            int attributedIndex=index.getAttributeIndex();
            indexTypes[attributedIndex]=index.getIndexType();
          }
        }
      }
    }
    return newIndexes;
  }
  return null;
}
