{
  TestMapStore mapStore=new TestMapStore();
  Config c=new Config();
  c.getMapConfig("test").setMapStoreConfig(new MapStoreConfig().setEnabled(true).setWriteDelaySeconds(delay).setImplementation(mapStore));
  mapStore.setLoadAllKeys(false);
  for (int i=1; i < 6; i++) {
    mapStore.store(i,"value" + i);
  }
  HazelcastInstance hz=Hazelcast.newHazelcastInstance(c);
  IMap map=hz.getMap("test");
  assertEquals("value1",map.get(1));
  assertTrue("Evict 1",map.evict(1));
  assertEquals("value1",map.get(1));
  assertEquals("value2",map.get(2));
  assertTrue("Evict 2",map.evict(2));
  assertTrue("containsKey should be true!",map.containsKey(2));
  assertEquals("value3",map.get(3));
  assertTrue("Evict 3",map.evict(3));
  assertEquals("value3",map.put(3,"valuex"));
  assertEquals("value4",map.get(4));
  assertTrue("Evict 4",map.evict(4));
  assertEquals("value4",map.remove(4));
  assertEquals("value5",map.get(5));
  assertTrue("Evict 5",map.evict(5));
  assertEquals("value5",map.putIfAbsent(5,"valuex"));
}
