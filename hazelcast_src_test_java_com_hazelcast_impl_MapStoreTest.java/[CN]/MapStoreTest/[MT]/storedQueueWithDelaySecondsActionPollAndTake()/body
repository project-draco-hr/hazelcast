{
  final ConcurrentMap<Long,String> STORE=new ConcurrentHashMap<Long,String>();
  STORE.put(1l,"Event1");
  STORE.put(2l,"Event2");
  STORE.put(3l,"Event3");
  STORE.put(4l,"Event4");
  STORE.put(5l,"Event5");
  STORE.put(6l,"Event6");
  Config config=new Config();
  config.getMapConfig("queue-map").setMapStoreConfig(new MapStoreConfig().setWriteDelaySeconds(1).setImplementation(new SimpleMapStore<Long,String>(STORE)));
  config.getQueueConfig("tasks").setBackingMapRef("queue-map");
  HazelcastInstance h=Hazelcast.newHazelcastInstance(config);
  IQueue q=h.getQueue("tasks");
  assertEquals(STORE.size(),q.size());
  assertEquals(STORE.get(1l),q.take());
  assertEquals(STORE.get(2l),q.take());
}
