{
  final Registration registration=registrationIdMap.remove(id);
  if (registration != null) {
    final Collection<Registration> all=registrations.get(topic);
    if (all != null) {
      all.remove(registration);
      for (      Registration reg : all) {
        pingNotifiableEventListenerIfAvailable(topic,reg,false);
      }
    }
  }
  return registration;
}
