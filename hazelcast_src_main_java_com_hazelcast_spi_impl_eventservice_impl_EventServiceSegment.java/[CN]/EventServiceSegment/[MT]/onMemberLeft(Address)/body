{
  for (  Collection<Registration> all : registrations.values()) {
    Iterator<Registration> iter=all.iterator();
    while (iter.hasNext()) {
      Registration reg=iter.next();
      if (address.equals(reg.getSubscriber())) {
        iter.remove();
        registrationIdMap.remove(reg.getId());
        Object listener=reg.getListener();
        if (listener instanceof NotifiableEventListener) {
          ((NotifiableEventListener)listener).onDeregister(service,serviceName,reg.getTopic(),reg);
        }
      }
    }
  }
}
