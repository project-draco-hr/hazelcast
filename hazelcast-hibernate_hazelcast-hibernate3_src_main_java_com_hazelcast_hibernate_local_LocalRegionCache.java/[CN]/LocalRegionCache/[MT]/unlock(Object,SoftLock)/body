{
  while (true) {
    final Expirable original=cache.get(key);
    if (original != null) {
      if (!(lock instanceof MarkerWrapper)) {
        break;
      }
      final ExpiryMarker unwrappedMarker=((MarkerWrapper)lock).getMarker();
      if (original.matches(unwrappedMarker)) {
        final Expirable revised=((ExpiryMarker)original).expire(nextTimestamp());
        if (cache.replace(key,original,revised)) {
          break;
        }
      }
 else       if (original.getValue() != null) {
        if (cache.remove(key,original)) {
          break;
        }
      }
 else {
        break;
      }
    }
 else {
      break;
    }
  }
  maybeNotifyTopic(key,null,null);
}
