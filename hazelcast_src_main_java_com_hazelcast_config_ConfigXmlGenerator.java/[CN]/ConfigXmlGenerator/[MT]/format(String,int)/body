{
  if (!formatted) {
    return input;
  }
  try {
    Source xmlInput=new StreamSource(new StringReader(input));
    StringWriter stringWriter=new StringWriter();
    StreamResult xmlOutput=new StreamResult(stringWriter);
    TransformerFactory transformerFactory=TransformerFactory.newInstance();
    transformerFactory.setAttribute("indent-number",indent);
    Transformer transformer=transformerFactory.newTransformer();
    transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION,"yes");
    transformer.setOutputProperty(OutputKeys.ENCODING,"UTF-8");
    transformer.setOutputProperty(OutputKeys.INDENT,"yes");
    transformer.transform(xmlInput,xmlOutput);
    return xmlOutput.getWriter().toString();
  }
 catch (  Exception e) {
    e.printStackTrace();
    return input;
  }
}
