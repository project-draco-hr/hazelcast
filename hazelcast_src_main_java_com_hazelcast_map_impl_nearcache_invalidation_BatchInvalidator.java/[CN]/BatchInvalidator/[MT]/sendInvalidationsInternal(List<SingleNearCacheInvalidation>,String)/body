{
  Collection<EventRegistration> registrations=eventService.getRegistrations(SERVICE_NAME,mapName);
  for (  EventRegistration registration : registrations) {
    List<SingleNearCacheInvalidation> filteredInvalidations=null;
    for (    SingleNearCacheInvalidation invalidation : invalidationList) {
      if (canSendInvalidationEvent(registration,invalidation.getSourceUuid())) {
        if (filteredInvalidations == null) {
          filteredInvalidations=new ArrayList<SingleNearCacheInvalidation>();
        }
        filteredInvalidations.add(invalidation);
      }
    }
    if (filteredInvalidations != null) {
      BatchNearCacheInvalidation invalidation=new BatchNearCacheInvalidation(filteredInvalidations,mapName);
      eventService.publishEvent(SERVICE_NAME,registration,invalidation,mapName.hashCode());
    }
  }
}
