{
  if (request.local) {
    final TargetAwareOp targetAwareOp=(TargetAwareOp)request.attachment;
    targetAwareOp.setResult(request.response);
  }
 else {
    final Packet packet=obtainPacket();
    request.setPacket(packet);
    final Object result=request.response;
    if (result != null) {
      if (result instanceof Data) {
        final Data data=(Data)result;
        if (data.size() > 0) {
          packet.setValue(data);
        }
      }
    }
    sendResponse(packet,request.caller);
  }
}
