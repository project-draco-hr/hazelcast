{
  if (transaction.getState() != Transaction.State.ACTIVE) {
    throw new IllegalStateException("Transaction is not active!");
  }
  final TransactionalService service=nodeEngine.getService(serviceName);
  final TransactionalObject transactionalObject=service.createTransactionalObject(id);
  transactionalObject.setTransaction(transaction);
  return transactionalObject;
}
