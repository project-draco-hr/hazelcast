{
  Call call=null;
  try {
    call=queue.poll(100,TimeUnit.MILLISECONDS);
    if (call == null) {
      return;
    }
    counter.incrementAndGet();
    callMap.put(call.getId(),call);
    Connection oldConnection=connection;
    connection=client.getConnectionManager().getConnection();
    if (restoredConnection(oldConnection,connection)) {
      redoUnfinishedCalls(call,oldConnection);
    }
 else     if (connection != null) {
      logger.log(Level.FINEST,"Sending: " + call);
      writer.write(connection,call.getRequest());
    }
 else {
      interruptWaitingCalls();
    }
  }
 catch (  InterruptedException e) {
    throw e;
  }
catch (  Throwable io) {
    logger.log(Level.FINE,"OutRunnable got an exception:" + io.getMessage());
    io.printStackTrace();
    enQueue(call);
    client.getConnectionManager().destroyConnection(connection);
  }
}
