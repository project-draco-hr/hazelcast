{
  Call call=null;
  try {
    call=queue.poll(100,TimeUnit.MILLISECONDS);
    if (call == null) {
      return;
    }
    callMap.put(call.getId(),call);
    Connection oldConnection=connection;
    connection=client.getConnectionManager().getConnection();
    if (restoredConnection(oldConnection,connection)) {
      redoUnfinishedCalls(call,oldConnection);
    }
 else     if (connection != null) {
      writer.write(connection,call.getRequest());
    }
 else {
      interruptWaitingCalls();
    }
  }
 catch (  InterruptedException e) {
    throw e;
  }
catch (  Throwable io) {
    logger.finest("OutRunnable got an exception:" + io.getMessage());
    enQueue(call);
    client.getConnectionManager().destroyConnection(connection);
  }
}
