{
  if (oldConnection != null) {
    try {
      oldConnection.close();
    }
 catch (    IOException e) {
    }
  }
  interruptWaitingCalls();
  if (!reconnection) {
    reconnection=true;
    final Thread thread=new Thread(new Runnable(){
      public void run(){
        try {
          if (client.getConnectionManager().lookForAliveConnection() == null) {
            if (reconnection) {
              interruptWaitingCallsAndShutdown();
            }
          }
 else {
            try {
              queue.put(RECONNECT_CALL);
            }
 catch (            InterruptedException e) {
            }
          }
        }
 catch (        IOException e) {
          logger.log(Level.WARNING,"hz.client.ReconnectionThread got exception:" + e.getMessage(),e);
        }
 finally {
          reconnection=false;
        }
      }
    }
);
    thread.setName("hz.client.ReconnectionThread");
    thread.setDaemon(true);
    thread.start();
  }
}
