{
  PartitioningStrategy strategy=null;
  if (config != null) {
    strategy=config.getPartitioningStrategy();
    if (strategy == null) {
      if (CACHE.containsKey(mapName)) {
        strategy=CACHE.get(mapName);
      }
 else       if (config.getPartitioningStrategyClass() != null) {
        try {
          strategy=ClassLoaderUtil.newInstance(nodeEngine.getConfigClassLoader(),config.getPartitioningStrategyClass());
          CACHE.put(mapName,strategy);
        }
 catch (        Exception e) {
          throw ExceptionUtil.rethrow(e);
        }
      }
    }
  }
  return strategy;
}
