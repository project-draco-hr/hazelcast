{
  if (socketWriter == null) {
    if (Protocols.CLUSTER.equals(protocol)) {
      socketWriter=new SocketPacketWriter(connection);
      buffer.put(Protocols.CLUSTER.getBytes());
      inOutSelector.addTask(this);
    }
 else     if (Protocols.CLIENT_TEXT.equals(protocol)) {
      socketWriter=new SocketProtocolWriter(connection);
    }
 else     if (Protocols.CLIENT_BINARY.equals(protocol)) {
      socketWriter=new SocketClientDataWriter(connection);
    }
 else {
      socketWriter=new SocketTextWriter(connection);
    }
  }
}
