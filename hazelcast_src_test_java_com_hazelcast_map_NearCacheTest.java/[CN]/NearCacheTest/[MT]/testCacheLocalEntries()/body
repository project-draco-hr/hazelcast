{
  int n=2;
  String mapName="test";
  Config config=new Config();
  final NearCacheConfig nearCacheConfig=new NearCacheConfig();
  nearCacheConfig.setCacheLocalEntries(true);
  final MapConfig mapConfig=config.getMapConfig(mapName);
  mapConfig.setNearCacheConfig(nearCacheConfig);
  final MapStoreConfig mapStoreConfig=new MapStoreConfig();
  mapStoreConfig.setEnabled(true);
  mapStoreConfig.setInitialLoadMode(MapStoreConfig.InitialLoadMode.EAGER);
  mapStoreConfig.setImplementation(new InitMapLoader());
  mapConfig.setMapStoreConfig(mapStoreConfig);
  HazelcastInstance instance=createHazelcastInstanceFactory(n).newInstances(config)[0];
  IMap<String,String> map=instance.getMap(mapName);
  int noOfEntries=100;
  for (int i=0; i < noOfEntries; i++) {
    map.get("key" + i);
  }
  NearCache nearCache=getNearCache(mapName,instance);
  assertEquals(noOfEntries,nearCache.size());
}
