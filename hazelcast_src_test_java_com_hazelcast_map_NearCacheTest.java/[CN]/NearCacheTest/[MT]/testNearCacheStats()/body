{
  String mapName="NearCacheStatsTest";
  Config config=new Config();
  config.getMapConfig(mapName).setNearCacheConfig(new NearCacheConfig().setInvalidateOnChange(true));
  TestHazelcastInstanceFactory factory=createHazelcastInstanceFactory(2);
  HazelcastInstance[] instances=factory.newInstances(config);
  IMap<Integer,Integer> map=instances[0].getMap("NearCacheStatsTest");
  for (int i=0; i < 1000; i++) {
    map.put(i,i);
  }
  for (int i=0; i < 1000; i++) {
    map.get(i);
  }
  NearCacheStats stats=map.getLocalMapStats().getNearCacheStats();
  assertTrue("owned Entries",400 < stats.getOwnedEntryCount());
  assertTrue("misses",1000 == stats.getMisses());
  for (int i=0; i < 1000; i++) {
    map.get(i);
  }
  NearCacheStats stats2=map.getLocalMapStats().getNearCacheStats();
  assertTrue("hits",400 < stats2.getHits());
  assertTrue("misses",400 < stats2.getMisses());
  assertTrue("hits+misses",2000 == stats2.getHits() + stats2.getMisses());
}
