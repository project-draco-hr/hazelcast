{
  if (!sent.compareAndSet(false,true)) {
    throw new IllegalStateException("Response already sent for callback: " + callback);
  }
  if (obj instanceof Response) {
    final Response response=(Response)obj;
    OperationAccessor.setCallId(response,callId);
    obj=response.getResponse();
  }
  callback.notify(obj);
}
