{
  if (!sent.compareAndSet(false,true)) {
    throw new IllegalStateException("Response already sent for call: " + callId + " to "+ conn.getEndPoint()+ ", current-response: "+ obj);
  }
  final Response response;
  if (obj instanceof Response) {
    response=(Response)obj;
  }
 else {
    response=new Response(obj);
  }
  OperationAccessor.setCallId(response,callId);
  nodeEngine.getOperationService().send(response,conn);
}
