{
  for (  InternalPartition partition : partitions) {
    ShortPartitionInfo partitionInfo=new ShortPartitionInfo(partition.getPartitionId());
    for (int i=0; i < InternalPartition.MAX_REPLICA_COUNT; i++) {
      Address address=partition.getReplicaAddress(i);
      if (address == null) {
        partitionInfo.addressIndexes[i]=-1;
      }
 else {
        Integer knownIndex=addressIndexes.get(address);
        partitionInfo.addressIndexes[i]=(knownIndex == null) ? -1 : knownIndex;
      }
    }
    partitionInfos.add(partitionInfo);
  }
}
