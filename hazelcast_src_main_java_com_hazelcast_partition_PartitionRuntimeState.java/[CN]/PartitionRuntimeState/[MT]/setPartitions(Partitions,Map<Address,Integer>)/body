{
  for (  PartitionView partition : partitions) {
    ShortPartitionInfo spi=new ShortPartitionInfo(partition.getPartitionId());
    for (int i=0; i < PartitionView.MAX_REPLICA_COUNT; i++) {
      Address address=partition.getReplicaAddress(i);
      if (address == null) {
        spi.addressIndexes[i]=-1;
      }
 else {
        Integer knownIndex=addressIndexes.get(address);
        spi.addressIndexes[i]=(knownIndex == null) ? -1 : knownIndex;
      }
    }
    partitionInfos.add(spi);
  }
}
