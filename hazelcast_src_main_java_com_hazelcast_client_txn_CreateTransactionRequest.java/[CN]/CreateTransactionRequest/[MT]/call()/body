{
  ClientEngineImpl clientEngine=getService();
  final ClientEndpoint endpoint=getEndpoint();
  final TransactionManagerService transactionManagerService=clientEngine.getTransactionManagerService();
  final TransactionContext context=transactionManagerService.newTransactionContext(options);
  endpoint.setTransactionContext(context);
  return context.getTxnId();
}
