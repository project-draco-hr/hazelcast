{
  ClientEngineImpl clientEngine=getService();
  ClientEndpoint endpoint=getEndpoint();
  TransactionManagerServiceImpl transactionManager=(TransactionManagerServiceImpl)clientEngine.getTransactionManagerService();
  TransactionContext context=transactionManager.newClientTransactionContext(options,endpoint.getUuid());
  if (sXid != null) {
    Transaction transaction=TransactionAccessor.getTransaction(context);
    transactionManager.addManagedTransaction(sXid,transaction);
  }
  context.beginTransaction();
  endpoint.setTransactionContext(context);
  return context.getTxnId();
}
