{
  if (pollTimeoutMs <= 0 || response != null) {
    return;
  }
  long currentTimeoutMs=pollTimeoutMs;
  long waitStart=Clock.currentTimeMillis();
synchronized (this) {
    while (currentTimeoutMs > 0 && response == null) {
      wait(currentTimeoutMs);
      currentTimeoutMs=pollTimeoutMs - (Clock.currentTimeMillis() - waitStart);
    }
  }
}
