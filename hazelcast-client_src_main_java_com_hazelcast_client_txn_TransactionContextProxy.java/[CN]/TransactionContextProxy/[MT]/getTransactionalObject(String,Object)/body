{
  if (transaction.getState() != Transaction.State.ACTIVE) {
    throw new TransactionNotActiveException("No transaction is found while accessing " + "transactional object -> " + serviceName + "["+ id+ "]!");
  }
  TransactionalObjectKey key=new TransactionalObjectKey(serviceName,id);
  TransactionalObject obj=txnObjectMap.get(key);
  if (obj == null) {
    if (serviceName.equals(QueueService.SERVICE_NAME)) {
      obj=new ClientTxnQueueProxy(String.valueOf(id),this);
    }
 else     if (serviceName.equals(MapService.SERVICE_NAME)) {
      obj=new ClientTxnMapProxy(String.valueOf(id),this);
    }
 else     if (serviceName.equals(MultiMapService.SERVICE_NAME)) {
      obj=new ClientTxnMultiMapProxy(String.valueOf(id),this);
    }
 else     if (serviceName.equals(ListService.SERVICE_NAME)) {
      obj=new ClientTxnListProxy(String.valueOf(id),this);
    }
 else     if (serviceName.equals(SetService.SERVICE_NAME)) {
      obj=new ClientTxnSetProxy(String.valueOf(id),this);
    }
    if (obj == null) {
      throw new IllegalArgumentException("Service[" + serviceName + "] is not transactional!");
    }
    txnObjectMap.put(key,obj);
  }
  return (T)obj;
}
