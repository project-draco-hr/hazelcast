{
  Map<String,Comparable> properties=new HashMap<String,Comparable>();
  properties.put("tag-keys","Owner,Stack");
  properties.put("tag-values","DbAdmin,Production");
  ComputeServiceBuilder builder=new ComputeServiceBuilder(properties);
  builder.buildTagConfig();
  Predicate<ComputeMetadata> nodeFilter=builder.buildNodeFilter();
  Map<String,String> userMetaData=new HashMap<String,String>();
  userMetaData.put("Owner","DbAdmin");
  userMetaData.put("Stack","Production");
  NodeMetadata metadata=new NodeMetadataBuilder().userMetadata(userMetaData).id(UuidUtil.newSecureUuidString()).status(NodeMetadata.Status.RUNNING).build();
  assertTrue(nodeFilter.apply(metadata));
}
