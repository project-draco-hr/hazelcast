{
  final Cluster cluster=clusterService.getClusterProxy();
  final TcpIpConnection connection=protocol.conn;
  cluster.addMembershipListener(new MembershipListener(){
    public void memberAdded(    MembershipEvent membershipEvent){
      sendEvent(membershipEvent);
    }
    public void memberRemoved(    MembershipEvent membershipEvent){
      sendEvent(membershipEvent);
    }
    void sendEvent(    MembershipEvent event){
      if (connection.live()) {
        String eventType;
        if (MembershipEvent.MEMBER_ADDED == event.getEventType()) {
          eventType="ADDED";
        }
 else         eventType="REMOVED";
        String hostName=event.getMember().getInetSocketAddress().getHostName();
        int port=event.getMember().getInetSocketAddress().getPort();
        Protocol response=new Protocol(connection,Command.EVENT,new String[]{eventType,hostName,String.valueOf(port)});
        sendResponse(node,response,connection);
      }
 else {
      }
    }
  }
);
  return null;
}
