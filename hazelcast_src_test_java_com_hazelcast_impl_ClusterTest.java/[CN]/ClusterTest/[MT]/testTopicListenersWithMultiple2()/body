{
  final CountDownLatch latch=new CountDownLatch(4);
  final MessageListener<Object> ml=new MessageListener<Object>(){
    public void onMessage(    Object msg){
      assertEquals("message2",msg);
      latch.countDown();
    }
  }
;
  HazelcastInstance h1=Hazelcast.newHazelcastInstance(null);
  assertEquals(1,h1.getCluster().getMembers().size());
  h1.getTopic("default2").addMessageListener(ml);
  HazelcastInstance h2=Hazelcast.newHazelcastInstance(null);
  h2.getTopic("default2").addMessageListener(ml);
  HazelcastInstance h3=Hazelcast.newHazelcastInstance(null);
  h3.getTopic("default2").addMessageListener(ml);
  HazelcastInstance h4=Hazelcast.newHazelcastInstance(null);
  h4.getTopic("default2").addMessageListener(ml);
  assertEquals(4,h4.getCluster().getMembers().size());
  h1.getTopic("default2").publish("message2");
  assertEquals(true,latch.await(10,TimeUnit.SECONDS));
}
