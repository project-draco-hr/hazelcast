{
  HazelcastInstance h1=Hazelcast.newHazelcastInstance(null);
  IMap map=h1.getMap("default");
  final CountDownLatch latch=new CountDownLatch(1);
  map.addEntryListener(new EntryListener(){
    public void entryAdded(    EntryEvent entryEvent){
      System.out.println("I got " + entryEvent.getMember());
      if (entryEvent.getMember().localMember()) {
        latch.countDown();
      }
    }
    public void entryRemoved(    EntryEvent entryEvent){
    }
    public void entryUpdated(    EntryEvent entryEvent){
    }
    public void entryEvicted(    EntryEvent entryEvent){
    }
  }
,false);
  map.put(100000,1);
  System.out.println(h1.getPartitionService().getPartitions().toString());
  boolean isLocal=latch.await(3,TimeUnit.SECONDS);
  assertTrue("localMember() on member that fired event should return true, but was false",isLocal);
}
