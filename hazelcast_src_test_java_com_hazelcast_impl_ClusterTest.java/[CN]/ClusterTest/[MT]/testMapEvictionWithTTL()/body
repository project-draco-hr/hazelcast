{
  Config cfg=new Config();
  Map<String,MapConfig> mapConfigs=new HashMap<String,MapConfig>();
  MapConfig mCfg=new MapConfig();
  mCfg.setTimeToLiveSeconds(3);
  mapConfigs.put("testMapEvictionWithTTL",mCfg);
  cfg.setMapConfigs(mapConfigs);
  HazelcastInstance h1=Hazelcast.newHazelcastInstance(cfg);
  IMap map1=h1.getMap("testMapEvictionWithTTL");
  final CountDownLatch latch=new CountDownLatch(1);
  map1.addEntryListener(new EntryListener(){
    public void entryAdded(    EntryEvent entryEvent){
    }
    public void entryRemoved(    EntryEvent entryEvent){
    }
    public void entryUpdated(    EntryEvent entryEvent){
    }
    public void entryEvicted(    EntryEvent entryEvent){
      assertEquals("1",entryEvent.getKey());
      assertEquals("v1",entryEvent.getValue());
      latch.countDown();
    }
  }
,true);
  map1.put("1","v1");
  assertEquals("v1",map1.get("1"));
  assertTrue(latch.await(20,TimeUnit.SECONDS));
  assertNull(map1.get("1"));
}
