{
  if (getUsedMemoryAsMB() < limit) {
    return;
  }
  for (int i=0; i < maxSeconds; i++) {
    sleep(1000);
    Runtime.getRuntime().gc();
    if (getUsedMemoryAsMB() < limit) {
      return;
    }
  }
  fail(String.format("UsedMemory now: %s but expected max: %s",getUsedMemoryAsMB(),limit));
}
