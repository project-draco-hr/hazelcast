{
  HazelcastInstance h1=Hazelcast.newHazelcastInstance(new Config());
  Config superConfig=new Config();
  superConfig.setSuperClient(true);
  HazelcastInstance hSuper=Hazelcast.newHazelcastInstance(superConfig);
  HazelcastInstance h2=Hazelcast.newHazelcastInstance(new Config());
  final IMap map=h2.getMap("default");
  h1.getLifecycleService().shutdown();
  final CountDownLatch latch=new CountDownLatch(1);
  new Thread(new Runnable(){
    public void run(){
      assertTrue(map.get("1") == null);
      latch.countDown();
    }
  }
).start();
  assertTrue(latch.await(10,TimeUnit.SECONDS));
}
