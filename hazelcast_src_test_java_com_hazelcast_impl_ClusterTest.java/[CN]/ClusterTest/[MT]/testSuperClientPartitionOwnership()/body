{
  Config configSuperClient=new Config();
  configSuperClient.setSuperClient(true);
  HazelcastInstance hNormal=Hazelcast.newHazelcastInstance(new Config());
  final HazelcastInstance hSuper=Hazelcast.newHazelcastInstance(configSuperClient);
  Map map=hSuper.getMap("default");
  assertNull(map.put("1","value"));
  Set<Partition> partitions2=hSuper.getPartitionService().getPartitions();
  for (  Partition partition : partitions2) {
    assertEquals(partition.getOwner(),hNormal.getCluster().getLocalMember());
  }
  hNormal.shutdown();
  Thread.sleep(3000);
  Set<Partition> partitions=hSuper.getPartitionService().getPartitions();
  for (  Partition partition : partitions) {
    assertNull(partition.getOwner());
  }
  hNormal=Hazelcast.newHazelcastInstance(new Config());
  partitions=hSuper.getPartitionService().getPartitions();
  for (  Partition partition : partitions) {
    assertEquals(hNormal.getCluster().getLocalMember(),partition.getOwner());
  }
  assertNull(map.put("1","value"));
  hSuper.shutdown();
  partitions=hNormal.getPartitionService().getPartitions();
  for (  Partition partition : partitions) {
    assertEquals(hNormal.getCluster().getLocalMember(),partition.getOwner());
  }
  assertEquals("value",hNormal.getMap("default").get("1"));
}
