{
  Config configSuperClient=new XmlConfigBuilder().build();
  configSuperClient.setSuperClient(true);
  HazelcastInstance hNormal=Hazelcast.newHazelcastInstance(null);
  final HazelcastInstance hSuper=Hazelcast.newHazelcastInstance(configSuperClient);
  Map map=hSuper.getMap("default");
  assertNull(map.put("1","value"));
  hNormal.shutdown();
  Set<Partition> partitions=hSuper.getPartitionService().getPartitions();
  for (  Partition partition : partitions) {
    assertNull(partition.getOwner());
  }
  hNormal=Hazelcast.newHazelcastInstance(null);
  partitions=hSuper.getPartitionService().getPartitions();
  for (  Partition partition : partitions) {
    assertEquals(hNormal.getCluster().getLocalMember(),partition.getOwner());
  }
  assertNull(map.put("1","value"));
  hSuper.shutdown();
  partitions=hNormal.getPartitionService().getPartitions();
  for (  Partition partition : partitions) {
    assertEquals(hNormal.getCluster().getLocalMember(),partition.getOwner());
  }
  assertEquals("value",hNormal.getMap("default").get("1"));
}
