{
  final CountDownLatch latch=new CountDownLatch(3);
  final EntryListener<Object,Object> ml=new EntryListener<Object,Object>(){
    public void entryAdded(    EntryEvent entryEvent){
      latch.countDown();
    }
    public void entryRemoved(    EntryEvent entryEvent){
    }
    public void entryUpdated(    EntryEvent entryEvent){
    }
    public void entryEvicted(    EntryEvent entryEvent){
    }
  }
;
  HazelcastInstance h1=Hazelcast.newHazelcastInstance(null);
  h1.getMap("default").addEntryListener(ml,true);
  HazelcastInstance h2=Hazelcast.newHazelcastInstance(null);
  h2.getMap("default").addEntryListener(ml,true);
  HazelcastInstance h3=Hazelcast.newHazelcastInstance(null);
  h3.getMap("default").addEntryListener(ml,true);
  HazelcastInstance h4=Hazelcast.newHazelcastInstance(null);
  h4.getMap("default").put("key","value");
  assertTrue(latch.await(3,TimeUnit.SECONDS));
}
