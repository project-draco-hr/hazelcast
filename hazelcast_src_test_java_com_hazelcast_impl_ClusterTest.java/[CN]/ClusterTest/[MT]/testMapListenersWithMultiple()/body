{
  final CountDownLatch latch=new CountDownLatch(3);
  final EntryListener<Object,Object> ml=new EntryListener<Object,Object>(){
    public void entryAdded(    EntryEvent entryEvent){
      latch.countDown();
    }
    public void entryRemoved(    EntryEvent entryEvent){
    }
    public void entryUpdated(    EntryEvent entryEvent){
    }
    public void entryEvicted(    EntryEvent entryEvent){
    }
  }
;
  HazelcastInstance h1=Hazelcast.newHazelcastInstance(new Config());
  assertEquals(1,h1.getCluster().getMembers().size());
  h1.getMap("default3").addEntryListener(ml,true);
  HazelcastInstance h2=Hazelcast.newHazelcastInstance(new Config());
  h2.getMap("default3").addEntryListener(ml,true);
  HazelcastInstance h3=Hazelcast.newHazelcastInstance(new Config());
  h3.getMap("default3").addEntryListener(ml,true);
  HazelcastInstance h4=Hazelcast.newHazelcastInstance(new Config());
  h4.getMap("default3").put("key","value");
  assertEquals(true,latch.await(3,TimeUnit.SECONDS));
}
