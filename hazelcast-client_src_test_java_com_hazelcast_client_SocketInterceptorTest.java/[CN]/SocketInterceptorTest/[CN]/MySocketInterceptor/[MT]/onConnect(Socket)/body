{
  connectCallCount.incrementAndGet();
  try {
    OutputStream out=connectedSocket.getOutputStream();
    InputStream in=connectedSocket.getInputStream();
    int multiplyBy=(successful) ? 2 : 1;
    while (true) {
      int read=in.read();
      if (read == 0)       return;
      out.write(read * multiplyBy);
    }
  }
 catch (  IOException e) {
    connectFailureCount.incrementAndGet();
    throw e;
  }
}
