{
  try {
    int mapSize=map.size();
    int partitionCount=partitionService.getPartitionCount();
    List<Future> futures=new ArrayList<Future>(partitionCount);
    if (putAllInitialSizeFactor > 0) {
      invokePutAllWithEstimation(map,mapSize,partitionCount,futures);
    }
 else {
      invokePutAllWithAnalysis(map,mapSize,partitionCount,futures);
    }
    for (    Future future : futures) {
      future.get();
    }
  }
 catch (  Exception e) {
    throw rethrow(e);
  }
}
