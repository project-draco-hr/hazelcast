{
  TestHazelcastInstanceFactory nodeFactory=createHazelcastInstanceFactory(2);
  Config cfg=new Config();
  HazelcastInstance h1=nodeFactory.newHazelcastInstance(cfg);
  IMap<Object,Object> map=h1.getMap("map");
  map.put(1,1);
  final AtomicInteger updateCount=new AtomicInteger(0);
  final AtomicInteger addCount=new AtomicInteger(0);
  map.addEntryListener(new EntryAdapter<Object,Object>(){
    @Override public void entryAdded(    EntryEvent<Object,Object> event){
      addCount.incrementAndGet();
    }
    @Override public void entryUpdated(    EntryEvent<Object,Object> event){
      updateCount.incrementAndGet();
    }
  }
,true);
  map.replace(1,1,2);
  map.replace(1,1,2);
  assertEquals(addCount.get(),0);
  assertEquals(updateCount.get(),1);
}
