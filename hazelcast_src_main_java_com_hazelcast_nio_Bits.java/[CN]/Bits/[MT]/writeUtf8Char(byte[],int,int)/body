{
  if (c <= 0x007F) {
    buffer[pos]=(byte)c;
    return 1;
  }
 else   if (c > 0x07FF) {
    buffer[pos]=(byte)(0xE0 | c >> 12 & 0x0F);
    buffer[pos + 1]=(byte)(0x80 | c >> 6 & 0x3F);
    buffer[pos + 2]=(byte)(0x80 | c & 0x3F);
    return 3;
  }
 else {
    buffer[pos]=(byte)(0xC0 | c >> 6 & 0x1F);
    buffer[pos + 1]=(byte)(0x80 | c & 0x3F);
    return 2;
  }
}
