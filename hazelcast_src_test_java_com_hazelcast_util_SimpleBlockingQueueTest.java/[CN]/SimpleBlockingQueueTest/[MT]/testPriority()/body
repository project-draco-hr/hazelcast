{
  SimpleBlockingQueue q=new SimpleBlockingQueue(true);
  for (int i=0; i < 1000; i++) {
    q.offer(i);
  }
  for (int i=0; i < 1000; i++) {
    assertEquals(i,q.poll());
  }
  assertNull(q.poll());
  for (int i=0; i < 1000; i++) {
    q.offer(i);
  }
  Prioritized p1=new Prioritized(){
  }
;
  Prioritized p2=new Prioritized(){
  }
;
  q.offer(p1);
  q.offer(p2);
  for (int i=1000; i < 2000; i++) {
    q.offer(i);
  }
  assertTrue(p1 == q.poll());
  assertTrue(p2 == q.poll());
  for (int i=0; i < 2000; i++) {
    assertEquals(i,q.poll());
  }
}
