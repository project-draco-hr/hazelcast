{
  if (store.isEnabled()) {
    try {
      store.deleteAll(itemMap.keySet());
    }
 catch (    Exception e) {
      throw new HazelcastException(e);
    }
  }
  long current=Clock.currentTimeMillis();
  LinkedHashMap<Long,Data> map=new LinkedHashMap<Long,Data>(itemMap.size());
  for (  QueueItem item : itemMap.values()) {
    dataMap.put(item.getItemId(),item.getData());
    age(item,current);
  }
  getItemQueue().clear();
  itemMap.clear();
  dataMap.clear();
  return map;
}
