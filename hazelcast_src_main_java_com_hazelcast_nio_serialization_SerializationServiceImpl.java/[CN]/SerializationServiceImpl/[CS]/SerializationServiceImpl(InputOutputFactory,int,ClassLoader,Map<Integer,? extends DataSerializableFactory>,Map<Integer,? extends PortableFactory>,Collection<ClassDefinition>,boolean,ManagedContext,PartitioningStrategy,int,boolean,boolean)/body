{
  this.inputOutputFactory=inputOutputFactory;
  this.classLoader=classLoader;
  this.managedContext=managedContext;
  this.globalPartitioningStrategy=partitionStrategy;
  this.outputBufferSize=initialOutputBufferSize;
  PortableHookLoader loader=new PortableHookLoader(portableFactories,classLoader);
  serializationContext=new PortableContextImpl(this,loader.getFactories().keySet(),version);
  for (  ClassDefinition cd : loader.getDefinitions()) {
    serializationContext.registerClassDefinition(cd);
  }
  dataSerializerAdapter=new StreamSerializerAdapter(this,new DataSerializer(dataSerializableFactories,classLoader));
  portableSerializer=new PortableSerializer(serializationContext,loader.getFactories());
  portableSerializerAdapter=new StreamSerializerAdapter(this,portableSerializer);
  registerConstantSerializers();
  registerJvmTypeSerializers(enableCompression,enableSharedObject);
  registerClassDefinitions(classDefinitions,checkClassDefErrors);
}
