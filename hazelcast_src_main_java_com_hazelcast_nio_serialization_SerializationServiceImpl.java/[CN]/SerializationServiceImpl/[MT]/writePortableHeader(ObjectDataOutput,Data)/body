{
  if (data.headerSize() == 0) {
    out.writeInt(0);
  }
 else {
    if (!(out instanceof PortableDataOutput)) {
      throw new HazelcastSerializationException("PortableDataOutput is required to be able " + "to write Portable header.");
    }
    byte[] header=data.getHeader();
    PortableDataOutput output=(PortableDataOutput)out;
    DynamicByteBuffer headerBuffer=output.getHeaderBuffer();
    out.writeInt(header.length);
    out.writeInt(headerBuffer.position());
    headerBuffer.put(header);
  }
}
