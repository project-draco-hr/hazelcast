{
  if (serializer.getTypeId() <= 0) {
    throw new IllegalArgumentException("Type id must be positive! Current: " + serializer.getTypeId() + ", Serializer: "+ serializer);
  }
  if (!fallback.compareAndSet(null,serializer)) {
    throw new IllegalStateException("Fallback serializer is already registered!");
  }
}
