{
  SerializerAdapter serializer=typeMap.get(type);
  if (serializer == null) {
    Class typeSuperclass=type.getSuperclass();
    final Set<Class> interfaces=new LinkedHashSet<Class>(5);
    getInterfaces(type,interfaces);
    while (typeSuperclass != null) {
      serializer=registerFromSuperType(type,typeSuperclass);
      if (serializer != null) {
        break;
      }
      getInterfaces(typeSuperclass,interfaces);
      typeSuperclass=typeSuperclass.getSuperclass();
    }
    if (serializer == null) {
      for (      Class typeInterface : interfaces) {
        serializer=registerFromSuperType(type,typeInterface);
        if (serializer != null) {
          break;
        }
      }
    }
    if (serializer == null) {
      serializer=global.get();
      if (serializer != null) {
        safeRegister(type,serializer);
      }
    }
  }
  return serializer;
}
