{
  nodesFilter=new Predicate<ComputeMetadata>(){
    @Override public boolean apply(    ComputeMetadata nodeMetadata){
      if (nodeMetadata == null) {
        return false;
      }
      if (tagPairs.size() > nodeMetadata.getUserMetadata().size()) {
        return false;
      }
      for (      AbstractMap.SimpleImmutableEntry entry : tagPairs) {
        String value=nodeMetadata.getUserMetadata().get(entry.getKey());
        if (value == null || !value.equals(entry.getValue())) {
          return false;
        }
      }
      return true;
    }
  }
;
  return nodesFilter;
}
