{
  if (status == TXN_STATUS_NO_TXN || status == TXN_STATUS_UNKNOWN || status == TXN_STATUS_COMMITTED || status == TXN_STATUS_ROLLED_BACK)   throw new IllegalStateException("Transaction is not ready to rollback. Status= " + status);
  status=TXN_STATUS_ROLLING_BACK;
  try {
    for (    final TxnRecord txnRecord : lsTxnRecords) {
      txnRecord.rollback();
    }
  }
 catch (  final Exception e) {
    e.printStackTrace();
  }
 finally {
    finalizeTxn();
    status=TXN_STATUS_ROLLED_BACK;
  }
}
