{
  int[] counts=new int[PartitionInfo.MAX_REPLICA_COUNT];
  FactoryImpl.HazelcastInstanceProxy proxy=(FactoryImpl.HazelcastInstanceProxy)hz;
  Node node=proxy.getFactory().node;
  Address address=node.clusterManager.getThisAddress();
  PartitionManager partitionManager=node.concurrentMapManager.getPartitionManager();
  PartitionInfo[] partitions=partitionManager.getPartitions();
  for (  PartitionInfo p : partitions) {
    for (int i=0; i < PartitionInfo.MAX_REPLICA_COUNT; i++) {
      if (address.equals(p.getReplicaAddress(i))) {
        counts[i]++;
      }
    }
  }
  return counts;
}
