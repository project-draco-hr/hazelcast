{
  final ObjectNamespace ns=new DefaultObjectNamespace(service,id);
  final ClientProxy proxy=proxies.get(ns);
  if (proxy != null) {
    return proxy;
  }
  final ClientProxyFactory factory=proxyFactories.get(service);
  if (factory == null) {
    throw new IllegalArgumentException("No factory registered for service: " + service);
  }
  final ClientProxy clientProxy=factory.create(id);
  initialize(clientProxy);
  final ClientProxy current=proxies.putIfAbsent(ns,clientProxy);
  if (current != null) {
    return current;
  }
  triggerListeners(clientProxy,false);
  return clientProxy;
}
