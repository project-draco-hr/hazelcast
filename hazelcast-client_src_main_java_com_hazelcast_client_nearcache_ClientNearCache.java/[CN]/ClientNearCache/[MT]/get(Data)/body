{
  fireTtlCleanup();
  CacheRecord record=cache.get(key);
  if (record != null) {
    record.access();
    if (record.expired()) {
      cache.remove(key);
      return null;
    }
    if (record.value.equals(NULL_OBJECT)) {
      return record.value;
    }
    return inMemoryFormat.equals(InMemoryFormat.BINARY) ? context.getSerializationService().toObject((Data)record.value) : record.value;
  }
 else {
    return null;
  }
}
