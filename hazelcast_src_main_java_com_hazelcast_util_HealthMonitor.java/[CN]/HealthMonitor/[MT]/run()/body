{
  if (logLevel == HealthMonitorLevel.OFF) {
    return;
  }
  try {
    while (node.isActive()) {
      HealthMetrics metrics;
switch (logLevel) {
case NOISY:
        metrics=new HealthMetrics();
      logger.log(Level.INFO,metrics.toString());
    break;
case SILENT:
  metrics=new HealthMetrics();
if (metrics.exceedsThreshold()) {
  logger.log(Level.INFO,metrics.toString());
}
break;
default :
throw new IllegalStateException("unrecognized logLevel:" + logLevel);
}
try {
Thread.sleep(TimeUnit.SECONDS.toMillis(delaySeconds));
}
 catch (InterruptedException e) {
return;
}
}
}
 catch (OutOfMemoryError e) {
OutOfMemoryErrorDispatcher.onOutOfMemory(e);
}
}
