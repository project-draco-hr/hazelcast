{
  map.put(1,2);
  c.send(new MapReplaceRequest(mapName,TestUtil.toData(1),TestUtil.toData(3),ThreadContext.getThreadId()));
  assertEquals(2,c.receive());
  assertEquals(3,map.get(1));
  c.send(new MapReplaceRequest(mapName,TestUtil.toData(2),TestUtil.toData(3),ThreadContext.getThreadId()));
  c.receive();
  assertEquals(null,map.get(2));
  c.send(new MapReplaceIfSameRequest(mapName,TestUtil.toData(1),TestUtil.toData(3),TestUtil.toData(5),ThreadContext.getThreadId()));
  assertEquals(true,c.receive());
  assertEquals(5,map.get(1));
  c.send(new MapReplaceIfSameRequest(mapName,TestUtil.toData(1),TestUtil.toData(0),TestUtil.toData(7),ThreadContext.getThreadId()));
  assertEquals(false,c.receive());
  assertEquals(5,map.get(1));
}
