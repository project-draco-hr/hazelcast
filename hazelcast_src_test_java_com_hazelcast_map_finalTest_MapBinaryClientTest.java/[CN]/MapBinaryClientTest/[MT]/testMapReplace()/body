{
  map.put(1,2);
  client().send(new MapReplaceRequest(mapName,TestUtil.toData(1),TestUtil.toData(3),ThreadUtil.getThreadId()));
  assertEquals(2,client().receive());
  assertEquals(3,map.get(1));
  client().send(new MapReplaceRequest(mapName,TestUtil.toData(2),TestUtil.toData(3),ThreadUtil.getThreadId()));
  client().receive();
  assertEquals(null,map.get(2));
  client().send(new MapReplaceIfSameRequest(mapName,TestUtil.toData(1),TestUtil.toData(3),TestUtil.toData(5),ThreadUtil.getThreadId()));
  assertEquals(true,client().receive());
  assertEquals(5,map.get(1));
  client().send(new MapReplaceIfSameRequest(mapName,TestUtil.toData(1),TestUtil.toData(0),TestUtil.toData(7),ThreadUtil.getThreadId()));
  assertEquals(false,client().receive());
  assertEquals(5,map.get(1));
}
