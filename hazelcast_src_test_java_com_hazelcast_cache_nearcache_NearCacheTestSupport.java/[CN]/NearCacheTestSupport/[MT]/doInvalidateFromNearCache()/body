{
  Map<Integer,String> expectedKeyValueMappings=generateRandomKeyValueMappings();
  ManagedNearCacheRecordStore managedNearCacheRecordStore=createManagedNearCacheRecordStore(expectedKeyValueMappings);
  NearCache<Integer,String> nearCache=createNearCache(DEFAULT_NEAR_CACHE_NAME,managedNearCacheRecordStore);
  final int size1=nearCache.size();
  assertEquals(size1,managedNearCacheRecordStore.latestSize);
  for (int i=0; i < 2 * DEFAULT_RECORD_COUNT; i++) {
    nearCache.remove(i);
    assertEquals((Integer)i,managedNearCacheRecordStore.latestKeyOnRemove);
    assertEquals(i < DEFAULT_RECORD_COUNT,managedNearCacheRecordStore.latestResultOnRemove);
  }
  final int size2=nearCache.size();
  assertEquals(size2,managedNearCacheRecordStore.latestSize);
}
