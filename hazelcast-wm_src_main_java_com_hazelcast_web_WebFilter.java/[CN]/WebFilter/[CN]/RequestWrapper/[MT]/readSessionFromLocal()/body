{
  String invalidatedOriginalSessionId=null;
  if (hazelcastSession != null && !hazelcastSession.isValid()) {
    LOGGER.finest("Session is invalid!");
    destroySession(hazelcastSession,true);
    invalidatedOriginalSessionId=hazelcastSession.invalidatedOriginalSessionId;
    hazelcastSession=null;
  }
 else   if (hazelcastSession != null) {
    return hazelcastSession;
  }
  HttpSession originalSession=getOriginalSession(false);
  if (originalSession != null) {
    String hazelcastSessionId=originalSessions.get(originalSession.getId());
    if (hazelcastSessionId != null) {
      hazelcastSession=sessions.get(hazelcastSessionId);
      if (hazelcastSession != null && !hazelcastSession.isStickySession()) {
        hazelcastSession.updateReloadFlag();
      }
      return hazelcastSession;
    }
    if (!originalSession.getId().equals(invalidatedOriginalSessionId)) {
      originalSession.invalidate();
    }
  }
  if (clusteredSessionId != null) {
    hazelcastSession=sessions.get(clusteredSessionId);
  }
  return readFromCookie();
}
