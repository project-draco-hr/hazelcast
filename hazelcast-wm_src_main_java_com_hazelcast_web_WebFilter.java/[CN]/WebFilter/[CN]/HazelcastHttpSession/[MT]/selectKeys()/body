{
  Set<String> keys=new HashSet<String>();
  if (!deferredWrite) {
    for (    String qualifiedAttributeKey : getClusterMap().keySet(new SessionAttributePredicate(id))) {
      keys.add(extractAttributeKey(qualifiedAttributeKey));
    }
  }
 else {
    for (    Entry<String,LocalCacheEntry> entry : localCache.entrySet()) {
      if (!entry.getValue().removed && entry.getValue() != NULL_ENTRY) {
        keys.add(entry.getKey());
      }
    }
  }
  return keys;
}
