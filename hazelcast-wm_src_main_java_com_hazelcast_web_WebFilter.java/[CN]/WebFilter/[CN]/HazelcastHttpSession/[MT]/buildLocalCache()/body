{
  Set<Entry<String,Object>> entrySet=getClusterMap().entrySet(new SessionAttributePredicate(id));
  Map<String,LocalCacheEntry> cache=new ConcurrentHashMap<String,LocalCacheEntry>();
  for (  Entry<String,Object> entry : entrySet) {
    String attributeKey=extractAttributeKey(entry.getKey());
    LocalCacheEntry cacheEntry=cache.get(attributeKey);
    if (cacheEntry == null) {
      cacheEntry=new LocalCacheEntry();
      cache.put(attributeKey,cacheEntry);
    }
    if (LOGGER.isFinestEnabled()) {
      LOGGER.finest("Storing " + attributeKey + " on session "+ id);
    }
    cacheEntry.value=entry.getValue();
    cacheEntry.dirty=false;
  }
  return cache;
}
