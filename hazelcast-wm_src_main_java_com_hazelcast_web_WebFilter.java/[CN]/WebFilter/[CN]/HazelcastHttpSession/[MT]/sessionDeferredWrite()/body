{
  if (sessionChanged()) {
    IMap<String,Object> clusterMap=getClusterMap();
    Iterator<Entry<String,LocalCacheEntry>> iterator=localCache.entrySet().iterator();
    while (iterator.hasNext()) {
      Entry<String,LocalCacheEntry> entry=iterator.next();
      if (entry.getValue().dirty) {
        LocalCacheEntry cacheEntry=entry.getValue();
        if (cacheEntry.removed) {
          clusterMap.delete(buildAttributeName(entry.getKey()));
          iterator.remove();
        }
 else {
          clusterMap.set(buildAttributeName(entry.getKey()),cacheEntry.value);
          cacheEntry.dirty=false;
        }
      }
    }
  }
}
