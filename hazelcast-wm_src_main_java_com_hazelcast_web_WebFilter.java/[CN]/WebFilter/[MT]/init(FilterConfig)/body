{
  filterConfig=config;
  servletContext=config.getServletContext();
  initInstance();
  String debugParam=getParam("debug");
  if (debugParam != null) {
    debug=Boolean.valueOf(debugParam);
  }
  String mapName=getParam("map-name");
  if (mapName != null) {
    clusterMapName=mapName;
  }
 else {
    clusterMapName="_web_" + servletContext.getServletContextName();
  }
  try {
    Config hzConfig=hazelcastInstance.getConfig();
    String sessionTTL=getParam("session-ttl-seconds");
    if (sessionTTL != null) {
      MapConfig mapConfig=new MapConfig(clusterMapName);
      mapConfig.setTimeToLiveSeconds(Integer.valueOf(sessionTTL));
      hzConfig.addMapConfig(mapConfig);
    }
  }
 catch (  UnsupportedOperationException ignored) {
  }
  String cookieName=getParam("cookie-name");
  if (cookieName != null) {
    sessionCookieName=cookieName;
  }
  String cookieDomain=getParam("cookie-domain");
  if (cookieDomain != null) {
    sessionCookieDomain=cookieDomain;
  }
  String cookieSecure=getParam("cookie-secure");
  if (cookieSecure != null) {
    sessionCookieSecure=Boolean.valueOf(cookieSecure);
  }
  String cookieHttpOnly=getParam("cookie-http-only");
  if (cookieHttpOnly != null) {
    sessionCookieHttpOnly=Boolean.valueOf(cookieHttpOnly);
  }
  String stickySessionParam=getParam("sticky-session");
  if (stickySessionParam != null) {
    stickySession=Boolean.valueOf(stickySessionParam);
  }
  String shutdownOnDestroyParam=getParam("shutdown-on-destroy");
  if (shutdownOnDestroyParam != null) {
    shutdownOnDestroy=Boolean.valueOf(shutdownOnDestroyParam);
  }
  if (!stickySession) {
    getClusterMap().addEntryListener(new EntryListener(){
      public void entryAdded(      EntryEvent entryEvent){
      }
      public void entryRemoved(      EntryEvent entryEvent){
        if (entryEvent.getMember() == null || !entryEvent.getMember().localMember()) {
          removeSessionLocally((String)entryEvent.getKey());
        }
      }
      public void entryUpdated(      EntryEvent entryEvent){
        if (entryEvent.getMember() == null || !entryEvent.getMember().localMember()) {
          markSessionDirty((String)entryEvent.getKey());
        }
      }
      public void entryEvicted(      EntryEvent entryEvent){
        entryRemoved(entryEvent);
      }
    }
,false);
  }
  log("sticky:" + stickySession + ", debug: "+ debug+ ", shutdown-on-destroy: "+ shutdownOnDestroy+ ", map-name: "+ clusterMapName);
}
