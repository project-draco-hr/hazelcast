{
  String id=existingSessionId == null ? generateSessionId() : existingSessionId;
  if (requestWrapper.getOriginalSession(false) != null) {
    LOGGER.finest("Original session exists!!!");
  }
  HttpSession originalSession=requestWrapper.getOriginalSession(true);
  HazelcastHttpSession hazelcastSession=new HazelcastHttpSession(id,originalSession,deferredWrite);
  if (existingSessionId == null) {
    getClusterMap().executeOnKey(id,new AddSessionEntryProcessor());
  }
  updateSessionMaps(id,originalSession,hazelcastSession);
  addSessionCookie(requestWrapper,id);
  return hazelcastSession;
}
