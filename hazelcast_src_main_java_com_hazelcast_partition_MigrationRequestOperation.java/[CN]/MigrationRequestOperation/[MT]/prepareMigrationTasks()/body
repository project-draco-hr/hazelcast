{
  NodeEngineImpl nodeEngine=(NodeEngineImpl)getNodeEngine();
  final MigrationServiceEvent event=new MigrationServiceEvent(MigrationEndpoint.SOURCE,migrationInfo);
  final Collection<Operation> tasks=new LinkedList<Operation>();
  for (  MigrationAwareService service : nodeEngine.getServices(MigrationAwareService.class)) {
    final Operation op=service.prepareMigrationOperation(event);
    if (op != null) {
      op.setServiceName(service.getServiceName());
      service.beforeMigration(event);
      tasks.add(op);
    }
  }
  return tasks;
}
