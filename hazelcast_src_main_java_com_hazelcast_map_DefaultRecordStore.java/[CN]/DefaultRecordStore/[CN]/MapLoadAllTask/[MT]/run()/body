{
  final NodeEngine nodeEngine=mapService.getNodeEngine();
  try {
    Map values=mapContainer.getStore().loadAll(keys.values());
    if (values == null || values.isEmpty()) {
      loaded.set(true);
      return;
    }
    MapEntrySet entrySet=new MapEntrySet();
    for (    Data dataKey : keys.keySet()) {
      Object key=keys.get(dataKey);
      Object value=values.get(key);
      if (value != null) {
        Data dataValue=mapService.toData(value);
        entrySet.add(dataKey,dataValue);
      }
    }
    PutAllOperation operation=new PutAllOperation(name,entrySet,true);
    operation.setNodeEngine(nodeEngine);
    operation.setResponseHandler(new ResponseHandler(){
      @Override public void sendResponse(      Object obj){
        if (checkIfMapLoaded.decrementAndGet() == 0) {
          loaded.set(true);
        }
      }
      public boolean isLocal(){
        return true;
      }
    }
);
    operation.setPartitionId(partitionId);
    OperationAccessor.setCallerAddress(operation,nodeEngine.getThisAddress());
    operation.setServiceName(MapService.SERVICE_NAME);
    nodeEngine.getOperationService().executeOperation(operation);
  }
 catch (  Exception e) {
    logger.warning("Exception while load all task:" + e.toString());
  }
}
