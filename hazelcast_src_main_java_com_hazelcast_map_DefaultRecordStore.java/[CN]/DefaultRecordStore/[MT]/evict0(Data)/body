{
  Record record=records.get(key);
  Object value=null;
  if (record != null) {
    value=record.getValue();
    final long lastUpdateTime=record.getLastUpdateTime();
    mapDataStore.addStagingArea(key,value,lastUpdateTime);
    mapServiceContext.interceptRemove(name,value);
    updateSizeEstimator(-calculateRecordHeapCost(record));
    deleteRecord(key);
    removeIndex(key);
  }
  return value;
}
