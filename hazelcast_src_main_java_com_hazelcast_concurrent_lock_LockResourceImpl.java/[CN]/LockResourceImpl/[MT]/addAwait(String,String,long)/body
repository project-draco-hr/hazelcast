{
  if (conditions == null) {
    conditions=new HashMap<String,ConditionInfo>(2);
  }
  ConditionInfo condition=conditions.get(conditionId);
  if (condition == null) {
    condition=new ConditionInfo(conditionId);
    conditions.put(conditionId,condition);
  }
  return condition.addWaiter(caller,threadId);
}
