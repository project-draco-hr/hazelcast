{
  if (config.getAddressList().size() == 0) {
    config.addAddress("localhost");
  }
  if (config.getCredentials() == null) {
    config.setCredentials(new UsernamePasswordCredentials(config.getGroupConfig().getName(),config.getGroupConfig().getPassword()));
  }
  this.config=config;
  this.id=clientIdCounter.incrementAndGet();
  lifecycleService=new LifecycleServiceClientImpl(this);
  lifecycleService.fireLifecycleEvent(STARTING);
  connectionManager=new ConnectionManager(this,config,lifecycleService);
  connectionManager.setBinder(new DefaultClientBinder(this));
  out=new OutRunnable(this,calls,new ProtocolWriter());
  in=new InRunnable(this,out,calls,new ProtocolReader());
  listenerManager=new ListenerManager(this,serializationService);
  final String prefix="hz.client." + this.id + ".";
  clusterClientProxy=new ClusterClientProxy(this);
  partitionClientProxy=new PartitionClientProxy(this);
  if (config.isUpdateAutomatic()) {
    this.getCluster().addMembershipListener(connectionManager);
  }
  lifecycleService.fireLifecycleEvent(STARTED);
  connectionManager.scheduleHeartbeatTimerTask();
  lsClients.add(HazelcastClient.this);
}
