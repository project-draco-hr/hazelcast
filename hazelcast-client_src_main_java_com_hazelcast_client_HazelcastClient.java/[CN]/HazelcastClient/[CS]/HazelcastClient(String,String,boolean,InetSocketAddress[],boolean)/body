{
  if (automatic) {
    this.connectionManager=new ConnectionManager(this,clusterMembers[0]);
  }
 else {
    this.connectionManager=new ConnectionManager(this,clusterMembers,shuffle);
  }
  this.connectionManager.setBinder(new DefaultClientBinder(this));
  this.groupName=groupName;
  out=new OutRunnable(this,calls,new PacketWriter());
  new Thread(out,"hz.client.OutThread").start();
  in=new InRunnable(this,calls,new PacketReader());
  new Thread(in,"hz.client.InThread").start();
  listenerManager=new ListenerManager(this);
  new Thread(listenerManager,"hz.client.Listener").start();
  mapLockProxy=getMap("__hz_Locks");
  clusterClientProxy=new ClusterClientProxy(this);
  partitionClientProxy=new PartitionClientProxy(this);
  Boolean authenticate=clusterClientProxy.authenticate(groupName,groupPassword);
  if (!authenticate) {
    this.shutdown();
    throw new RuntimeException("Wrong group name and password.");
  }
  try {
    connectionManager.getConnection();
  }
 catch (  IOException ignored) {
  }
  if (automatic) {
    this.getCluster().addMembershipListener(connectionManager);
    connectionManager.updateMembers();
  }
}
