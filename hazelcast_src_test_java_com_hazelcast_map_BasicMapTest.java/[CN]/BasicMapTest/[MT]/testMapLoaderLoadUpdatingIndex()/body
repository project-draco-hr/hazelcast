{
  final String mapName=randomString();
  MapConfig mapConfig=getInstance().getConfig().getMapConfig(mapName);
  List<MapIndexConfig> indexConfigs=mapConfig.getMapIndexConfigs();
  indexConfigs.add(new MapIndexConfig("name",true));
  SampleIndexableObjectMapLoader loader=new SampleIndexableObjectMapLoader();
  MapStoreConfig storeConfig=new MapStoreConfig();
  storeConfig.setFactoryImplementation(loader);
  mapConfig.setMapStoreConfig(storeConfig);
  IMap<Integer,SampleIndexableObject> map=getInstance().getMap(mapName);
  for (int i=0; i < 10; i++) {
    map.put(i,new SampleIndexableObject("My-" + i,i));
  }
  final SqlPredicate predicate=new SqlPredicate("name='My-5'");
  assertPredicateResultCorrect(map,predicate);
  map.destroy();
  loader.preloadValues=true;
  map=getInstance().getMap(mapName);
  assertLoadAllKeysCount(loader);
  assertPredicateResultCorrect(map,predicate);
}
