{
  boolean result=false;
  if (!joinPartDone) {
    int left=maxJoinWrite - joinPartTotalWrites;
    if (socketBB.remaining() > left) {
      socketBB.limit(socketBB.position() + left);
    }
    int currentPosition=socketBB.position();
    result=apw.writePacket(packet,socketBB);
    joinPartTotalWrites+=(socketBB.position() - currentPosition);
    socketBB.limit(socketBB.capacity());
    if (joinPartTotalWrites == maxJoinWrite) {
      joinPartDone=true;
      apw=null;
      writePacket(packet,socketBB);
    }
  }
 else {
    result=spw.writePacket(packet,socketBB);
  }
  return result;
}
