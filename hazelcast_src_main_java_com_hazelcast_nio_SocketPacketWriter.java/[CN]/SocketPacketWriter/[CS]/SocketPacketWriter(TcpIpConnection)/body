{
  this.connection=connection;
  this.ioService=connection.getConnectionManager().ioService;
  this.logger=ioService.getLogger(SocketPacketWriter.class.getName());
  boolean symmetricEncryptionEnabled=CipherHelper.isSymmetricEncryptionEnabled(ioService);
  if (symmetricEncryptionEnabled) {
    packetWriter=new SymmetricCipherPacketWriter();
    logger.log(Level.INFO,"Writer started with SymmetricEncryption");
  }
 else {
    packetWriter=new DefaultPacketWriter();
  }
}
