{
  initScheduler();
  final DummyGenericOperation genericOperation=new DummyGenericOperation();
  FutureTask<Boolean> futureTask=new FutureTask<Boolean>(new Callable<Boolean>(){
    @Override public Boolean call() throws Exception {
      return scheduler.isAllowedToRunInCurrentThread(genericOperation);
    }
  }
);
  DummyNioThread nioThread=new DummyNioThread(futureTask);
  nioThread.start();
  assertEqualsEventually(futureTask,Boolean.FALSE);
}
