{
  HazelcastInstance hazelcastInstance=createHazelcastInstanceFactory(1).newHazelcastInstance();
  IAtomicReference<String> ref=hazelcastInstance.getAtomicReference("setAndGet");
  assertNull(ref.setAndGet(null));
  assertNull(ref.get());
  assertEquals("foo",ref.setAndGet("foo"));
  assertEquals("foo",ref.get());
  assertEquals("bar",ref.setAndGet("bar"));
  assertEquals("bar",ref.get());
  assertNull(ref.setAndGet(null));
  assertNull(ref.get());
}
