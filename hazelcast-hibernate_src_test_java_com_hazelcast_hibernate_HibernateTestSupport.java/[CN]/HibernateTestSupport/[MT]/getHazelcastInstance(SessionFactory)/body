{
  RegionFactory rf=((SessionFactoryImplementor)sf).getSettings().getRegionFactory();
  if (rf instanceof HazelcastCacheRegionFactory) {
    return ((HazelcastCacheRegionFactory)rf).getHazelcastInstance();
  }
 else   if (rf instanceof RegionFactoryCacheProviderBridge) {
    return ((HazelcastCacheProvider)((RegionFactoryCacheProviderBridge)rf).getCacheProvider()).getHazelcastInstance();
  }
  return null;
}
