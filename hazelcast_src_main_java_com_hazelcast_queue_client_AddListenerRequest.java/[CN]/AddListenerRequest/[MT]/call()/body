{
  final ClientEndpoint endpoint=getEndpoint();
  final ClientEngine clientEngine=getClientEngine();
  final QueueService service=getService();
  ItemListener listener=new ItemListener(){
    public void itemAdded(    ItemEvent item){
      send(item);
    }
    public void itemRemoved(    ItemEvent item){
      send(item);
    }
    private void send(    ItemEvent event){
      if (endpoint.live()) {
        clientEngine.sendResponse(endpoint,event.toString());
      }
 else {
        System.err.println("De-registering listener for " + name);
        service.removeItemListener(name,this);
      }
    }
  }
;
  service.addItemListener(name,listener,includeValue);
  return null;
}
