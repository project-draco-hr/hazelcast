{
  check(listener);
  Boolean noEntryListenerRegistered=listenerManager().noListenerRegistered(key,getName(),includeValue);
  Data dKey=protocolProxyHelper.toData(key);
  Data[] datas=dKey == null ? new Data[]{} : new Data[]{dKey};
  if (noEntryListenerRegistered == null) {
    protocolProxyHelper.doCommand(Command.MREMOVELISTENER,getName(),datas);
    noEntryListenerRegistered=Boolean.TRUE;
  }
  if (noEntryListenerRegistered) {
    protocolProxyHelper.doCommand(Command.MADDLISTENER,new String[]{getName(),String.valueOf(includeValue)},datas);
  }
  listenerManager().registerListener(getName(),key,includeValue,listener);
}
