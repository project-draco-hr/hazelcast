{
  Pairs pairs=new Pairs(map.size());
  for (  final K key : map.keySet()) {
    final V value=map.get(key);
    pairs.addKeyValue(new KeyValue(toData(key),toData(value)));
  }
  List<Data> dataList=new ArrayList<Data>();
  for (  K k : map.keySet()) {
    if (k != null) {
      V v=map.get(k);
      if (v != null) {
        dataList.add(toData(k));
        dataList.add(toData(v));
      }
    }
  }
  protocolProxyHelper.doCommand(Command.MPUTALL,getName(),dataList.toArray(new Data[]{}));
}
