{
  int value=RESIDUE.getAndIncrement(this);
  if (value >= BLOCK_SIZE) {
synchronized (this) {
      value=residue;
      if (value >= BLOCK_SIZE) {
        LOCAL.set(this,blockGenerator.getAndIncrement());
        RESIDUE.set(this,0);
      }
      return newId();
    }
  }
  return local * BLOCK_SIZE + value;
}
