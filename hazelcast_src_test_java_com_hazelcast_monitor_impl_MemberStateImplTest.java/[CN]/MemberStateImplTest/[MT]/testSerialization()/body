{
  HazelcastInstance hazelcastInstance=createHazelcastInstance();
  LocalReplicatedMapStatsImpl replicatedMapStats=new LocalReplicatedMapStatsImpl();
  replicatedMapStats.incrementPuts(30);
  CacheStatisticsImpl cacheStatistics=new CacheStatisticsImpl(Clock.currentTimeMillis(),CacheEntryCountResolver.createEntryCountResolver());
  cacheStatistics.increaseCacheHits(5);
  Collection<ClientEndPointDTO> clients=new ArrayList<ClientEndPointDTO>();
  ClientEndPointDTO client=new ClientEndPointDTO();
  client.uuid="abc123456";
  client.address="localhost";
  client.clientType="undefined";
  clients.add(client);
  Map<String,Long> runtimeProps=new HashMap<String,Long>();
  runtimeProps.put("prop1",598123L);
  TimedMemberStateFactory factory=new TimedMemberStateFactory(getHazelcastInstanceImpl(hazelcastInstance));
  TimedMemberState timedMemberState=factory.createTimedMemberState();
  MemberStateImpl memberState=timedMemberState.getMemberState();
  memberState.setAddress("memberStateAddress:Port");
  memberState.putLocalMapStats("mapStats",new LocalMapStatsImpl());
  memberState.putLocalMultiMapStats("multiMapStats",new LocalMultiMapStatsImpl());
  memberState.putLocalQueueStats("queueStats",new LocalQueueStatsImpl());
  memberState.putLocalTopicStats("topicStats",new LocalTopicStatsImpl());
  memberState.putLocalExecutorStats("executorStats",new LocalExecutorStatsImpl());
  memberState.putLocalReplicatedMapStats("replicatedMapStats",replicatedMapStats);
  memberState.putLocalCacheStats("cacheStats",new LocalCacheStatsImpl(cacheStatistics));
  memberState.setRuntimeProps(runtimeProps);
  memberState.setLocalMemoryStats(new LocalMemoryStatsImpl());
  memberState.setOperationStats(new LocalOperationStatsImpl());
  memberState.setClients(clients);
  MemberStateImpl deserialized=new MemberStateImpl();
  deserialized.fromJson(memberState.toJson());
  assertEquals("memberStateAddress:Port",deserialized.getAddress());
  assertNotNull(deserialized.getLocalMapStats("mapStats").toString());
  assertNotNull(deserialized.getLocalMultiMapStats("multiMapStats").toString());
  assertNotNull(deserialized.getLocalQueueStats("queueStats").toString());
  assertNotNull(deserialized.getLocalTopicStats("topicStats").toString());
  assertNotNull(deserialized.getLocalExecutorStats("executorStats").toString());
  assertNotNull(deserialized.getLocalReplicatedMapStats("replicatedMapStats").toString());
  assertEquals(1,deserialized.getLocalReplicatedMapStats("replicatedMapStats").getPutOperationCount());
  assertNotNull(deserialized.getLocalCacheStats("cacheStats").toString());
  assertEquals(5,deserialized.getLocalCacheStats("cacheStats").getCacheHits());
  assertNotNull(deserialized.getRuntimeProps());
  assertEquals(Long.valueOf(598123L),deserialized.getRuntimeProps().get("prop1"));
  assertNotNull(deserialized.getLocalMemoryStats());
  assertNotNull(deserialized.getOperationStats());
  assertNotNull(deserialized.getMXBeans());
  client=deserialized.getClients().iterator().next();
  assertEquals("abc123456",client.uuid);
  assertEquals("localhost",client.address);
  assertEquals("undefined",client.clientType);
}
