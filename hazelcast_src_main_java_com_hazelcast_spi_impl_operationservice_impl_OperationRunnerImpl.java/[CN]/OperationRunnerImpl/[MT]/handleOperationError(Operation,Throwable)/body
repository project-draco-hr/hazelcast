{
  if (e instanceof OutOfMemoryError) {
    OutOfMemoryErrorDispatcher.onOutOfMemory((OutOfMemoryError)e);
  }
  try {
    operation.onExecutionFailure(e);
  }
 catch (  Throwable t) {
    logger.warning("While calling 'operation.onFailure(e)'... op: " + operation + ", error: "+ e,t);
  }
  operation.logError(e);
  OperationResponseHandler responseHandler=operation.getOperationResponseHandler();
  if (operation.returnsResponse() && responseHandler != null) {
    try {
      if (node.getState() == NodeState.ACTIVE) {
        responseHandler.sendResponse(operation,e);
      }
 else       if (responseHandler.isLocal()) {
        responseHandler.sendResponse(operation,new HazelcastInstanceNotActiveException());
      }
    }
 catch (    Throwable t) {
      logger.warning("While sending op error... op: " + operation + ", error: "+ e,t);
    }
  }
}
