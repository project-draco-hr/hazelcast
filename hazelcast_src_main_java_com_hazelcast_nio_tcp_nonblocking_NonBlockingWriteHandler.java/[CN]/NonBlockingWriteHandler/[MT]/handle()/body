{
  try {
    eventCount.inc();
    lastWriteTime=Clock.currentTimeMillis();
    if (shutdown) {
      return;
    }
    if (socketWriter == null) {
      logger.log(Level.WARNING,"SocketWriter is not set, creating SocketWriter with CLUSTER protocol!");
      createWriter(CLUSTER);
    }
    fillOutputBuffer();
    if (dirtyOutputBuffer()) {
      writeOutputBufferToSocket();
    }
    if (newOwner == null) {
      unschedule();
    }
 else {
      startMigration();
    }
  }
 catch (  Throwable t) {
    logger.severe("Fatal Error at WriteHandler for endPoint: " + connection.getEndPoint(),t);
    handleSocketException(t);
  }
}
