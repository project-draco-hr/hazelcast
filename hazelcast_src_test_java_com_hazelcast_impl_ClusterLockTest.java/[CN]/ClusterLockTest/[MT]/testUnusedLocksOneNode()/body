{
  Config config=new Config();
  config.setProperty(GroupProperties.PROP_REMOVE_DELAY_SECONDS,"0");
  HazelcastInstance h1=Hazelcast.newHazelcastInstance(config);
  h1.getMap("default");
  IMap map1=h1.getMap("default");
  CMap cmap1=getCMap(h1,"default");
  for (int i=0; i < 1000; i++) {
    map1.lock(i);
    map1.unlock(i);
  }
  Thread.sleep(cmap1.removeDelayMillis + 100);
  assertTrue(cmap1.startCleanup(true));
  Thread.sleep(1000);
  assertEquals(0,cmap1.mapRecords.size());
  for (int i=0; i < 1000; i++) {
    map1.lock(i);
  }
  Thread.sleep(cmap1.removeDelayMillis + 100);
  assertTrue(cmap1.startCleanup(true));
  Thread.sleep(1000);
  assertEquals(1000,cmap1.mapRecords.size());
}
