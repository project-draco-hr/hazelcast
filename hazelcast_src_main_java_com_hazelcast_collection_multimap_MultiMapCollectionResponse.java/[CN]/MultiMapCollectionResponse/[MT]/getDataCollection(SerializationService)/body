{
  if (collection == null) {
    return getCollection();
  }
  Collection coll=null;
  boolean init=true;
  for (  Object obj : collection) {
    if (init) {
      if (obj instanceof Data) {
        return collection;
      }
 else {
        coll=createCollection(collection.size());
        init=false;
      }
    }
    coll.add(serializationService.toData(obj));
  }
  return coll;
}
