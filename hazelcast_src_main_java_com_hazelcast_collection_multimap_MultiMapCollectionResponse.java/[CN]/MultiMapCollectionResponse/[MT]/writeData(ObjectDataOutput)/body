{
  out.writeUTF(collectionType);
  out.writeBoolean(binary);
  if (collection == null) {
    out.writeInt(-1);
    return;
  }
  out.writeInt(collection.size());
  for (  Object obj : collection) {
    Data data=binary ? (Data)obj : serializationContext.toData(obj);
    out.writeData(data);
  }
}
