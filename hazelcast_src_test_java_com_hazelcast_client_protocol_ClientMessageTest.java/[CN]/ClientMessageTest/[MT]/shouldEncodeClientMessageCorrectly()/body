{
  ByteBuffer byteBuffer=ByteBuffer.allocate(512);
  ClientMessage cmEncode=new ClientMessage();
  cmEncode.wrapForEncode(byteBuffer,0);
  cmEncode.headerType(7).version((short)3).flags(ClientMessage.BEGIN_AND_END_FLAGS).correlationId(0x1234);
  assertThat(byteBuffer.get(0),is((byte)0x0E));
  assertThat(byteBuffer.get(1),is((byte)0));
  assertThat(byteBuffer.get(2),is((byte)0));
  assertThat(byteBuffer.get(3),is((byte)0));
  assertThat(byteBuffer.get(4),is((byte)0x34));
  assertThat(byteBuffer.get(5),is((byte)0x12));
  assertThat(byteBuffer.get(6),is((byte)0));
  assertThat(byteBuffer.get(7),is((byte)0));
  assertThat(byteBuffer.get(8),is((byte)0x03));
  assertThat(byteBuffer.get(9),is((byte)0xC0));
  assertThat(byteBuffer.get(10),is((byte)0x07));
  assertThat(byteBuffer.get(11),is((byte)0));
  assertThat(byteBuffer.get(12),is((byte)0x0E));
  assertThat(byteBuffer.get(13),is((byte)0));
}
