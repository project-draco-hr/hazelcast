{
  ByteBuffer byteBuffer=ByteBuffer.allocate(100);
  ClientMessage cmEncode=new ClientMessage();
  cmEncode.wrapForEncode(byteBuffer,0);
  cmEncode.headerType(7).version((short)3).flags(ClientMessage.BEGIN_AND_END_FLAGS).correlationId(66);
  byte[] data1=VAR_DATA_STR_1.getBytes(DEFAULT_ENCODING);
  byte[] data2=VAR_DATA_STR_2.getBytes(DEFAULT_ENCODING);
  cmEncode.putVarData(data1);
  cmEncode.putVarData(data2);
  final int calculatedFrameSize=ClientMessage.HEADER_SIZE + BitUtil.SIZE_OF_INT + data1.length+ BitUtil.SIZE_OF_INT+ data2.length;
  ClientMessage cmDecode=new ClientMessage();
  cmDecode.wrapForDecode(byteBuffer,0);
  assertEquals(calculatedFrameSize,cmEncode.frameLength());
  assertEquals(7,cmDecode.headerType());
  assertEquals(3,cmDecode.version());
  assertEquals(ClientMessage.BEGIN_AND_END_FLAGS,cmDecode.flags());
  assertEquals(66,cmDecode.correlationId());
  assertEquals(calculatedFrameSize,cmDecode.frameLength());
  byte[] cmDecodeVarData1=cmDecode.getVarData();
  byte[] cmDecodeVarData2=cmDecode.getVarData();
  assertArrayEquals(cmDecodeVarData1,data1);
  assertArrayEquals(cmDecodeVarData2,data2);
}
