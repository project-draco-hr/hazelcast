{
  ByteBuffer byteBuffer=ByteBuffer.allocate(1024);
  ClientMessage cmEncode=new ClientMessage();
  cmEncode.wrapForEncode(byteBuffer,0);
  final byte[] data1=VAR_DATA_STR_1.getBytes(DEFAULT_ENCODING);
  final int calculatedFrameSize=ClientMessage.HEADER_SIZE + data1.length;
  cmEncode.putPayloadData(data1);
  ClientMessage cmDecode=new ClientMessage();
  cmDecode.wrapForDecode(byteBuffer,0);
  final byte[] cmDecodeVarData1=new byte[data1.length];
  cmDecode.getPayloadData(cmDecodeVarData1);
  assertEquals(calculatedFrameSize,cmEncode.getFrameLength());
  assertEquals(calculatedFrameSize,cmDecode.getFrameLength());
  assertArrayEquals(cmDecodeVarData1,data1);
}
