{
  if (converter == null) {
    AttributeType attributeType=e.getAttributeType(attribute);
    converter=attributeType == null ? TypeConverters.IDENTITY_CONVERTER : attributeType.getConverter();
  }
  Comparable oldValue=null;
  if (oldRecordValue != null) {
    oldValue=QueryEntryUtils.extractAttribute(attribute,e.getKey(),oldRecordValue,ss);
    oldValue=sanitizeValue(oldValue);
  }
  Comparable newValue=QueryEntryUtils.extractAttribute(attribute,e.getKey(),e.getValue(),ss);
  newValue=sanitizeValue(newValue);
  if (oldValue == null) {
    indexStore.newIndex(newValue,e);
  }
 else {
    indexStore.updateIndex(oldValue,newValue,e);
  }
}
