{
  final NamedNodeMap atts=node.getAttributes();
  Collection<String> epn=excludeNames != null && excludeNames.length > 0 ? new HashSet<String>(Arrays.asList(excludeNames)) : null;
  if (atts != null) {
    for (int a=0; a < atts.getLength(); a++) {
      final org.w3c.dom.Node att=atts.item(a);
      final String name=xmlToJavaName(att.getNodeName());
      if (epn != null && epn.contains(name))       continue;
      final String value=att.getNodeValue();
      builder.addPropertyValue(name,value);
    }
  }
  for (  org.w3c.dom.Node n : new IterableNodeList(node,Node.ELEMENT_NODE)) {
    String name=xmlToJavaName(cleanNodeName(n));
    if (epn != null && epn.contains(name))     continue;
    String value=getValue(n);
    builder.addPropertyValue(name,value);
  }
}
