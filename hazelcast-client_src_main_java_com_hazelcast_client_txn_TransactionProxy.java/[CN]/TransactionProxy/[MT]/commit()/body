{
  if (state != ACTIVE) {
    throw new TransactionNotActiveException("Transaction is not active");
  }
  checkThread();
  checkTimeout();
  sendAndReceive(new CommitTransactionRequest());
  state=COMMITTED;
}
