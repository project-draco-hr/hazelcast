{
  Config cfg=getConfig();
  cfg.getMapConfig("test").setInMemoryFormat(InMemoryFormat.OBJECT);
  TestHazelcastInstanceFactory factory=createHazelcastInstanceFactory(2);
  HazelcastInstance instance1=factory.newHazelcastInstance(cfg);
  HazelcastInstance instance2=factory.newHazelcastInstance(cfg);
  try {
    IMap<String,Issue1764Data> map=instance1.getMap("test");
    map.put("a",new Issue1764Data("foo","bar"));
    map.put("b",new Issue1764Data("abc","123"));
    Set<String> keys=new HashSet<String>();
    keys.add("a");
    map.executeOnKeys(keys,new Issue1764UpdatingEntryProcessor("test"));
  }
 catch (  ClassCastException e) {
    e.printStackTrace();
    fail("ClassCastException must not happen!");
  }
}
