{
  final String mapName=randomMapName();
  TestHazelcastInstanceFactory nodeFactory=createHazelcastInstanceFactory(1);
  HazelcastInstance node=nodeFactory.newHazelcastInstance();
  IMap<Integer,Integer> map=node.getMap(mapName);
  final AtomicInteger addCount=new AtomicInteger(0);
  final AtomicInteger updateCount=new AtomicInteger(0);
  final AtomicInteger removeCount=new AtomicInteger(0);
  final CountDownLatch latch=new CountDownLatch(1);
  map.addEntryListener(new EntryAdapter<Integer,Integer>(){
    @Override public void entryAdded(    EntryEvent<Integer,Integer> event){
      addCount.incrementAndGet();
      latch.countDown();
    }
    @Override public void entryRemoved(    EntryEvent<Integer,Integer> event){
      removeCount.incrementAndGet();
      latch.countDown();
    }
    @Override public void entryUpdated(    EntryEvent<Integer,Integer> event){
      updateCount.incrementAndGet();
      latch.countDown();
    }
  }
,true);
  map.executeOnKey(1,new ValueReaderEntryProcessor());
  latch.await(10,TimeUnit.SECONDS);
  assertEquals(0,addCount.get());
  assertEquals(0,updateCount.get());
  assertEquals(0,removeCount.get());
}
