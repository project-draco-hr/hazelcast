{
  final ObjectInputStream objectInputStream;
  final InputStream inputStream=(InputStream)in;
  if (gzipEnabled) {
    objectInputStream=newObjectInputStream(new BufferedInputStream(new GZIPInputStream(inputStream)));
  }
 else {
    objectInputStream=newObjectInputStream(inputStream);
  }
  final Object result;
  try {
    if (shared) {
      result=objectInputStream.readObject();
    }
 else {
      result=objectInputStream.readUnshared();
    }
  }
 catch (  ClassNotFoundException e) {
    throw new HazelcastSerializationException(e);
  }
  return result;
}
