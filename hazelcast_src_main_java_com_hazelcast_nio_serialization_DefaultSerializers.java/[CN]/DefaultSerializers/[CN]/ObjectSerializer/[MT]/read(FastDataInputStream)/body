{
  final ObjectInputStream in;
  if (gzipEnabled) {
    in=newObjectInputStream(new BufferedInputStream(new GZIPInputStream(dataIn)));
  }
 else {
    in=newObjectInputStream(dataIn);
  }
  final Object result;
  try {
    if (shared) {
      result=in.readObject();
    }
 else {
      result=in.readUnshared();
    }
  }
  finally {
    closeResource(in);
  }
  return result;
}
