{
  MockConnection conn=mapConnections.get(address);
  if (live && (conn == null || !conn.isAlive())) {
    Node otherNode=registry.getNode(address);
    if (otherNode != null && otherNode.getState() != NodeState.SHUT_DOWN) {
      MockConnection thisConnection=new MockConnection(address,node.getThisAddress(),node.getNodeEngine());
      conn=new MockConnection(node.getThisAddress(),address,otherNode.getNodeEngine());
      conn.localConnection=thisConnection;
      thisConnection.localConnection=conn;
      mapConnections.put(address,conn);
      logger.info("Created connection to endpoint: " + address + ", connection: "+ conn);
    }
  }
  return conn;
}
