{
  live=false;
  for (  Address address : nodes.keySet()) {
    if (address.equals(node.getThisAddress())) {
      continue;
    }
    final NodeEngineImpl nodeEngine=nodes.get(address);
    if (nodeEngine != null && nodeEngine.getNode().getState() != NodeState.SHUT_DOWN) {
      nodeEngine.getExecutionService().execute(ExecutionService.SYSTEM_EXECUTOR,new Runnable(){
        public void run(){
          ClusterServiceImpl clusterService=(ClusterServiceImpl)nodeEngine.getClusterService();
          clusterService.removeAddress(node.getThisAddress());
        }
      }
);
    }
  }
  for (  MockConnection connection : mapConnections.values()) {
    connection.close();
  }
}
