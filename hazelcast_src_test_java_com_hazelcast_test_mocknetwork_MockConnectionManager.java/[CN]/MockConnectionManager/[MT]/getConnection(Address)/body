{
  MockConnection conn=mapConnections.get(address);
  if (conn == null || !conn.isAlive()) {
    NodeEngineImpl nodeEngine=nodes.get(address);
    if (nodeEngine != null && nodeEngine.getNode().getState() != NodeState.SHUT_DOWN) {
      MockConnection thisConnection=new MockConnection(address,node.getThisAddress(),node.nodeEngine);
      conn=new MockConnection(node.getThisAddress(),address,nodeEngine);
      conn.localConnection=thisConnection;
      thisConnection.localConnection=conn;
      mapConnections.put(address,conn);
    }
  }
  return conn;
}
