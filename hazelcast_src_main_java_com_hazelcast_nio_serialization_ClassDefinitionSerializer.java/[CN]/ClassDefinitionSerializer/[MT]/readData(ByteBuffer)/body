{
  if (isStatusSet(ST_DATA)) {
    return true;
  }
  if (isStatusSet(ST_SKIP_DATA)) {
    int skip=Math.min(classDefSize,source.remaining());
    source.position(skip + source.position());
    classDefSize-=skip;
    if (classDefSize > 0) {
      return false;
    }
    clearStatus(ST_SKIP_DATA);
  }
 else {
    if (buffer == null) {
      buffer=ByteBuffer.allocate(classDefSize);
    }
    IOUtil.copyToHeapBuffer(source,buffer);
    if (buffer.hasRemaining()) {
      return false;
    }
    classDefProxy.setBinary(buffer.array());
    context.registerClassDefinition(classDefProxy);
    buffer=null;
    classDefProxy=null;
  }
  setStatus(ST_DATA);
  return true;
}
