{
  if (!enabled) {
    return;
  }
  final Map<Long,Object> objectMap=new HashMap<Long,Object>(map.size());
  if (binary) {
    BufferObjectDataOutput out=serializationService.createObjectDataOutput(OUTPUT_SIZE);
    try {
      for (      Map.Entry<Long,Data> entry : map.entrySet()) {
        entry.getValue().writeData(out);
        objectMap.put(entry.getKey(),out.toByteArray());
        out.clear();
      }
    }
 catch (    IOException e) {
      throw new HazelcastException(e);
    }
 finally {
      IOUtil.closeResource(out);
    }
  }
 else {
    for (    Map.Entry<Long,Data> entry : map.entrySet()) {
      objectMap.put(entry.getKey(),serializationService.toObject(entry.getValue()));
    }
  }
  store.storeAll(objectMap);
}
