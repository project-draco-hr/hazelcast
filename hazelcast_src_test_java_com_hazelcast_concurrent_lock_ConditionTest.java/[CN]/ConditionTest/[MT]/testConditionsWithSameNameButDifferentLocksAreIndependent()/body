{
  HazelcastInstance instance=createHazelcastInstance();
  String name=randomString();
  ILock lock0=instance.getLock(randomString());
  final ICondition condition0=lock0.newCondition(name);
  ILock lock1=instance.getLock(randomString());
  final ICondition condition1=lock1.newCondition(name);
  final CountDownLatch latch=new CountDownLatch(2);
  createThreadWaitsForCondition(latch,lock0,condition0).start();
  createThreadWaitsForCondition(latch,lock1,condition1).start();
  sleepSeconds(1);
  lock0.lock();
  condition0.signalAll();
  lock0.unlock();
  lock1.lock();
  condition1.signalAll();
  lock1.unlock();
  assertOpenEventually(latch);
}
