{
  HazelcastInstance instance=createHazelcastInstance();
  final ILock lock=instance.getLock(randomString());
  final ICondition condition0=lock.newCondition(randomString());
  final ICondition condition1=lock.newCondition(randomString());
  final CountDownLatch latch=new CountDownLatch(10);
  createThreadWaitsForCondition(latch,lock,condition0).start();
  createThreadWaitsForCondition(latch,lock,condition1).start();
  sleepSeconds(1);
  lock.lock();
  condition0.signalAll();
  lock.unlock();
  assertTrueDelayed5sec(new AssertTask(){
    @Override public void run() throws Exception {
      assertEquals(latch.getCount(),9);
    }
  }
);
}
