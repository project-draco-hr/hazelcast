{
  Address endpoint=connection.getEndPoint();
  if (endpoint != null) {
    final ClientConnection conn=connections.remove(endpoint);
    if (conn == null) {
      return;
    }
    conn.close(reason,cause);
    for (    ConnectionListener connectionListener : connectionListeners) {
      connectionListener.connectionRemoved(conn);
    }
  }
 else {
    connection.close(reason,cause);
  }
}
