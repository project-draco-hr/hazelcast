{
  final SerializationService ss=client.getSerializationService();
  connection.write(ss.toData(request));
  final Data data=connection.read();
  ClientResponse clientResponse=ss.toObject(data);
  Object response=ss.toObject(clientResponse.getResponse());
  if (response instanceof Throwable) {
    Throwable t=(Throwable)response;
    ExceptionUtil.fixRemoteStackTrace(t,Thread.currentThread().getStackTrace());
    if (t instanceof Exception) {
      throw (Exception)t;
    }
    throw new Exception(t);
  }
  return response;
}
