{
  this.client=client;
  this.addressTranslator=addressTranslator;
  final ClientConfig config=client.getClientConfig();
  final ClientNetworkConfig networkConfig=config.getNetworkConfig();
  connectionTimeout=networkConfig.getConnectionTimeout();
  final ClientProperties clientProperties=client.getClientProperties();
  int timeout=clientProperties.getHeartbeatTimeout().getInteger();
  this.heartBeatTimeout=timeout > 0 ? timeout : Integer.parseInt(PROP_HEARTBEAT_TIMEOUT_DEFAULT);
  int interval=clientProperties.getHeartbeatInterval().getInteger();
  heartBeatInterval=interval > 0 ? interval : Integer.parseInt(PROP_HEARTBEAT_INTERVAL_DEFAULT);
  int failedHeartbeat=clientProperties.getMaxFailedHeartbeatCount().getInteger();
  maxFailedHeartbeatCount=failedHeartbeat > 0 ? failedHeartbeat : Integer.parseInt(PROP_MAX_FAILED_HEARTBEAT_COUNT_DEFAULT);
  smartRouting=networkConfig.isSmartRouting();
  executionService=(ClientExecutionServiceImpl)client.getClientExecutionService();
  credentials=initCredentials(config);
  router=new Router(loadBalancer);
  inSelector=new InSelectorImpl(client.getThreadGroup(),"InSelector",Logger.getLogger(InSelectorImpl.class),OUT_OF_MEMORY_HANDLER);
  outSelector=new OutSelectorImpl(client.getThreadGroup(),"OutSelector",Logger.getLogger(OutSelectorImpl.class),OUT_OF_MEMORY_HANDLER);
  socketInterceptor=initSocketInterceptor(networkConfig.getSocketInterceptorConfig());
  socketOptions=networkConfig.getSocketOptions();
  socketChannelWrapperFactory=initSocketChannel(networkConfig);
}
