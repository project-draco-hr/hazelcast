{
  ClientNetworkConfig networkConfig=client.getClientConfig().getNetworkConfig();
  int connectionAttemptLimit=networkConfig.getConnectionAttemptLimit();
  int connectionAttemptPeriod=networkConfig.getConnectionAttemptPeriod();
  int waitTime;
  if (connectionAttemptLimit == Integer.MAX_VALUE || connectionAttemptPeriod == Integer.MAX_VALUE) {
    waitTime=Integer.MAX_VALUE;
  }
 else {
    waitTime=connectionAttemptLimit * connectionAttemptPeriod * 2;
  }
  final ClientConnection currentOwnerConnection=ownerConnection;
  if (currentOwnerConnection != null) {
    return currentOwnerConnection;
  }
synchronized (ownerConnectionLock) {
    long endTime=System.currentTimeMillis() + waitTime;
    while (ownerConnection == null && endTime > System.currentTimeMillis()) {
      try {
        ownerConnectionLock.wait(waitTime);
      }
 catch (      InterruptedException e) {
        throw new IOException(e);
      }
    }
    if (ownerConnection == null) {
      LOGGER.warning("Wait for owner connection is timed out");
      throw new IOException("Wait for owner connection is timed out");
    }
    return ownerConnection;
  }
}
