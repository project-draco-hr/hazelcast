{
  ClientNetworkConfig networkConfig=client.getClientConfig().getNetworkConfig();
  long connectionAttemptLimit=networkConfig.getConnectionAttemptLimit();
  long connectionAttemptPeriod=networkConfig.getConnectionAttemptPeriod();
  long waitTime=connectionAttemptLimit * connectionAttemptPeriod * 2;
  if (waitTime < 0) {
    waitTime=Long.MAX_VALUE;
  }
  final ClientConnection currentOwnerConnection=ownerConnection;
  if (currentOwnerConnection != null) {
    return currentOwnerConnection;
  }
synchronized (ownerConnectionLock) {
    long endTime=System.currentTimeMillis() + waitTime;
    while (ownerConnection == null && endTime > System.currentTimeMillis()) {
      try {
        ownerConnectionLock.wait(waitTime);
      }
 catch (      InterruptedException e) {
        throw new IOException(e);
      }
    }
    if (ownerConnection == null) {
      LOGGER.warning("Wait for owner connection is timed out");
      throw new IOException("Wait for owner connection is timed out");
    }
    return ownerConnection;
  }
}
