{
  if (!alive) {
    return;
  }
  final long now=Clock.currentTimeMillis();
  for (  ClientConnection connection : connections.values()) {
    if (now - connection.lastReadTime() > heartBeatTimeout) {
      connection.heartBeatingFailed();
    }
    if (now - connection.lastReadTime() > heartBeatInterval) {
      final ClientPingRequest request=new ClientPingRequest();
      invocationService.invokeOnConnection(request,connection);
    }
 else {
      connection.heartBeatingSucceed();
    }
  }
}
