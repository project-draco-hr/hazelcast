{
  Config config=new Config();
  final String name=randomString();
  config.getQueueConfig(name).setMaxSize(100);
  TestHazelcastInstanceFactory factory=createHazelcastInstanceFactory(2);
  HazelcastInstance instance=factory.newHazelcastInstance(config);
  HazelcastInstance instance2=factory.newHazelcastInstance(config);
  IQueue<Object> queue=instance.getQueue(name);
  IQueue<Object> queue2=instance2.getQueue(name);
  List<String> list=new ArrayList<String>();
  for (int i=0; i < 10; i++) {
    list.add("item" + i);
  }
  assertTrue(queue.addAll(list));
  assertEquals(queue.peek(),"item0");
  assertEquals(queue2.peek(),"item0");
}
