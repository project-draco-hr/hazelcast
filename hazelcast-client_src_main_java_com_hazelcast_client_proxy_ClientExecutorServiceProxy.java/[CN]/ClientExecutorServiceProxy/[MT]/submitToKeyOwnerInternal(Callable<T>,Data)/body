{
  check(task);
  ClientPartitionService partitionService=getContext().getPartitionService();
  CompletableFuture<T> f;
  if (partitionKey == null) {
    final LocalTargetCallableRequest request=new LocalTargetCallableRequest(name,task);
    f=invokeFuture(request);
    f=checkSync(f);
  }
 else {
    int partitionId=partitionService.getPartitionId(partitionKey);
    final Address owner=partitionService.getPartitionOwner(partitionId);
    f=submitToTargetInternal(task,owner);
  }
  return f;
}
