{
  check(task);
  ClientPartitionService partitionService=getContext().getPartitionService();
  if (partitionKey == null) {
    final LocalTargetCallableRequest request=new LocalTargetCallableRequest(name,task);
    ICompletableFuture f=invokeFuture(request);
    f.andThen(callback);
  }
 else {
    int partitionId=partitionService.getPartitionId(partitionKey);
    final Address owner=partitionService.getPartitionOwner(partitionId);
    submitToTargetInternal(task,owner,callback);
  }
}
