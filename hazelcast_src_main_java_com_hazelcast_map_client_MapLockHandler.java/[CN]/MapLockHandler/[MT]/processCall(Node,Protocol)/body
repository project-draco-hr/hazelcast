{
  String name=protocol.args[0];
  long timeout=-1;
  if (protocol.command.equals(Command.MTRYLOCK)) {
    if (protocol.args.length > 0)     timeout=Long.valueOf(protocol.args[1]);
 else     timeout=0;
  }
  boolean locked=true;
  Data key=null;
  if (protocol.buffers != null && protocol.buffers.length > 0) {
    key=binaryToData(protocol.buffers[0].array());
  }
  DataMapProxy dataMapProxy=(DataMapProxy)mapService.createClientProxy(name);
  if (timeout == -1) {
    dataMapProxy.lock(key);
  }
 else   if (timeout == 0) {
    locked=dataMapProxy.tryLock(key);
  }
 else {
    locked=dataMapProxy.tryLock(key,timeout,TimeUnit.MILLISECONDS);
  }
  return protocol.success(String.valueOf(locked));
}
