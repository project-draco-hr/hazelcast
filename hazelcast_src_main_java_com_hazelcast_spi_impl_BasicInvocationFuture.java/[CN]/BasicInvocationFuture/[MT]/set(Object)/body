{
  offeredResponse=resolveInternalResponse(offeredResponse);
  ExecutionCallbackNode<E> callbackChain;
synchronized (this) {
    if (response != null && !(response instanceof BasicInvocation.InternalResponse)) {
      basicInvocation.logger.info("The InvocationFuture.set method of " + basicInvocation + " can only be called once");
      return;
    }
    response=offeredResponse;
    if (offeredResponse == BasicInvocation.WAIT_RESPONSE) {
      return;
    }
    callbackChain=callbackHead;
    callbackHead=null;
    notifyAll();
  }
  BasicOperationService operationService=(BasicOperationService)basicInvocation.nodeEngine.operationService;
  operationService.deregisterInvocation(basicInvocation.op.getCallId());
  notifyCallbacks(callbackChain);
}
