{
  if (pollTimeoutMs > 0) {
    long currentTimeoutMs=pollTimeoutMs;
    final long waitStart=Clock.currentTimeMillis();
synchronized (this) {
      while (currentTimeoutMs > 0 && (response == null || response == BasicInvocation.WAIT_RESPONSE)) {
        wait(currentTimeoutMs);
        currentTimeoutMs=pollTimeoutMs - (Clock.currentTimeMillis() - waitStart);
      }
    }
  }
}
