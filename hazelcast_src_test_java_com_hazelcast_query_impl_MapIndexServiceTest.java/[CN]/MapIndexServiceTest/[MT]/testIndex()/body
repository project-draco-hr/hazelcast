{
  IndexService indexService=new IndexService();
  indexService.addOrGetIndex("name",false);
  indexService.addOrGetIndex("age",true);
  indexService.addOrGetIndex("salary",true);
  for (int i=0; i < 20000; i++) {
    Employee employee=new Employee(i + "Name",i % 80,(i % 2 == 0),100 + (i % 1000));
    indexService.saveEntryIndex(new QueryEntry(null,i,i,employee));
  }
  long total=Runtime.getRuntime().totalMemory();
  long free=Runtime.getRuntime().freeMemory();
  System.out.println("Used Memory:" + ((total - free) / 1024 / 1024));
  long start=Clock.currentTimeMillis();
  for (int i=0; i < 10000; i++) {
    SqlPredicate predicate=new SqlPredicate("salary=161 and age >20 and age <23");
    Set<QueryableEntry> results=new HashSet<QueryableEntry>(indexService.query(predicate));
    assertEquals(10,results.size());
  }
  System.out.println("Took " + (Clock.currentTimeMillis() - start));
}
