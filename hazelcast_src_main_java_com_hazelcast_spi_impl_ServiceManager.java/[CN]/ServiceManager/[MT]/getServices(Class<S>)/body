{
  final LinkedList<S> result=new LinkedList<S>();
  for (  Object service : services.values()) {
    if (serviceClass.isAssignableFrom(service.getClass())) {
      if (service instanceof CoreService) {
        result.addFirst((S)service);
      }
 else {
        result.addLast((S)service);
      }
    }
  }
  return result;
}
