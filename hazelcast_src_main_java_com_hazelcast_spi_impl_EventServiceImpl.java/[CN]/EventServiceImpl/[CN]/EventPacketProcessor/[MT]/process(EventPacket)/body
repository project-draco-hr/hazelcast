{
  Object eventObject=eventPacket.event;
  if (eventObject instanceof Data) {
    eventObject=nodeEngine.toObject(eventObject);
  }
  final String serviceName=eventPacket.serviceName;
  EventPublishingService<Object,Object> service=nodeEngine.getService(serviceName);
  if (service == null) {
    logger.warning("There is no service named: " + serviceName);
    return;
  }
  EventServiceSegment segment=getSegment(serviceName,false);
  if (segment == null) {
    logger.warning("No service registration found for " + serviceName);
    return;
  }
  Registration registration=segment.registrationIdMap.get(eventPacket.id);
  if (registration == null) {
    logger.warning("No registration found for " + serviceName + " / "+ eventPacket.id);
    return;
  }
  if (!registration.isLocal()) {
    logger.warning("Invalid target for  " + registration);
    return;
  }
  service.dispatchEvent(eventObject,registration.listener);
}
