{
  EventServiceSegment segment=segments.get(service);
  if (segment == null && forceCreate) {
    return ConcurrencyUtil.getOrPutIfAbsent(segments,service,new ConstructorFunction<String,EventServiceSegment>(){
      public EventServiceSegment createNew(      String key){
        return new EventServiceSegment(key);
      }
    }
);
  }
  return segment;
}
