{
  if (!(registration instanceof Registration)) {
    throw new IllegalArgumentException();
  }
  final Registration reg=(Registration)registration;
  if (reg.isLocal()) {
    eventExecutorService.execute(new LocalEventDispatcher(serviceName,event,reg.listener));
  }
 else {
    final Address subscriber=registration.getSubscriber();
    final Data data=nodeEngine.toData(new EventPacket(registration.getId(),serviceName,event));
    final Packet packet=new Packet(data,serializationContext);
    packet.setHeader(Packet.HEADER_EVENT,true);
    nodeEngine.getClusterService().send(packet,subscriber);
  }
}
