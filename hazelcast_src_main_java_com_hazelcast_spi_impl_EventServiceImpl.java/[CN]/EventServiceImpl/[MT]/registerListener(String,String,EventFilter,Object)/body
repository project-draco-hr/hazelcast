{
  if (listener == null) {
    throw new IllegalArgumentException("Listener required!");
  }
  if (filter == null) {
    throw new IllegalArgumentException("Filter required");
  }
  EventServiceSegment segment=getSegment(serviceName,true);
  Registration reg=new Registration(createId(serviceName),serviceName,filter,nodeEngine.getThisAddress(),listener);
  if (segment.addRegistration(topic,reg)) {
    final RegistrationOperation op=new RegistrationOperation(topic,reg);
    invokeOnOtherNodes(serviceName,op);
    return reg;
  }
 else {
    return null;
  }
}
