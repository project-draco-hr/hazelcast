{
  checkNotNull(source,"source can't be null");
  boolean changed=false;
  for (  Map.Entry<String,GaugeImpl> entry : metrics.entrySet()) {
    GaugeImpl gauge=entry.getValue();
    if (gauge.source != source) {
      continue;
    }
    String name=entry.getKey();
    changed=true;
    metrics.remove(name);
    gauge.source=null;
    gauge.input=null;
    if (logger.isFinestEnabled()) {
      logger.finest("Destroying gauge " + name);
    }
  }
  if (changed) {
    modCount.incrementAndGet();
  }
}
