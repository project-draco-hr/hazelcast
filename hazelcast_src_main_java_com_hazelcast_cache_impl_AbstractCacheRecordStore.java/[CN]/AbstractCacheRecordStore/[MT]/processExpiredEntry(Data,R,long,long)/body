{
  final boolean isExpired=isExpiredAt(expiryTime,now);
  if (!isExpired) {
    return record;
  }
  if (isStatisticsEnabled()) {
    statistics.increaseCacheExpiries(1);
  }
  records.remove(key);
  if (isEventsEnabled) {
    final Data dataValue;
switch (cacheConfig.getInMemoryFormat()) {
case BINARY:
case OBJECT:
case NATIVE:
      dataValue=toEventData(record);
    break;
default :
  throw new IllegalArgumentException("Invalid storage format: " + cacheConfig.getInMemoryFormat());
}
publishEvent(CacheEventType.EXPIRED,key,null,dataValue,false,IGNORE_COMPLETION);
}
return null;
}
