{
  if (isEventsEnabled()) {
    cacheEventContext.setCacheName(name);
    if (eventsBatchingEnabled) {
      final CacheEventDataImpl cacheEventData=new CacheEventDataImpl(name,cacheEventContext.getEventType(),cacheEventContext.getDataKey(),cacheEventContext.getDataValue(),cacheEventContext.getDataOldValue(),cacheEventContext.isOldValueAvailable());
      Set<CacheEventData> cacheEventDataSet=batchEvent.get(cacheEventContext.getEventType());
      if (cacheEventDataSet == null) {
        cacheEventDataSet=new HashSet<CacheEventData>();
        batchEvent.put(cacheEventContext.getEventType(),cacheEventDataSet);
      }
      cacheEventDataSet.add(cacheEventData);
    }
 else {
      cacheService.publishEvent(cacheEventContext);
    }
  }
}
