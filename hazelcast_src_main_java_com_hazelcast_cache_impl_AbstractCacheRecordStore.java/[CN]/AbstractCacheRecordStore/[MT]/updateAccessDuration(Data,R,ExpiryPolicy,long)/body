{
  long expiryTime=-1L;
  try {
    Duration expiryDuration=expiryPolicy.getExpiryForAccess();
    if (expiryDuration != null) {
      expiryTime=expiryDuration.getAdjustedTime(now);
      record.setExpirationTime(expiryTime);
      if (isEventsEnabled) {
        CacheEventContext cacheEventContext=createBaseEventContext(CacheEventType.EXPIRATION_TIME_UPDATED,toHeapData(key),toEventData(record.getValue()),expiryTime,null,IGNORE_COMPLETION);
        cacheEventContext.setAccessHit(record.getAccessHit());
        publishEvent(cacheEventContext);
      }
    }
  }
 catch (  Exception e) {
    EmptyStatement.ignore(e);
  }
  return expiryTime;
}
