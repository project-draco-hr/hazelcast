{
  final R record=records.remove(key);
  final Data dataValue;
switch (cacheConfig.getInMemoryFormat()) {
case BINARY:
    dataValue=toData(record);
  break;
case OBJECT:
dataValue=toData(record);
break;
case OFFHEAP:
dataValue=toData(record);
break;
default :
throw new IllegalArgumentException("Invalid storage format: " + cacheConfig.getInMemoryFormat());
}
boolean result=record != null;
onDeleteRecord(key,record,dataValue,record != null);
if (isEventsEnabled) {
publishEvent(name,CacheEventType.REMOVED,key,null,dataValue,false);
}
return result;
}
