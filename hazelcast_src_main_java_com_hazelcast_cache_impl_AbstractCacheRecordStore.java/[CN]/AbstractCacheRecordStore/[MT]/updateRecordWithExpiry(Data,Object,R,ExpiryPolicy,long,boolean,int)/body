{
  expiryPolicy=getExpiryPolicy(expiryPolicy);
  long expiryTime=-1L;
  try {
    Duration expiryDuration=expiryPolicy.getExpiryForUpdate();
    if (expiryDuration != null) {
      expiryTime=expiryDuration.getAdjustedTime(now);
      record.setExpirationTime(expiryTime);
    }
  }
 catch (  Exception e) {
    EmptyStatement.ignore(e);
  }
  if (!disableWriteThrough) {
    writeThroughCache(key,value);
  }
  updateRecord(key,record,value,completionId);
  return processExpiredEntry(key,record,expiryTime,now) != null;
}
