{
switch (inMemoryFormat) {
case BINARY:
    return (T)toData(obj);
case OBJECT:
  return (T)toValue(obj);
case OFFHEAP:
return (T)toData(obj);
default :
throw new IllegalArgumentException("Invalid storage format: " + cacheConfig.getInMemoryFormat());
}
}
