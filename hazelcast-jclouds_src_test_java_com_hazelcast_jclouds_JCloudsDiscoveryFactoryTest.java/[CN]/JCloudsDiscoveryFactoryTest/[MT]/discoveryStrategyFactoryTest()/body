{
  JCloudsDiscoveryStrategyFactory jCloudsDiscoveryStrategyFactory=new JCloudsDiscoveryStrategyFactory();
  String xmlFileName="test-jclouds-config.xml";
  InputStream xmlResource=JCloudsDiscoveryFactoryTest.class.getClassLoader().getResourceAsStream(xmlFileName);
  Config config=new XmlConfigBuilder(xmlResource).build();
  JoinConfig joinConfig=config.getNetworkConfig().getJoin();
  DiscoveryConfig discoveryConfig=joinConfig.getDiscoveryConfig();
  DiscoveryStrategyConfig providerConfig=discoveryConfig.getDiscoveryStrategyConfigs().iterator().next();
  assertEquals(jCloudsDiscoveryStrategyFactory.getDiscoveryStrategyType(),JCloudsDiscoveryStrategy.class);
  assertEquals(JCloudsDiscoveryStrategyFactory.class.getName(),providerConfig.getClassName());
  assertEquals(jCloudsDiscoveryStrategyFactory.getConfigurationProperties().size(),providerConfig.getProperties().size());
  assertTrue(jCloudsDiscoveryStrategyFactory.newDiscoveryStrategy(null,null,new HashMap<String,Comparable>()) instanceof DiscoveryStrategy);
}
