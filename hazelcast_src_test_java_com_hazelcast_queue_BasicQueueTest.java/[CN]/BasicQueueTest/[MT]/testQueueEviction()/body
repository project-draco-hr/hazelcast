{
  TestHazelcastInstanceFactory factory=createHazelcastInstanceFactory(1);
  final Config config=new Config();
  config.getQueueConfig("q").setEmptyQueueTtl(0);
  final HazelcastInstance hz=factory.newHazelcastInstance(config);
  final IQueue<Object> q=hz.getQueue("q");
  new Thread(){
    public void run(){
      try {
        Thread.sleep(1000);
      }
 catch (      InterruptedException e) {
        e.printStackTrace();
      }
      q.drainTo(new LinkedList<Object>());
    }
  }
.start();
  try {
    q.take();
    fail();
  }
 catch (  Exception e) {
    assertTrue(e instanceof DistributedObjectDestroyedException);
  }
  q.size();
}
