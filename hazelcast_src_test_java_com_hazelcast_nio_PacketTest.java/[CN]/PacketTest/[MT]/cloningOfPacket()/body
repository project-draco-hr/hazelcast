{
  DefaultData originalData=new DefaultData(1,"foobar".getBytes());
  Packet originalPacket=new Packet(originalData,mock(PortableContext.class));
  ByteBuffer bb=ByteBuffer.allocate(100);
  boolean written=originalPacket.writeTo(bb);
  assertTrue(written);
  bb.flip();
  Packet clonedPacket=new Packet(mock(PortableContext.class));
  boolean read=clonedPacket.readFrom(bb);
  assertTrue(read);
  assertEquals(originalPacket.getHeader(),clonedPacket.getHeader());
  assertEquals(originalPacket.getData(),clonedPacket.getData());
}
