{
  packetVersion=in.readByte();
  buildNumber=in.readInt();
  boolean hasTo=in.readBoolean();
  if (hasTo) {
    to=new Address();
    to.readData(in);
  }
  address=new Address();
  address.readData(in);
  nodeType=NodeType.create(in.readInt());
  config=new Config();
  config.readData(in);
  uuid=in.readUTF();
  boolean hasCredentials=in.readBoolean();
  if (hasCredentials) {
    credentials=(Credentials)SerializationHelper.readObject(in);
    if (credentials != null) {
      credentials.setEndpoint(address.getHost());
    }
  }
}
