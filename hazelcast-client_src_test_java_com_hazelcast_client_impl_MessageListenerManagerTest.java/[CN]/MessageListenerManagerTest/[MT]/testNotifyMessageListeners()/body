{
  final MessageListenerManager manager=new MessageListenerManager(serializationService);
  final String name="default";
  assertTrue(manager.noListenerRegistered(name));
  final String myMessage="my myMessage";
  final CountDownLatch latch=new CountDownLatch(1);
  MessageListener listener=new MessageListener<Object>(){
    public void onMessage(    Message<Object> message){
      if (message.getMessageObject().equals(myMessage)) {
        latch.countDown();
      }
    }
  }
;
  manager.registerListener(name,listener);
  assertFalse(manager.noListenerRegistered(name));
  new Thread(new Runnable(){
    public void run(){
    }
  }
).start();
  assertTrue(latch.await(10,TimeUnit.DAYS));
}
