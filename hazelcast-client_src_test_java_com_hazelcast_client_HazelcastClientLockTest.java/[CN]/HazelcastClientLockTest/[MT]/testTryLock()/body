{
  HazelcastClient hClient=getHazelcastClient();
  final ILock lock=hClient.getLock("testTryLock");
  assertTrue(lock.tryLock());
  lock.lock();
  final CountDownLatch latch=new CountDownLatch(1);
  final CountDownLatch unlockLatch=new CountDownLatch(1);
  new Thread(new Runnable(){
    public void run(){
      assertFalse(lock.tryLock());
      System.out.println(System.currentTimeMillis() + ": Unlocing the latch");
      unlockLatch.countDown();
      try {
        Boolean tryLock=lock.tryLock(10,TimeUnit.SECONDS);
        System.out.println(System.currentTimeMillis() + ": Tried lock " + tryLock);
        assertTrue(tryLock);
      }
 catch (      InterruptedException e) {
        throw new RuntimeException(e);
      }
      latch.countDown();
    }
  }
).start();
  assertTrue(unlockLatch.await(10,TimeUnit.SECONDS));
  lock.unlock();
  lock.unlock();
  assertTrue(latch.await(10,TimeUnit.SECONDS));
}
