{
  RingbufferConfig config=new RingbufferConfig("foo").setInMemoryFormat(InMemoryFormat.OBJECT).setCapacity(3);
  RingbufferContainer ringbuffer=new RingbufferContainer(config,serializationService);
  ringbuffer.add(toData("1"));
  assertEquals(0,ringbuffer.headSequence());
  assertEquals(0,ringbuffer.tailSequence());
  assertEquals(toData("1"),ringbuffer.read(0));
  ringbuffer.add(toData("2"));
  assertEquals(1,ringbuffer.tailSequence());
  assertEquals(0,ringbuffer.headSequence());
  assertEquals(toData("1"),ringbuffer.read(0));
  assertEquals(toData("2"),ringbuffer.read(1));
  ringbuffer.add(toData("3"));
  assertEquals(2,ringbuffer.tailSequence());
  assertEquals(0,ringbuffer.headSequence());
  assertEquals(toData("1"),ringbuffer.read(0));
  assertEquals(toData("2"),ringbuffer.read(1));
  assertEquals(toData("3"),ringbuffer.read(2));
  ringbuffer.add(toData("4"));
  assertEquals(3,ringbuffer.tailSequence());
  assertEquals(1,ringbuffer.headSequence());
  assertEquals(toData("2"),ringbuffer.read(1));
  assertEquals(toData("3"),ringbuffer.read(2));
  assertEquals(toData("4"),ringbuffer.read(3));
  ringbuffer.add(toData("5"));
  assertEquals(4,ringbuffer.tailSequence());
  assertEquals(2,ringbuffer.headSequence());
  assertEquals(toData("3"),ringbuffer.read(2));
  assertEquals(toData("4"),ringbuffer.read(3));
  assertEquals(toData("5"),ringbuffer.read(4));
}
