{
  for (  Object service : getServices()) {
    if (service instanceof ManagedService) {
      try {
        ((ManagedService)service).destroy();
      }
 catch (      Throwable t) {
        logger.log(Level.SEVERE,"Error while stopping service: " + t.getMessage(),t);
      }
    }
  }
  workers.shutdownNow();
  executorService.shutdownNow();
  scheduledExecutorService.shutdownNow();
  eventExecutorService.shutdownNow();
  try {
    scheduledExecutorService.awaitTermination(1,TimeUnit.SECONDS);
  }
 catch (  InterruptedException ignored) {
  }
  try {
    executorService.awaitTermination(3,TimeUnit.SECONDS);
  }
 catch (  InterruptedException ignored) {
  }
  workers.awaitTermination(3);
  mapCalls.clear();
}
