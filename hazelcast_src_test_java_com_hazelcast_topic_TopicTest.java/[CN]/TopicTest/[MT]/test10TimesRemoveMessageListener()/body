{
  ExecutorService ex=Executors.newFixedThreadPool(1);
  final CountDownLatch latch=new CountDownLatch(10);
  try {
    ex.execute(new Runnable(){
      public void run(){
        for (int i=0; i < 10; i++) {
          try {
            removeMessageListener();
            latch.countDown();
          }
 catch (          InterruptedException e) {
            return;
          }
        }
      }
    }
);
    assertTrue(latch.await(30,TimeUnit.SECONDS));
  }
  finally {
    ex.shutdownNow();
  }
}
