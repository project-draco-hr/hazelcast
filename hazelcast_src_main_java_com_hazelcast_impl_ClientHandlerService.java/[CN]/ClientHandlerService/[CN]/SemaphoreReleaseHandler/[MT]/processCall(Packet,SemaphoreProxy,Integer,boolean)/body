{
  if (detach) {
    semaphoreProxy.releaseDetach(permits);
    getClientEndpoint(packet.conn).attachDetachPermits(packet.name,-permits);
  }
 else {
    semaphoreProxy.release(permits);
  }
}
