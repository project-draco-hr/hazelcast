{
  if (detach) {
    semaphoreProxy.releaseDetach(permits);
    getClientEndpoint(packet.conn).attachDetachPermits(semaphoreProxy.getName(),-permits);
  }
 else {
    semaphoreProxy.release(permits);
  }
}
