{
  String type=protocol.getArgs()[0];
  String name=protocol.getArgs()[1];
  if ("map".equals(type)) {
    Entries entries=(Entries)node.factory.getMap(name).entrySet();
    Collection<Map.Entry> colEntries=entries.getKeyValues();
    ByteBuffer[] buffers=new ByteBuffer[colEntries.size() * 2];
    int i=0;
    System.out.println(colEntries.size());
    for (    Object obj : colEntries) {
      KeyValue entry=(KeyValue)obj;
      Data key=entry.getKeyData();
      Data value=entry.getValueData();
      buffers[i++]=key == null ? ByteBuffer.allocate(0) : ByteBuffer.wrap(entry.getKeyData().buffer);
      buffers[i++]=value == null ? ByteBuffer.allocate(0) : ByteBuffer.wrap(entry.getValueData().buffer);
    }
    return protocol.success(buffers);
  }
  return protocol;
}
