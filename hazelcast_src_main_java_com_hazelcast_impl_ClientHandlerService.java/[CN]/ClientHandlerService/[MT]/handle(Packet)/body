{
  checkFirstCall();
  ClientEndpoint clientEndpoint=getClientEndpoint(packet.conn);
  CallContext callContext=clientEndpoint.getCallContext(packet.threadId);
  ClientOperationHandler handler=clientOperationHandlers[packet.operation.getValue()];
  if (handler == null) {
    handler=unknownOperationHandler;
  }
  if (!clientEndpoint.isAuthenticated() && packet.operation != CLIENT_AUTHENTICATE) {
    checkAuth(packet.conn);
    return;
  }
  ClientRequestHandler clientRequestHandler=new ClientPacketRequestHandler(node,packet,callContext,handler,clientEndpoint.getSubject(),packet.conn);
  clientEndpoint.addRequest(clientRequestHandler);
  if (packet.operation == CONCURRENT_MAP_UNLOCK) {
    node.executorManager.executeNow(clientRequestHandler);
  }
 else {
    int hash=hash(callContext.getThreadId(),THREAD_COUNT);
    workers[hash].addWork(clientRequestHandler);
  }
}
