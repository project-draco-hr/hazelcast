{
  TestHazelcastInstanceFactory nodeFactory=createHazelcastInstanceFactory(2);
  Config cfg1=new Config();
  cfg1.getReplicatedMapConfig("default").setInMemoryFormat(InMemoryFormat.OBJECT);
  cfg1.getReplicatedMapConfig("default").setReplicationDelayMillis(0);
  HazelcastInstance instance1=nodeFactory.newHazelcastInstance(cfg1);
  Config cfg2=new Config();
  cfg2.getReplicatedMapConfig("default").setInMemoryFormat(InMemoryFormat.OBJECT);
  cfg2.getReplicatedMapConfig("default").setReplicationDelayMillis(1000);
  HazelcastInstance instance2=nodeFactory.newHazelcastInstance(cfg2);
  final ReplicatedMap<Object,Object> map1=instance1.getReplicatedMap("default");
  final ReplicatedMap<Object,Object> map2=instance2.getReplicatedMap("default");
  map1.put(1,1);
  map2.put(2,2);
  Thread.sleep(500);
  assertEquals(null,map1.get(2));
  assertEquals(1,map2.get(1));
  Thread.sleep(1500);
  assertEquals(2,map1.get(2));
}
