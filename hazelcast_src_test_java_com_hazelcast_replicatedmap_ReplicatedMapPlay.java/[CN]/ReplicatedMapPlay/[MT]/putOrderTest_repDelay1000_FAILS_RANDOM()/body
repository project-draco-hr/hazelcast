{
  TestHazelcastInstanceFactory nodeFactory=createHazelcastInstanceFactory(2);
  Config cfg=new Config();
  cfg.getReplicatedMapConfig("default").setInMemoryFormat(InMemoryFormat.OBJECT);
  cfg.getReplicatedMapConfig("default").setReplicationDelayMillis(1000);
  HazelcastInstance instance1=nodeFactory.newHazelcastInstance(cfg);
  HazelcastInstance instance2=nodeFactory.newHazelcastInstance(cfg);
  final ReplicatedMap<Object,Object> map1=instance1.getReplicatedMap("default");
  final ReplicatedMap<Object,Object> map2=instance2.getReplicatedMap("default");
  Integer a=new Integer(1);
  Integer b=new Integer(1);
  System.out.println("obj=" + a + " hash=>"+ a.hashCode());
  System.out.println("obj=" + b + " hash=>"+ b.hashCode());
  map1.put(1,1);
  map2.put(1,2);
  HazelcastTestSupport.assertTrueEventually(new AssertTask(){
    public void run(){
      assertEquals(2,map1.get(1));
    }
  }
);
  HazelcastTestSupport.assertTrueEventually(new AssertTask(){
    public void run(){
      assertEquals(2,map2.get(1));
    }
  }
);
}
