{
  super(type);
  byte[] error=ERROR;
  if (type == TextCommandType.ERROR_CLIENT) {
    error=CLIENT_ERROR;
  }
 else   if (type == TextCommandType.ERROR_SERVER) {
    error=SERVER_ERROR;
  }
  this.message=message;
  byte[] msg=(message == null) ? null : message.getBytes();
  int total=error.length;
  if (msg != null) {
    total+=msg.length;
  }
  total+=2;
  response=ByteBuffer.allocate(total);
  response.put(error);
  if (msg != null) {
    response.put(msg);
  }
  response.put(RETURN);
  response.flip();
}
