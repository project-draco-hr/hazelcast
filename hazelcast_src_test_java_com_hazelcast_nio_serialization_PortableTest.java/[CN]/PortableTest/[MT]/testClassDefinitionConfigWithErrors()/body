{
  SerializationConfig serializationConfig=new SerializationConfig();
  serializationConfig.addPortableFactory(FACTORY_ID,new TestPortableFactory());
  serializationConfig.setPortableVersion(1);
  serializationConfig.addClassDefinition(new ClassDefinitionBuilder(FACTORY_ID,RawDataPortable.CLASS_ID).addLongField("l").addCharArrayField("c").addPortableField("p",FACTORY_ID,NamedPortable.CLASS_ID).build());
  try {
    new SerializationServiceImpl(serializationConfig,null);
    Assert.fail("Should throw HazelcastSerializationException!");
  }
 catch (  HazelcastSerializationException e) {
  }
  serializationConfig.setCheckClassDefErrors(false);
  new SerializationServiceImpl(serializationConfig,null);
}
