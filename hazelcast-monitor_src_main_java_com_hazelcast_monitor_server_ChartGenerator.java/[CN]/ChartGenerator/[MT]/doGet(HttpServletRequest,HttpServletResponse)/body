{
  String name=req.getParameter("name");
  String type=req.getParameter("type");
  SessionObject sessionObject=getSessionObject(req.getSession());
  List<MapStatistics> list=null;
  for (  ChangeEventGenerator eventGenerator : sessionObject.eventGenerators) {
    if (eventGenerator.getChangeEventType().equals(ChangeEventType.MAP_STATISTICS)) {
      MapStatisticsGenerator msg=(MapStatisticsGenerator)eventGenerator;
      if (!msg.getName().equals(name)) {
        continue;
      }
      list=msg.getPastMapStatistics();
    }
  }
  if (list == null) {
    return;
  }
  JFreeChart chart;
  if ("size".equals(type)) {
    chart=generateSizeChart(list);
  }
 else {
    chart=generateOperationStatsChart(list);
  }
  try {
    OutputStream out=response.getOutputStream();
    response.setContentType("image/png");
    ChartUtilities.writeChartAsPNG(out,chart,390,250);
  }
 catch (  IOException ignore) {
  }
}
