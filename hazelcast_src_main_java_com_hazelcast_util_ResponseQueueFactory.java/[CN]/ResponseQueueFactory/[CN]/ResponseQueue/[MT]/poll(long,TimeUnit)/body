{
  if (timeout == 0)   return response;
  if (timeout < 0)   new IllegalArgumentException();
  long remaining=unit.toMillis(timeout);
  while (response == null && remaining > 0) {
synchronized (lock) {
      if (response == null) {
        long start=System.currentTimeMillis();
        lock.wait(remaining);
        remaining-=(System.currentTimeMillis() - start);
      }
    }
  }
  return response;
}
