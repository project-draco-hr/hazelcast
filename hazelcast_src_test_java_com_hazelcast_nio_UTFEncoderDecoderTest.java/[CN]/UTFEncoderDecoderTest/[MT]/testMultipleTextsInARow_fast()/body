{
  byte[] buffer=new byte[1024];
  UTFEncoderDecoder utfEncoderDecoder=newUTFEncoderDecoder(true);
  for (int i=0; i < 100; i++) {
    ByteArrayOutputStream baos=new ByteArrayOutputStream(500);
    DataOutputStream dos=new DataOutputStream(baos);
    String[] values=new String[10];
    for (int o=0; o < 10; o++) {
      values[o]=random(i);
      utfEncoderDecoder.writeUTF0(dos,values[o],buffer);
    }
    ByteArrayInputStream bais=new ByteArrayInputStream(baos.toByteArray());
    DataInputStream dis=new DataInputStream(bais);
    for (int o=0; o < 10; o++) {
      String result=utfEncoderDecoder.readUTF0(dis,buffer);
      assertEquals(values[o],result);
    }
  }
}
