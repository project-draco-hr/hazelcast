{
  HazelcastInstance hz=createHazelcastInstance();
  Field original=HazelcastInstanceProxy.class.getDeclaredField("original");
  original.setAccessible(true);
  HazelcastInstanceImpl impl=(HazelcastInstanceImpl)original.get(hz);
  TimedMemberStateFactory timedMemberStateFactory=new TimedMemberStateFactory(impl);
  TimedMemberState memberState=timedMemberStateFactory.createTimedMemberState();
  SerializationService ss=impl.node.getSerializationService();
  ByteArrayOutputStream baos=new ByteArrayOutputStream(2048);
  ObjectDataOutput out=ss.createObjectDataOutputStream(baos);
  out.writeObject(memberState);
  ObjectDataInput in=ss.createObjectDataInput(baos.toByteArray());
  TimedMemberState result=in.readObject();
  assertEquals(memberState,result);
}
