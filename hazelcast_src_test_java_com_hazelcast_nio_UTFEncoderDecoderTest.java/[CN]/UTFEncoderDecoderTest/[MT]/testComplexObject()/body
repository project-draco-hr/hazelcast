{
  TestHazelcastInstanceFactory factory=createHazelcastInstanceFactory(1);
  HazelcastInstance hz=factory.newHazelcastInstance();
  Field original=HazelcastInstanceProxy.class.getDeclaredField("original");
  original.setAccessible(true);
  HazelcastInstanceImpl impl=(HazelcastInstanceImpl)original.get(hz);
  ManagementCenterService mcs=impl.node.getManagementCenterService();
  Method getTimedMemberState=ManagementCenterService.class.getDeclaredMethod("getTimedMemberState");
  getTimedMemberState.setAccessible(true);
  TimedMemberState memberState=(TimedMemberState)getTimedMemberState.invoke(mcs);
  SerializationService ss=impl.node.getSerializationService();
  ByteArrayOutputStream baos=new ByteArrayOutputStream(2048);
  ObjectDataOutput out=ss.createObjectDataOutputStream(baos);
  out.writeObject(memberState);
  ObjectDataInput in=ss.createObjectDataInput(baos.toByteArray());
  TimedMemberState result=in.readObject();
  assertEquals(memberState,result);
}
