{
  final DataInputStream dis=connection.getInputStream();
  if (!connection.headerRead) {
    final byte[] b=new byte[3];
    dis.readFully(b);
    if (!Arrays.equals(HEADER,b)) {
      throw new IllegalStateException("Illegal header " + Arrays.toString(b));
    }
    connection.headerRead=true;
  }
  Packet response=new Packet();
  response.readFrom(this,dis);
  return response;
}
