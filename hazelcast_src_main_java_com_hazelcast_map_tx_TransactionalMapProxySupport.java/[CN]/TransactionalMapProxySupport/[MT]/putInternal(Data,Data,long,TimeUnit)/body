{
  VersionedValue versionedValue=lockAndGet(key,tx.getTimeoutMillis());
  tx.addTransactionLog(new MapTransactionLog(name,key,new TxnSetOperation(name,key,value,versionedValue.version,getTimeInMillis(ttl,timeUnit)),versionedValue.version));
  return versionedValue.value;
}
