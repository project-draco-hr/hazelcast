{
  try {
    boolean useNativeClient=false;
    IHazelcastInstanceLoader instanceLoader=(IHazelcastInstanceLoader)props.get("com.hazelcast.hibernate.instance.loader");
    if (instanceLoader != null) {
      return instanceLoader;
    }
    Class loaderClass=getInstanceLoaderClass(props,useNativeClient);
    instanceLoader=(IHazelcastInstanceLoader)loaderClass.newInstance();
    instanceLoader.configure(props);
    return instanceLoader;
  }
 catch (  Exception e) {
    throw new CacheException(e);
  }
}
