{
  Config config=new Config();
  final String name="defSet";
  final int insCount=4;
  TestHazelcastInstanceFactory factory=createHazelcastInstanceFactory(insCount);
  HazelcastInstance instance1=factory.newHazelcastInstance(config);
  ISet set=instance1.getSet(name);
  for (int i=0; i < 100; i++) {
    set.add("item" + i);
  }
  HazelcastInstance instance2=factory.newHazelcastInstance(config);
  assertEquals(100,instance2.getSet(name).size());
  HazelcastInstance instance3=factory.newHazelcastInstance(config);
  assertEquals(100,instance3.getSet(name).size());
  instance1.getLifecycleService().shutdown();
  assertEquals(100,instance3.getSet(name).size());
  set=instance2.getSet(name);
  for (int i=0; i < 100; i++) {
    set.add("item-" + i);
  }
  instance2.getLifecycleService().shutdown();
  assertEquals(200,instance3.getSet(name).size());
  instance1=factory.newHazelcastInstance(config);
  assertEquals(200,instance1.getSet(name).size());
  instance3.getLifecycleService().shutdown();
  assertEquals(200,instance1.getSet(name).size());
}
