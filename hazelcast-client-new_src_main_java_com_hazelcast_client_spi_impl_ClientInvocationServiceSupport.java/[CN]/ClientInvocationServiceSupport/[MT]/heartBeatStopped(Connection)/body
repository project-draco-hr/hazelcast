{
  final RemoveAllListeners request=new RemoveAllListeners();
  ClientInvocation removeListenerInvocation=new ClientInvocation(client,request,connection);
  removeListenerInvocation.setBypassHeartbeat(true);
  removeListenerInvocation.invoke();
  final Address remoteEndpoint=connection.getEndPoint();
  final Iterator<ClientInvocation> iterator=eventHandlerMap.values().iterator();
  final TargetDisconnectedException response=new TargetDisconnectedException(remoteEndpoint);
  while (iterator.hasNext()) {
    final ClientInvocation clientInvocation=iterator.next();
    if (clientInvocation.getSendConnection().equals(connection)) {
      iterator.remove();
      clientInvocation.notifyException(response);
    }
  }
}
