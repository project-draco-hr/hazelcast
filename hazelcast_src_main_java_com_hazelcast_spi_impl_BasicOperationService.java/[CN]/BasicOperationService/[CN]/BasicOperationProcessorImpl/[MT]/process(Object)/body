{
  if (o == null) {
    throw new IllegalArgumentException();
  }
  if (o instanceof Operation) {
    doRunOperation((Operation)o);
  }
  if (o instanceof Packet) {
    doRunPacket((Packet)o);
  }
  if (o instanceof Runnable) {
    ((Runnable)o).run();
  }
  throw new IllegalArgumentException("Unrecognized task:" + o);
}
