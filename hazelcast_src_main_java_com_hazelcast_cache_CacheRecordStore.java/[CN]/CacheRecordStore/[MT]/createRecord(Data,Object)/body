{
  Record record=null;
  final Data dataValue=cacheService.toData(value);
switch (cacheConfig.getInMemoryFormat()) {
case BINARY:
    record=new DataRecordWithStats(keyData,dataValue);
  break;
case OBJECT:
record=new ObjectRecordWithStats(keyData,value);
break;
default :
throw new IllegalArgumentException("Invalid storage format: " + cacheConfig.getInMemoryFormat());
}
cacheService.publishEvent(name,EventType.CREATED,record.getKey(),null,dataValue);
return record;
}
