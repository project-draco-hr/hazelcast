{
  Record record=null;
  final Data dataValue=cacheService.toData(value);
switch (cacheConfig.getInMemoryFormat()) {
case BINARY:
    record=new DataRecord(keyData,dataValue,true);
  break;
case OBJECT:
record=new ObjectRecord(keyData,value,true);
break;
default :
throw new IllegalArgumentException("Invalid storage format: " + cacheConfig.getInMemoryFormat());
}
cacheService.publishEvent(name,EventType.CREATED,record.getKey(),null,dataValue);
return record;
}
