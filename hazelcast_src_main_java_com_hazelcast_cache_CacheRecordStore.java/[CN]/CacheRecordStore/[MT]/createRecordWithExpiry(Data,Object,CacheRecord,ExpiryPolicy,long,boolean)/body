{
  Duration expiryDuration;
  try {
    expiryDuration=_expiryPolicy.getExpiryForCreation();
  }
 catch (  Throwable t) {
    expiryDuration=Duration.ETERNAL;
  }
  long et=expiryDuration.getAdjustedTime(now);
  if (!disableWriteThrough) {
    writeThroughCache(key,value);
  }
  record=createRecord(key,value,et);
  if (isExpiredAt(et,now)) {
    processExpiredEntry(key,record);
  }
 else {
    records.put(key,record);
    return true;
  }
  return false;
}
