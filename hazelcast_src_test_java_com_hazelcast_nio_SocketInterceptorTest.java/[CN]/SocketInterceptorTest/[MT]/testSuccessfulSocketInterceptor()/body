{
  Config config=new Config();
  SocketInterceptorConfig socketInterceptorConfig=new SocketInterceptorConfig();
  MySocketInterceptor mySocketInterceptor=new MySocketInterceptor(true);
  socketInterceptorConfig.setImplementation(mySocketInterceptor).setEnabled(true);
  config.getNetworkConfig().setSocketInterceptorConfig(socketInterceptorConfig);
  HazelcastInstance h1=Hazelcast.newHazelcastInstance(config);
  HazelcastInstance h2=Hazelcast.newHazelcastInstance(config);
  TestUtil.warmUpPartitions(h1,h2);
  assertEquals(2,h2.getCluster().getMembers().size());
  assertEquals(2,h1.getCluster().getMembers().size());
  assertEquals(1,mySocketInterceptor.getAcceptCallCount());
  assertEquals(1,mySocketInterceptor.getConnectCallCount());
  assertEquals(2,mySocketInterceptor.getInitCallCount());
  assertEquals(0,mySocketInterceptor.getAcceptFailureCount());
  assertEquals(0,mySocketInterceptor.getConnectFailureCount());
}
