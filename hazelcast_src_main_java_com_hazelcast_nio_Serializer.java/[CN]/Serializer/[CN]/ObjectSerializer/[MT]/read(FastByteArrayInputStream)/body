{
  ObjectInputStream in=new ObjectInputStream(bbis){
    @Override protected Class<?> resolveClass(    ObjectStreamClass desc) throws ClassNotFoundException {
      return classForName(desc.getName());
    }
  }
;
  if (shared) {
    return in.readObject();
  }
 else {
    return in.readUnshared();
  }
}
